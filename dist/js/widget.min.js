if("undefined"==typeof config){var config={};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){var t,n,r,s=e.getElementById("webpage-container"),a=e.getElementById("webpage-frame"),i=g.getInt("rsH")/g.getInt("rsW")*100,o=u.scrollHorizontal>0?u.scrollHorizontal:0,l=u.scrollVertical>0?u.scrollVertical:0,c=parseFloat(u.zoom);s&&a&&(t=s.getElementsByClassName("blocker")[0],s.style.visibility="hidden",0!==l&&(i+=l/g.getInt("rsW")*100),s.setAttribute("style","padding-bottom:"+i+"%"),t.style.display=u.interactive?"none":"block",a.setAttribute("scrolling",u.scrollbars?"yes":"no"),n="-ms-zoom:"+c+";-moz-transform: scale("+c+");-moz-transform-origin: 0 0;-o-transform: scale("+c+");-o-transform-origin: 0 0;-webkit-transform: scale("+c+");-webkit-transform-origin: 0 0;",n+="width: "+1/c*100+"%;height: "+1/c*100+"%;",a.setAttribute("style",n),(0!==o||0!==l)&&(r="margin: -"+l+"px 0 0 -"+o+"px;",a.setAttribute("style",n+r)))}function r(){var t=e.getElementById("webpage-frame"),n=e.getElementById("webpage-container"),s=/[?#&]/.test(m),a=Math.ceil(100*Math.random()),i=s?m+"&dummyVar="+a:m+"?dummyVar="+a;n&&t&&(t.onload=function(){t.onload=null,n.style.visibility="visible",u.refresh>0&&(d=setInterval(function(){r()},u.refresh))},t.setAttribute("src",i))}function s(){var t=e.getElementById("webpage-frame");u.refresh>0&&clearInterval(d),t&&(t.src="about:blank")}function a(){t.rpc.call("","rsevent_ready",null,g.getString("id"),!0,!0,!0,!0,!1)}function i(){s()}function o(){r()}function l(){s()}function c(r,s){g=new t.Prefs,Array.isArray(r)&&r.length>0&&"additionalParams"===r[0]&&Array.isArray(s)&&s.length>0&&(u=JSON.parse(s[0]),e.body.style.background=u.background.color,m=u.url,-1===m.indexOf("://")&&(m="http://"+m),n(),a())}var g=null,u={},m="",d=null;return{setParams:c,pause:i,play:o,stop:l}}(document,gadgets),function(e,t){"use strict";function n(){RiseVision.WebPage.play()}function r(){RiseVision.WebPage.pause()}function s(){RiseVision.WebPage.stop()}var a=new t.Prefs,i=a.getString("id");e.oncontextmenu=function(){return!1},i&&""!==i&&(t.rpc.register("rscmd_play_"+i,n),t.rpc.register("rscmd_pause_"+i,r),t.rpc.register("rscmd_stop_"+i,s),t.rpc.register("rsparam_set_"+i,RiseVision.WebPage.setParams),t.rpc.call("","rsparam_get",null,i,["additionalParams"]))}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-41395348-11"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiUmlzZVZpc2lvbiIsIldlYlBhZ2UiLCJkb2N1bWVudCIsImdhZGdldHMiLCJfY29uZmlndXJlUGFnZSIsImJsb2NrZXIiLCJ6b29tU3R5bGUiLCJtYXJnaW5TdHlsZSIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiZnJhbWUiLCJhc3BlY3RSYXRpbyIsIl9wcmVmcyIsImdldEludCIsInNjcm9sbEhvcml6VmFsIiwiX2FkZGl0aW9uYWxQYXJhbXMiLCJzY3JvbGxIb3Jpem9udGFsIiwic2Nyb2xsVmVydFZhbCIsInNjcm9sbFZlcnRpY2FsIiwiem9vbSIsInBhcnNlRmxvYXQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic3R5bGUiLCJ2aXNpYmlsaXR5Iiwic2V0QXR0cmlidXRlIiwiZGlzcGxheSIsIl9sb2FkRnJhbWUiLCJoYXNQYXJhbXMiLCJ0ZXN0IiwiX3VybCIsInJhbmRvbU51bSIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwicmVmcmVzaFVSTCIsIm9ubG9hZCIsInJlZnJlc2giLCJfaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX3VubG9hZEZyYW1lIiwiY2xlYXJJbnRlcnZhbCIsInNyYyIsIl9yZWFkeSIsInJwYyIsImNhbGwiLCJnZXRTdHJpbmciLCJwYXVzZSIsInBsYXkiLCJzdG9wIiwic2V0UGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJQcmVmcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIkpTT04iLCJwYXJzZSIsImJvZHkiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ1cmwiLCJpbmRleE9mIiwid2luZG93IiwicHJlZnMiLCJpZCIsIm9uY29udGV4dG1lbnUiLCJyZWdpc3RlciIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImFzeW5jIiwibG9jYXRpb24iLCJw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IjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBjb25maWc6IHRydWUgKi9cclxuLyogZXhwb3J0ZWQgY29uZmlnICovXHJcbmlmICh0eXBlb2YgY29uZmlnID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgdmFyIGNvbmZpZyA9IHtcclxuICAgIC8vIHZhcmlhYmxlcyBnbyBoZXJlXHJcbiAgfTtcclxuXHJcbiAgaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxyXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImNvbXBvbmVudHMvcnYtY29tbW9uLWkxOG4vZGlzdC9sb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxyXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xyXG5cclxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xyXG5SaXNlVmlzaW9uLldlYlBhZ2UgPSB7fTtcclxuXHJcblJpc2VWaXNpb24uV2ViUGFnZSA9IChmdW5jdGlvbiAoZG9jdW1lbnQsIGdhZGdldHMpIHtcclxuXHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gIC8vIHByaXZhdGUgdmFyaWFibGVzXHJcbiAgdmFyIF9wcmVmcyA9IG51bGwsXHJcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IHt9LFxyXG4gICAgX3VybCA9IFwiXCIsXHJcbiAgICBfaW50ZXJ2YWxJZCA9IG51bGw7XHJcblxyXG4gIGZ1bmN0aW9uIF9jb25maWd1cmVQYWdlKCkge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1jb250YWluZXJcIiksXHJcbiAgICAgIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWZyYW1lXCIpLFxyXG4gICAgICBhc3BlY3RSYXRpbyA9ICAoX3ByZWZzLmdldEludChcInJzSFwiKSAvIF9wcmVmcy5nZXRJbnQoXCJyc1dcIikpICogMTAwLFxyXG4gICAgICBzY3JvbGxIb3JpelZhbCA9IChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxIb3Jpem9udGFsID4gMCkgP1xyXG4gICAgICAgICAgX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsSG9yaXpvbnRhbCA6IDAsXHJcbiAgICAgIHNjcm9sbFZlcnRWYWwgPSAoX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsVmVydGljYWwgPiAwKSA/XHJcbiAgICAgICAgICBfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxWZXJ0aWNhbCA6IDAsXHJcbiAgICAgIHpvb20gPSBwYXJzZUZsb2F0KF9hZGRpdGlvbmFsUGFyYW1zLnpvb20pLFxyXG4gICAgICBibG9ja2VyLCB6b29tU3R5bGUsIG1hcmdpblN0eWxlO1xyXG5cclxuICAgIGlmIChjb250YWluZXIgJiYgZnJhbWUpIHtcclxuICAgICAgYmxvY2tlciA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYmxvY2tlclwiKVswXTtcclxuXHJcbiAgICAgIC8vIEhpZGluZyBpZnJhbWUgY29udGFpbmVyLCB2aXNpYmxlIHdoZW4gdGhlIGlmcmFtZSBzdWNjZXNzZnVsbHkgbG9hZHNcclxuICAgICAgY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG5cclxuICAgICAgLy8gc2V0IHRoZSBwYWRkaW5nLWJvdHRvbSB3aXRoIHRoZSBhc3BlY3QgcmF0aW8gJSAocmVzcG9uc2l2ZSlcclxuICAgICAgaWYgKHNjcm9sbFZlcnRWYWwgIT09IDApIHtcclxuICAgICAgICAvLyByZWNhbGN1bGF0ZSBhc3BlY3QgcmF0aW9cclxuICAgICAgICBhc3BlY3RSYXRpbyArPSAoc2Nyb2xsVmVydFZhbCAvIF9wcmVmcy5nZXRJbnQoXCJyc1dcIikpICogMTAwO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBhZGRpbmctYm90dG9tOlwiICsgYXNwZWN0UmF0aW8gKyBcIiVcIik7XHJcblxyXG4gICAgICAvLyBDb25maWd1cmUgaW50ZXJhY3Rpdml0eSBvZiBpZnJhbWVcclxuICAgICAgYmxvY2tlci5zdHlsZS5kaXNwbGF5ID0gKF9hZGRpdGlvbmFsUGFyYW1zLmludGVyYWN0aXZlKSA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xyXG4gICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIixcclxuICAgICAgICAoX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsYmFycykgPyBcInllc1wiIDogXCJub1wiKTtcclxuXHJcbiAgICAgIC8vIENvbmZpZ3VyZSB0aGUgem9vbSAoc2NhbGUpIHN0eWxpbmdcclxuICAgICAgem9vbVN0eWxlID0gXCItbXMtem9vbTpcIiArIHpvb20gKyBcIjtcIiArXHJcbiAgICAgICAgXCItbW96LXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcclxuICAgICAgICBcIi1tb3otdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcclxuICAgICAgICBcIi1vLXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcclxuICAgICAgICBcIi1vLXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIiArXHJcbiAgICAgICAgXCItd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcclxuICAgICAgICBcIi13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiO1xyXG5cdFx0XHJcblx0ICB6b29tU3R5bGUgKz0gXCJ3aWR0aDogXCIgKyAoKDEgLyB6b29tKSAqIDEwMCkgKyBcIiU7XCIgK1xyXG5cdFx0XCJoZWlnaHQ6IFwiICsgKCgxIC8gem9vbSkgKiAxMDApICsgXCIlO1wiO1xyXG5cclxuICAgICAgLy8gQXBwbHkgdGhlIHpvb20gKHNjYWxlKSBvbiB0aGUgaWZyYW1lXHJcbiAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIHpvb21TdHlsZSk7XHJcblxyXG4gICAgICBpZiAoc2Nyb2xsSG9yaXpWYWwgIT09IDAgfHwgc2Nyb2xsVmVydFZhbCAhPT0gMCkge1xyXG4gICAgICAgIC8vIENvbmZpZ3VyZSB0aGUgbWFyZ2luIHN0eWxpbmdcclxuICAgICAgICBtYXJnaW5TdHlsZSA9IFwibWFyZ2luOiBcIiArIFwiLVwiICsgc2Nyb2xsVmVydFZhbCArIFwicHggMCAwIC1cIiArXHJcbiAgICAgICAgICBzY3JvbGxIb3JpelZhbCArIFwicHg7XCI7XHJcblxyXG4gICAgICAgIC8qIEFwcGx5IHRoZSBtYXJnaW4gc3R5bGluZyBvbiB0aGUgaWZyYW1lIHdoaWxlIG1haW50YWluaW5nXHJcbiAgICAgICAgIHRoZSB6b29tIHN0eWxpbmcgKi9cclxuICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCB6b29tU3R5bGUgKyBtYXJnaW5TdHlsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9sb2FkRnJhbWUoKSB7XHJcbiAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtZnJhbWVcIiksXHJcbiAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1jb250YWluZXJcIiksXHJcbiAgICAgIGhhc1BhcmFtcyA9IC9bPyMmXS8udGVzdChfdXJsKSxcclxuICAgICAgcmFuZG9tTnVtID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDApLFxyXG4gICAgICByZWZyZXNoVVJMID0gaGFzUGFyYW1zID9cclxuICAgICAgICAgIF91cmwgKyBcIiZkdW1teVZhcj1cIiArIHJhbmRvbU51bSA6XHJcbiAgICAgICAgICBfdXJsICsgXCI/ZHVtbXlWYXI9XCIgKyByYW5kb21OdW07XHJcblxyXG4gICAgaWYgKGNvbnRhaW5lciAmJiBmcmFtZSkge1xyXG4gICAgICBmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnJhbWUub25sb2FkID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gU2hvdyB0aGUgaWZyYW1lIGNvbnRhaW5lclxyXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcblxyXG4gICAgICAgIC8vIFJ1biBzZXRJbnRlcnZhbCB0byByZWxvYWQgcGFnZSBiYXNlZCBvbiB0aGUgZGF0YSByZWZyZXNoIHZhbHVlXHJcbiAgICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2ggPiAwKSB7XHJcbiAgICAgICAgICBfaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX2xvYWRGcmFtZSgpO1xyXG4gICAgICAgICAgfSwgX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIHJlZnJlc2hVUkwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX3VubG9hZEZyYW1lKCkge1xyXG4gICAgdmFyIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWZyYW1lXCIpO1xyXG5cclxuICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy5yZWZyZXNoID4gMCkge1xyXG4gICAgICBjbGVhckludGVydmFsKF9pbnRlcnZhbElkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZnJhbWUpIHtcclxuICAgICAgZnJhbWUuc3JjID0gXCJhYm91dDpibGFua1wiO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcclxuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcclxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGF1c2UoKSB7XHJcbiAgICBfdW5sb2FkRnJhbWUoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XHJcbiAgICBfbG9hZEZyYW1lKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdG9wKCkge1xyXG4gICAgX3VubG9hZEZyYW1lKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRQYXJhbXMobmFtZXMsIHZhbHVlcykge1xyXG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcclxuXHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lc1swXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZSh2YWx1ZXNbMF0pO1xyXG5cclxuICAgICAgICAvLyBzZXQgdGhlIGRvY3VtZW50IGJhY2tncm91bmQgd2l0aCB2YWx1ZSBzYXZlZCBpbiBzZXR0aW5nc1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IF9hZGRpdGlvbmFsUGFyYW1zLmJhY2tncm91bmQuY29sb3I7XHJcblxyXG4gICAgICAgIC8vIENvbmZpZ3VyZSB0aGUgdmFsdWUgZm9yIF91cmxcclxuICAgICAgICBfdXJsID0gX2FkZGl0aW9uYWxQYXJhbXMudXJsO1xyXG5cclxuICAgICAgICAvLyBBZGQgaHR0cDovLyBpZiBubyBwcm90b2NvbCBwYXJhbWV0ZXIgZXhpc3RzXHJcbiAgICAgICAgaWYgKF91cmwuaW5kZXhPZihcIjovL1wiKSA9PT0gLTEpIHtcclxuICAgICAgICAgIF91cmwgPSBcImh0dHA6Ly9cIiArIF91cmw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfY29uZmlndXJlUGFnZSgpO1xyXG4gICAgICAgIF9yZWFkeSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2V0UGFyYW1zOiBzZXRQYXJhbXMsXHJcbiAgICBwYXVzZTogcGF1c2UsXHJcbiAgICBwbGF5OiBwbGF5LFxyXG4gICAgc3RvcDogc3RvcFxyXG4gIH07XHJcblxyXG59KShkb2N1bWVudCwgZ2FkZ2V0cyk7XHJcblxyXG4vKiBnbG9iYWwgUmlzZVZpc2lvbiwgZ2FkZ2V0cyAqL1xyXG5cclxuKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcclxuICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcclxuICAgIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XHJcblxyXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxyXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XHJcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGxheSgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGF1c2UoKSB7XHJcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGF1c2UoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XHJcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2Uuc3RvcCgpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XHJcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XHJcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcclxuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcclxuXHJcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIFJpc2VWaXNpb24uV2ViUGFnZS5zZXRQYXJhbXMpO1xyXG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcclxuICB9XHJcblxyXG59KSh3aW5kb3csIGdhZGdldHMpO1xyXG5cclxuXHJcblxyXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXHJcbnZhciBfZ2FxID0gX2dhcSB8fCBbXTtcclxuXHJcbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTQxMzk1MzQ4LTExJ10pO1xyXG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcclxuXHJcbihmdW5jdGlvbigpIHtcclxuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XHJcbiAgZ2Euc3JjID0gKCdodHRwczonID09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gJ2h0dHBzOi8vc3NsJyA6ICdodHRwOi8vd3d3JykgKyAnLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzJztcclxuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XHJcbn0pKCk7XHJcbi8qIGpzaGludCBpZ25vcmU6ZW5kICovXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==