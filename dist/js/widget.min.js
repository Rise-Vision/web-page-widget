var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,t){var o=null;e.event?(o=e,o.file_url&&(o.file_format=n(o.file_url)),o.company_id=a,o.display_id=s,t(o)):t(o)}function t(){var e=new Date,t=e.getUTCFullYear(),n=e.getUTCMonth()+1,o=e.getUTCDate();return 10>n&&(n="0"+n),10>o&&(o="0"+o),t+n+o}function n(e){var t,n=/[?#&]/;return e&&"string"==typeof e?(t=e.substr(e.lastIndexOf(".")+1),n.test(t)&&(t=t.substr(0,-1!==t.indexOf("?")?t.indexOf("?"):t.length),t=t.substr(0,-1!==t.indexOf("#")?t.indexOf("#"):t.length),t=t.substr(0,-1!==t.indexOf("&")?t.indexOf("&"):t.length)),t.toLowerCase()):null}function o(e){var n={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:t(),rows:[{insertId:""}]},o=JSON.parse(JSON.stringify(n));return o.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),o.rows[0].json=JSON.parse(JSON.stringify(e)),o.rows[0].json.ts=(new Date).toISOString(),o}function i(t,n){e(n,function(e){null!==e&&RiseVision.Common.Logger.log(t,e)})}function r(e,t){a=e,s=t}var s="",a="";return{getInsertData:o,getFileFormat:n,logEvent:i,setIds:r}}(),RiseVision.Common.Logger=function(e){"use strict";function t(e){var t=new XMLHttpRequest;return new Date-c<358e4?e({}):(t.open("POST",i,!0),t.onloadend=function(){var n=JSON.parse(t.response);e({token:n.access_token,refreshedAt:new Date})},t.send(),void 0)}function n(e){return s&&l===e}function o(o,i){function f(t){var n,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",o),c=t.refreshedAt||c,u=t.token||u,n=e.getInsertData(i),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),i.cb&&"function"==typeof i.cb&&(a.onloadend=function(){i.cb(a.response)}),a.send(JSON.stringify(n))}if(!(!o||!i||i.hasOwnProperty("event")&&!i.event||i.hasOwnProperty("event")&&n(i.event)))return s=!0,l=i.event,setTimeout(function(){s=!1},a),t(f)}var i="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",c=0,u="";return{log:o}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,t){var n="font-family: "+decodeURIComponent(t.font.family).replace(/'/g,"")+"; ",o="color: "+(t.color?t.color:t.forecolor)+"; ",i="font-size: "+(-1===t.size.indexOf("px")?t.size+"px; ":t.size+"; "),r="font-weight: "+(t.bold?"bold":"normal")+"; ",s="font-style: "+(t.italic?"italic":"normal")+"; ",a="text-decoration: "+(t.underline?"underline":"none")+"; ",l="background-color: "+(t.highlightColor?t.highlightColor:t.backcolor)+";";return"."+e+" {"+n+o+i+r+s+a+l+"}"}function t(e){for(var t=document.createElement("style"),n=0,o=e.length;o>n;n++)t.appendChild(document.createTextNode(e[n]));document.head.appendChild(t)}function n(n,r){function s(){r&&"function"==typeof r&&r()}function a(){s()}var l=null,c=[],u=[],f=[];if(!n||0===n.length)return s(),void 0;n.forEach(function(n){n.class&&n.fontStyle&&t([e(n.class,n.fontStyle)])});for(var g=0;g<n.length;g++)n[g].fontStyle&&n[g].fontStyle.font.type&&"google"===n[g].fontStyle.font.type&&(l=n[g].fontStyle.font.family.split(",")[0],l=l.replace(/'/g,""),c.push(l));for(g=0;g<n.length;g++)n[g].fontStyle&&n[g].fontStyle.font.type&&"custom"===n[g].fontStyle.font.type&&(u.push(decodeURIComponent(n[g].fontStyle.font.family).replace(/'/g,"")),f.push(n[g].fontStyle.font.url.replace(/'/g,"\\'")));if(0===c.length&&0===u.length)s();else{for(var d=0;d<u.length;d+=1)o(u[d],f[d]);c.length>0?i(c,a):s()}}function o(e,t,n){var o=null,i="font-family: "+e+"; src: url('"+t+"');";n=n||document,o=n.styleSheets[0],null!==o&&o.addRule("@font-face",i)}function i(e,t){WebFont.load({google:{families:e},active:function(){t&&"function"==typeof t&&t()},inactive:function(){t&&"function"==typeof t&&t()},timeout:2e3})}function r(e){for(var t=e.length,n=[],o=0;t>o;o++)n[o]=new Image,n[o].src=e[o]}function s(e){for(var t,n=window.location.search.substring(1),o=n.split("&"),i=0;i<o.length;i++)if(t=o[i].split("="),t[0]==e)return decodeURIComponent(t[1]);return""}function a(e){var t="";switch(e){case 404:t="The file does not exist or cannot be accessed.";break;case 507:t="There is not enough disk space to save the file on Rise Cache.";break;default:t="There was a problem retrieving the file from Rise Cache."}return t}function l(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent}function c(e,t){var n=new XMLHttpRequest;if(e&&t&&"function"==typeof t){n.open("HEAD",e+"?cb="+(new Date).getTime(),!1);try{n.send(),t(n.status>=200&&n.status<304)}catch(o){t(!1)}}}return{getQueryParameter:s,getFontCssStyle:e,addCSSRules:t,loadFonts:n,loadCustomFont:o,loadGoogleFonts:i,preloadImages:r,getRiseCacheErrorMessage:a,unescapeHTML:l,hasInternetConnection:c}}(),"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){t.rpc.call("","rsevent_ready",null,R.getString("id"),!0,!0,!0,!0,!1)}function o(e){function t(t){var n=!0,o=t.target.getResponseHeader("X-Frame-Options");o&&"SAMEORIGIN"===o.toUpperCase()&&(m({event:"error",event_details:"X-Frame-Options header",error_details:"SAMEORIGIN",url:E}),O.show("The owner of the Web Page at the URL provided does not allow the Page to be embedded within an iFrame. If possible, please contact the Web Page owner to discuss X-Frame-Options."),n=!1),e&&"function"==typeof e&&e(n)}var n="https://proxy.risevision.com/"+E,o=new XMLHttpRequest;o.addEventListener("load",t),o.open("GET",n),o.send()}function i(t){var n=e.querySelector(".blocker");n.style.display=w.interactivity.interactive?"none":"block",t.setAttribute("scrolling",w.interactivity.interactive&&w.interactivity.scrollbars?"yes":"no")}function r(){var t=e.getElementById("container"),n=e.querySelector(".webpage-frame"),o=R.getInt("rsH")/R.getInt("rsW")*100;t&&n&&(i(n),a(n),s(n),0!==_&&(o+=_/R.getInt("rsW")*100),t.setAttribute("style","padding-bottom:"+o+"%"))}function s(e){var t=parseFloat(w.zoom),n="",o="";o="-ms-zoom:"+t+";-moz-transform: scale("+t+");-moz-transform-origin: 0 0;-o-transform: scale("+t+");-o-transform-origin: 0 0;-webkit-transform: scale("+t+");-webkit-transform-origin: 0 0;transform: scale("+t+");transform-origin: 0 0;",n=e.getAttribute("style"),o+="width: "+1/t*100+"%;height: "+1/t*100+"%;",n&&(o=n+o),e.setAttribute("style",o)}function a(e){var t="",n="",o=0;w.region&&w.region.showRegion&&"region"===w.region.showRegion&&(w.region.horizontal>0&&(o=w.region.horizontal),w.region.vertical>0&&(_=w.region.vertical),(0!==o||0!==_)&&(t=e.getAttribute("style"),n="margin: -"+_+"px 0 0 -"+o+"px;",t&&(n=t+n),e.setAttribute("style",n)))}function l(){I=setInterval(function(){C.hasInternetConnection("img/transparent.png",function(e){e&&f()})},w.refresh)}function c(){var t=e.getElementById("container"),n=e.createElement("iframe");return n.className="webpage-frame",n.style.visibility="hidden",n.setAttribute("frameborder","0"),n.setAttribute("allowTransparency","true"),i(n),a(n),s(n),n.onload=function(){this.onload=null,this.style.visibility="visible",t.removeChild(e.querySelector(".webpage-frame"))},n.setAttribute("src",E),n}function u(){var t=e.querySelector(".webpage-frame");t.onload=function(){this.onload=null,w.refresh>0&&null===I&&l()},t.setAttribute("src",E)}function f(){var t=e.getElementById("container"),n=e.createDocumentFragment(),o=c();n.appendChild(o),t.appendChild(n)}function g(){var t=e.querySelector(".webpage-frame");w.refresh>0&&clearInterval(I),t&&(t.src="about:blank")}function d(){O=new RiseVision.Common.Message(e.getElementById("container"),e.getElementById("messageContainer")),e.getElementById("messageContainer").style.height=R.getInt("rsH")+"px",E=w.url,-1===E.indexOf("://")&&(E="http://"+E),o(function(e){e&&r(),n()})}function p(){return"webpage_events"}function m(e){RiseVision.Common.LoggerUtils.logEvent(p(),e)}function h(){g()}function y(){u()}function v(){h()}function b(e){w=JSON.parse(JSON.stringify(e)),d()}var R=new t.Prefs,C=RiseVision.Common.Utilities,w=null,E="",_=0,I=null,O=null;return{getTableName:p,logEvent:m,setAdditionalParams:b,pause:h,play:y,stop:v}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function n(){try{t.style.height=e.style.height}catch(n){console.warn("Can't initialize Message - ",n.message)}}function o(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",r=!1}}function i(n){var o,i=document.createDocumentFragment();r?(o=t.querySelector(".message"),o.innerHTML=n):(e.style.visibility="hidden",t.style.display="block",o=document.createElement("p"),o.innerHTML=n,o.setAttribute("class","message"),i.appendChild(o),t.appendChild(i),r=!0)}var r=!1;return n(),{hide:o,show:i}},function(e,t,n){"use strict";function o(e,t){var n,o="",i="";Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(o=t[0]),"displayId"===e[1]&&(i=t[1]?t[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,i),"additionalParams"===e[2]&&(n=JSON.parse(t[2]),RiseVision.WebPage.setAdditionalParams(n)))}function i(){RiseVision.WebPage.play()}function r(){RiseVision.WebPage.pause()}function s(){RiseVision.WebPage.stop()}var a=(new n.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},a&&""!==a&&(n.rpc.register("rscmd_play_"+a,i),n.rpc.register("rscmd_pause_"+a,r),n.rpc.register("rscmd_stop_"+a,s),n.rpc.register("rsparam_set_"+a,o),n.rpc.call("","rsparam_get",null,a,["companyId","displayId","additionalParams"]))}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-6"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdldEV2ZW50UGFyYW1zIiwicGFyYW1zIiwiY2IiLCJqc29uIiwiZXZlbnQiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiZ2V0RmlsZUZvcm1hdCIsImNvbXBhbnlfaWQiLCJjb21wYW55SWQiLCJkaXNwbGF5X2lkIiwiZGlzcGxheUlkIiwiZ2V0U3VmZml4IiwiZGF0ZSIsIkRhdGUiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJtb250aCIsImdldFVUQ01vbnRoIiwiZGF5IiwiZ2V0VVRDRGF0ZSIsInVybCIsInN0ciIsImhhc1BhcmFtcyIsInN1YnN0ciIsImxhc3RJbmRleE9mIiwidGVzdCIsImluZGV4T2YiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsImdldEluc2VydERhdGEiLCJCQVNFX0lOU0VSVF9TQ0hFTUEiLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsInRlbXBsYXRlU3VmZml4Iiwicm93cyIsImluc2VydElkIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwidHMiLCJ0b0lTT1N0cmluZyIsImxvZ0V2ZW50IiwidGFibGUiLCJMb2dnZXIiLCJsb2ciLCJzZXRJZHMiLCJjb21wYW55IiwiZGlzcGxheSIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJ0aHJvdHRsZSIsImxhc3RFdmVudCIsInRhYmxlTmFtZSIsImluc2VydFdpdGhUb2tlbiIsInJlZnJlc2hEYXRhIiwiaW5zZXJ0RGF0YSIsInNlcnZpY2VVcmwiLCJyZXBsYWNlIiwic2V0UmVxdWVzdEhlYWRlciIsImhhc093blByb3BlcnR5Iiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJVdGlsaXRpZXMiLCJnZXRGb250Q3NzU3R5bGUiLCJjbGFzc05hbWUiLCJmb250T2JqIiwiZmFtaWx5IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZm9udCIsImNvbG9yIiwiZm9yZWNvbG9yIiwic2l6ZSIsIndlaWdodCIsImJvbGQiLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJoaWdobGlnaHQiLCJoaWdobGlnaHRDb2xvciIsImJhY2tjb2xvciIsImFkZENTU1J1bGVzIiwicnVsZXMiLCJzdHlsZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImkiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiaGVhZCIsImxvYWRGb250cyIsInNldHRpbmdzIiwiY2FsbGJhY2siLCJvbkdvb2dsZUZvbnRzTG9hZGVkIiwiZmFtaWxpZXMiLCJnb29nbGVGYW1pbGllcyIsImN1c3RvbUZhbWlsaWVzIiwiY3VzdG9tVXJscyIsImZvckVhY2giLCJpdGVtIiwiY2xhc3MiLCJmb250U3R5bGUiLCJ0eXBlIiwic3BsaXQiLCJwdXNoIiwiaiIsImxvYWRDdXN0b21Gb250IiwibG9hZEdvb2dsZUZvbnRzIiwiY29udGVudERvYyIsInNoZWV0IiwicnVsZSIsInN0eWxlU2hlZXRzIiwiYWRkUnVsZSIsIldlYkZvbnQiLCJsb2FkIiwiZ29vZ2xlIiwiYWN0aXZlIiwiaW5hY3RpdmUiLCJ0aW1lb3V0IiwicHJlbG9hZEltYWdlcyIsInVybHMiLCJpbWFnZXMiLCJJbWFnZSIsInNyYyIsImdldFF1ZXJ5UGFyYW1ldGVyIiwicGFyYW0iLCJwYWlyIiwicXVlcnkiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsInZhcnMiLCJnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiZXJyb3JNZXNzYWdlIiwidW5lc2NhcGVIVE1MIiwiaHRtbCIsImRpdiIsImlubmVySFRNTCIsInRleHRDb250ZW50IiwiaGFzSW50ZXJuZXRDb25uZWN0aW9uIiwiZmlsZVBhdGgiLCJnZXRUaW1lIiwic3RhdHVzIiwiZSIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25zdGFudCIsImNvbmZpZyIsIldlYlBhZ2UiLCJnYWRnZXRzIiwiX3JlYWR5IiwicnBjIiwiY2FsbCIsIl9wcmVmcyIsImdldFN0cmluZyIsIl92YWxpZGF0ZVVybCIsImhhbmRsZVByb3h5UmVzcG9uc2UiLCJzdWNjZXNzIiwiaGVhZGVyIiwidGFyZ2V0IiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJldmVudF9kZXRhaWxzIiwiZXJyb3JfZGV0YWlscyIsIl91cmwiLCJfbWVzc2FnZSIsInNob3ciLCJwcm94eVVybCIsInJlcXVlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiX3NldEludGVyYWN0aXZpdHkiLCJmcmFtZSIsImJsb2NrZXIiLCJxdWVyeVNlbGVjdG9yIiwiX2FkZGl0aW9uYWxQYXJhbXMiLCJpbnRlcmFjdGl2aXR5Iiwic2V0QXR0cmlidXRlIiwiaW50ZXJhY3RpdmUiLCJzY3JvbGxiYXJzIiwiX2NvbmZpZ3VyZVBhZ2UiLCJjb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsImFzcGVjdFJhdGlvIiwiZ2V0SW50IiwiX3NldFJlZ2lvbiIsIl9zZXRab29tIiwiX3ZlcnRpY2FsIiwiem9vbSIsInBhcnNlRmxvYXQiLCJjdXJyZW50U3R5bGUiLCJ6b29tU3R5bGUiLCJnZXRBdHRyaWJ1dGUiLCJtYXJnaW5TdHlsZSIsImhvcml6b250YWwiLCJyZWdpb24iLCJzaG93UmVnaW9uIiwidmVydGljYWwiLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX3V0aWxzIiwiaGFzSW50ZXJuZXQiLCJfcmVmcmVzaEZyYW1lIiwicmVmcmVzaCIsIl9nZXRGcmFtZUVsZW1lbnQiLCJ2aXNpYmlsaXR5Iiwib25sb2FkIiwidGhpcyIsInJlbW92ZUNoaWxkIiwiX2xvYWRGcmFtZSIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsIl91bmxvYWRGcmFtZSIsImNsZWFySW50ZXJ2YWwiLCJfaW5pdCIsIk1lc3NhZ2UiLCJoZWlnaHQiLCJnZXRUYWJsZU5hbWUiLCJwYXVzZSIsInBsYXkiLCJzdG9wIiwic2V0QWRkaXRpb25hbFBhcmFtcyIsImFkZGl0aW9uYWxQYXJhbXMiLCJQcmVmcyIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiY29uc29sZSIsIndhcm4iLCJtZXNzYWdlIiwiaGlkZSIsIl9hY3RpdmUiLCJmaXJzdENoaWxkIiwicCIsImNvbmZpZ3VyZSIsIm5hbWVzIiwidmFsdWVzIiwiQXJyYXkiLCJpc0FycmF5IiwiaWQiLCJvbmNvbnRleHRtZW51IiwiYm9keSIsIm9ubW91c2Vkb3duIiwicmVnaXN0ZXIiLCJfZ2FxIiwiZ2EiLCJhc3luYyIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBSUEsdUJBQ0ZDLGNBQWUsaUJBQ2ZDLGlCQUFrQiw0RUFDbEJDLHFCQUFzQiwyQkFDdEJDLHFCQUFzQixxRUFDdEJDLFlBQWEsT0FDYkMsVUFBVyw2Q0FJVEMsV0FBYUEsY0FDakJBLFlBQVdDLE9BQVNELFdBQVdDLFdBRS9CRCxXQUFXQyxPQUFPQyxZQUFjLFdBQzlCLFlBVUEsU0FBU0MsR0FBZUMsRUFBUUMsR0FDOUIsR0FBSUMsR0FBTyxJQUdQRixHQUFPRyxPQUNURCxFQUFPRixFQUVIRSxFQUFLRSxXQUNQRixF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QUFPQSxRQUVYQSxNQUFLNUksTUFBTSxjQUFlLGtCQUMxQjRJLEtBQUs1SSxNQUFNLG1CQUVYLFdBQ0UsR0FBSTZJLEdBQUtqSyxTQUFTQyxjQUFjLFNBQVdnSyxHQUFHL0ksS0FBTyxrQkFBbUIrSSxFQUFHQyxPQUFRLEVBQ25GRCxFQUFHMUgsS0FBTyxVQUFZdkMsU0FBUzZDLFNBQVNzSCxTQUFXLGNBQWdCLGNBQWdCLDZCQUNuRixJQUFJQyxHQUFJcEssU0FBU3FLLHFCQUFxQixVQUFVLEVBQUlELEdBQUVFLFdBQVdDLGFBQWFOLEVBQUlHIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBleHBvcnRlZCBXSURHRVRfQ09NTU9OX0NPTkZJRyAqL1xudmFyIFdJREdFVF9DT01NT05fQ09ORklHID0ge1xuICBBVVRIX1BBVEhfVVJMOiBcInYxL3dpZGdldC9hdXRoXCIsXG4gIExPR0dFUl9DTElFTlRfSUQ6IFwiMTA4ODUyNzE0NzEwOS02cTFvMnZ0aWhuMzQyOTJwanQ0Y2tobWhjazByazBvNy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbVwiLFxuICBMT0dHRVJfQ0xJRU5UX1NFQ1JFVDogXCJubFp5cmNQTGc2b0V3TzlmOVdmbjI5V2hcIixcbiAgTE9HR0VSX1JFRlJFU0hfVE9LRU46IFwiMS94enQ0a3d6RTFIN1c5Vm5LQjhjQWFDeDZ6YjRFczRuS0VvcWFZSGRURDE1SWdPckpEdGR1bjZ6SzZYaUFUQ0tUXCIsXG4gIFNUT1JBR0VfRU5WOiBcInByb2RcIixcbiAgU1RPUkVfVVJMOiBcImh0dHBzOi8vc3RvcmUtZG90LXJ2YXNlcnZlcjIuYXBwc3BvdC5jb20vXCJcbn07XG4vKiBnbG9iYWwgV0lER0VUX0NPTU1PTl9DT05GSUcgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMgPSAoZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gICB2YXIgZGlzcGxheUlkID0gXCJcIixcbiAgICBjb21wYW55SWQgPSBcIlwiO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgLyogUmV0cmlldmUgcGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSBldmVudCBsb2dnZXIuICovXG4gIGZ1bmN0aW9uIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgY2IpIHtcbiAgICB2YXIganNvbiA9IG51bGw7XG5cbiAgICAvLyBldmVudCBpcyByZXF1aXJlZC5cbiAgICBpZiAocGFyYW1zLmV2ZW50KSB7XG4gICAgICBqc29uID0gcGFyYW1zO1xuXG4gICAgICBpZiAoanNvbi5maWxlX3VybCkge1xuICAgICAgICBqc29uLmZpbGVfZm9ybWF0ID0gZ2V0RmlsZUZvcm1hdChqc29uLmZpbGVfdXJsKTtcbiAgICAgIH1cblxuICAgICAganNvbi5jb21wYW55X2lkID0gY29tcGFueUlkO1xuICAgICAganNvbi5kaXNwbGF5X2lkID0gZGlzcGxheUlkO1xuXG4gICAgICBjYihqc29uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjYihqc29uKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgc3VmZml4IGZvciBCUSB0YWJsZSBuYW1lLlxuICBmdW5jdGlvbiBnZXRTdWZmaXgoKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuXG4gICAgaWYgKG1vbnRoIDwgMTApIHtcbiAgICAgIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgICB9XG5cbiAgICBpZiAoZGF5IDwgMTApIHtcbiAgICAgIGRheSA9IFwiMFwiICsgZGF5O1xuICAgIH1cblxuICAgIHJldHVybiB5ZWFyICsgbW9udGggKyBkYXk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGdldEZpbGVGb3JtYXQodXJsKSB7XG4gICAgdmFyIGhhc1BhcmFtcyA9IC9bPyMmXS8sXG4gICAgICBzdHI7XG5cbiAgICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzdHIgPSB1cmwuc3Vic3RyKHVybC5sYXN0SW5kZXhPZihcIi5cIikgKyAxKTtcblxuICAgIC8vIGRvbid0IGluY2x1ZGUgYW55IHBhcmFtcyBhZnRlciB0aGUgZmlsZW5hbWVcbiAgICBpZiAoaGFzUGFyYW1zLnRlc3Qoc3RyKSkge1xuICAgICAgc3RyID0gc3RyLnN1YnN0cigwICwoc3RyLmluZGV4T2YoXCI/XCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIj9cIikgOiBzdHIubGVuZ3RoKTtcblxuICAgICAgc3RyID0gc3RyLnN1YnN0cigwLCAoc3RyLmluZGV4T2YoXCIjXCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIiNcIikgOiBzdHIubGVuZ3RoKTtcblxuICAgICAgc3RyID0gc3RyLnN1YnN0cigwLCAoc3RyLmluZGV4T2YoXCImXCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIiZcIikgOiBzdHIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbnNlcnREYXRhKHBhcmFtcykge1xuICAgIHZhciBCQVNFX0lOU0VSVF9TQ0hFTUEgPSB7XG4gICAgICBcImtpbmRcIjogXCJiaWdxdWVyeSN0YWJsZURhdGFJbnNlcnRBbGxSZXF1ZXN0XCIsXG4gICAgICBcInNraXBJbnZhbGlkUm93c1wiOiBmYWxzZSxcbiAgICAgIFwiaWdub3JlVW5rbm93blZhbHVlc1wiOiBmYWxzZSxcbiAgICAgIFwidGVtcGxhdGVTdWZmaXhcIjogZ2V0U3VmZml4KCksXG4gICAgICBcInJvd3NcIjogW3tcbiAgICAgICAgXCJpbnNlcnRJZFwiOiBcIlwiXG4gICAgICB9XVxuICAgIH0sXG4gICAgZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoQkFTRV9JTlNFUlRfU0NIRU1BKSk7XG5cbiAgICBkYXRhLnJvd3NbMF0uaW5zZXJ0SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMikudG9VcHBlckNhc2UoKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24udHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHRhYmxlLCBwYXJhbXMpIHtcbiAgICBnZXRFdmVudFBhcmFtcyhwYXJhbXMsIGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIGlmIChqc29uICE9PSBudWxsKSB7XG4gICAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlci5sb2codGFibGUsIGpzb24pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyogU2V0IHRoZSBDb21wYW55IGFuZCBEaXNwbGF5IElEcy4gKi9cbiAgZnVuY3Rpb24gc2V0SWRzKGNvbXBhbnksIGRpc3BsYXkpIHtcbiAgICBjb21wYW55SWQgPSBjb21wYW55O1xuICAgIGRpc3BsYXlJZCA9IGRpc3BsYXk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SW5zZXJ0RGF0YVwiOiBnZXRJbnNlcnREYXRhLFxuICAgIFwiZ2V0RmlsZUZvcm1hdFwiOiBnZXRGaWxlRm9ybWF0LFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJzZXRJZHNcIjogc2V0SWRzXG4gIH07XG59KSgpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcblxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHRhYmxlTmFtZSk7XG4gICAgICByZWZyZXNoRGF0ZSA9IHJlZnJlc2hEYXRhLnJlZnJlc2hlZEF0IHx8IHJlZnJlc2hEYXRlO1xuICAgICAgdG9rZW4gPSByZWZyZXNoRGF0YS50b2tlbiB8fCB0b2tlbjtcbiAgICAgIGluc2VydERhdGEgPSB1dGlscy5nZXRJbnNlcnREYXRhKHBhcmFtcyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgZGF0YS5cbiAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmVhcmVyIFwiICsgdG9rZW4pO1xuXG4gICAgICBpZiAocGFyYW1zLmNiICYmIHR5cGVvZiBwYXJhbXMuY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcGFyYW1zLmNiKHhoci5yZXNwb25zZSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGluc2VydERhdGEpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVmcmVzaFRva2VuKGluc2VydFdpdGhUb2tlbik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwibG9nXCI6IGxvZ1xuICB9O1xufSkoUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMpO1xuLyogZ2xvYmFsIFdlYkZvbnQgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gZ2V0Rm9udENzc1N0eWxlKGNsYXNzTmFtZSwgZm9udE9iaikge1xuICAgIHZhciBmYW1pbHkgPSBcImZvbnQtZmFtaWx5OiBcIiArIGRlY29kZVVSSUNvbXBvbmVudChmb250T2JqLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpICsgXCI7IFwiO1xuICAgIHZhciBjb2xvciA9IFwiY29sb3I6IFwiICsgKGZvbnRPYmouY29sb3IgPyBmb250T2JqLmNvbG9yIDogZm9udE9iai5mb3JlY29sb3IpICsgXCI7IFwiO1xuICAgIHZhciBzaXplID0gXCJmb250LXNpemU6IFwiICsgKGZvbnRPYmouc2l6ZS5pbmRleE9mKFwicHhcIikgPT09IC0xID8gZm9udE9iai5zaXplICsgXCJweDsgXCIgOiBmb250T2JqLnNpemUgKyBcIjsgXCIpO1xuICAgIHZhciB3ZWlnaHQgPSBcImZvbnQtd2VpZ2h0OiBcIiArIChmb250T2JqLmJvbGQgPyBcImJvbGRcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciBpdGFsaWMgPSBcImZvbnQtc3R5bGU6IFwiICsgKGZvbnRPYmouaXRhbGljID8gXCJpdGFsaWNcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciB1bmRlcmxpbmUgPSBcInRleHQtZGVjb3JhdGlvbjogXCIgKyAoZm9udE9iai51bmRlcmxpbmUgPyBcInVuZGVybGluZVwiIDogXCJub25lXCIpICsgXCI7IFwiO1xuICAgIHZhciBoaWdobGlnaHQgPSBcImJhY2tncm91bmQtY29sb3I6IFwiICsgKGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgPyBmb250T2JqLmhpZ2hsaWdodENvbG9yIDogZm9udE9iai5iYWNrY29sb3IpICsgXCI7XCI7XG5cbiAgICByZXR1cm4gXCIuXCIgKyBjbGFzc05hbWUgKyBcIiB7XCIgKyBmYW1pbHkgKyBjb2xvciArIHNpemUgKyB3ZWlnaHQgKyBpdGFsaWMgKyB1bmRlcmxpbmUgKyBoaWdobGlnaHQgKyBcIn1cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENTU1J1bGVzKHJ1bGVzKSB7XG4gICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlc1tpXSkpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgLypcbiAgICogTG9hZHMgR29vZ2xlIG9yIGN1c3RvbSBmb250cywgaWYgYXBwbGljYWJsZSwgYW5kIGluamVjdHMgQ1NTIHN0eWxlc1xuICAgKiBpbnRvIHRoZSBoZWFkIG9mIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtICAgIGFycmF5ICAgIHNldHRpbmdzICAgIEFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgZm9sbG93aW5nIGZvcm06XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJkYXRlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvbnRTZXR0aW5nXCI6IHtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5OiBcIkFrcm9uaW1cIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJWZXJkYW5hXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdvb2dsZVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9jdXN0b20tZm9udC11cmxcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwiMjBcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICpcbiAgICogICAgICAgICAgIG9iamVjdCAgIGNvbnRlbnREb2MgICAgRG9jdW1lbnQgb2JqZWN0IGludG8gd2hpY2ggdG8gaW5qZWN0IHN0eWxlc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbG9hZCBmb250cyAob3B0aW9uYWwpLlxuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEZvbnRzKHNldHRpbmdzLCBjYikge1xuICAgIHZhciBmYW1pbGllcyA9IG51bGwsXG4gICAgICBnb29nbGVGYW1pbGllcyA9IFtdLFxuICAgICAgY3VzdG9tRmFtaWxpZXMgPSBbXSxcbiAgICAgIGN1c3RvbVVybHMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Hb29nbGVGb250c0xvYWRlZCgpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgaWYgKCFzZXR0aW5ncyB8fCBzZXR0aW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGN1c3RvbSBjc3MgY2xhc3MgbmFtZXMgYW5kIGFkZCBydWxlcyBpZiBzb1xuICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKGl0ZW0uY2xhc3MgJiYgaXRlbS5mb250U3R5bGUpIHtcbiAgICAgICAgYWRkQ1NTUnVsZXMoWyBnZXRGb250Q3NzU3R5bGUoaXRlbS5jbGFzcywgaXRlbS5mb250U3R5bGUpIF0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gR29vZ2xlIGZvbnRzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImdvb2dsZVwiKSkge1xuICAgICAgICAvLyBSZW1vdmUgZmFsbGJhY2sgZm9udC5cbiAgICAgICAgZmFtaWxpZXMgPSBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC5mYW1pbHkuc3BsaXQoXCIsXCIpWzBdO1xuXG4gICAgICAgIC8vIHN0cmlwIHBvc3NpYmxlIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgZmFtaWxpZXMgPSBmYW1pbGllcy5yZXBsYWNlKC8nL2csIFwiXCIpO1xuXG4gICAgICAgIGdvb2dsZUZhbWlsaWVzLnB1c2goZmFtaWxpZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEN1c3RvbSBmb250c1xuICAgIGZvciAoaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImN1c3RvbVwiKSkge1xuICAgICAgICAvLyBkZWNvZGUgdmFsdWUgYW5kIHN0cmlwIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgY3VzdG9tRmFtaWxpZXMucHVzaChkZWNvZGVVUklDb21wb25lbnQoc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpKTtcbiAgICAgICAgLy8gc3RyaXAgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBjdXN0b21VcmxzLnB1c2goc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQudXJsLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdvb2dsZUZhbWlsaWVzLmxlbmd0aCA9PT0gMCAmJiBjdXN0b21GYW1pbGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgZm9udHNcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3VzdG9tRmFtaWxpZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgbG9hZEN1c3RvbUZvbnQoY3VzdG9tRmFtaWxpZXNbal0sIGN1c3RvbVVybHNbal0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29vZ2xlRmFtaWxpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBsb2FkR29vZ2xlRm9udHMoZ29vZ2xlRmFtaWxpZXMsIG9uR29vZ2xlRm9udHNMb2FkZWQpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEN1c3RvbUZvbnQoZmFtaWx5LCB1cmwsIGNvbnRlbnREb2MpIHtcbiAgICB2YXIgc2hlZXQgPSBudWxsO1xuICAgIHZhciBydWxlID0gXCJmb250LWZhbWlseTogXCIgKyBmYW1pbHkgKyBcIjsgXCIgKyBcInNyYzogdXJsKCdcIiArIHVybCArIFwiJyk7XCI7XG5cbiAgICBjb250ZW50RG9jID0gY29udGVudERvYyB8fCBkb2N1bWVudDtcblxuICAgIHNoZWV0ID0gY29udGVudERvYy5zdHlsZVNoZWV0c1swXTtcblxuICAgIGlmIChzaGVldCAhPT0gbnVsbCkge1xuICAgICAgc2hlZXQuYWRkUnVsZShcIkBmb250LWZhY2VcIiwgcnVsZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEdvb2dsZUZvbnRzKGZhbWlsaWVzLCBjYikge1xuICAgIFdlYkZvbnQubG9hZCh7XG4gICAgICBnb29nbGU6IHtcbiAgICAgICAgZmFtaWxpZXM6IGZhbWlsaWVzXG4gICAgICB9LFxuICAgICAgYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRpbWVvdXQ6IDIwMDBcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZWxvYWRJbWFnZXModXJscykge1xuICAgIHZhciBsZW5ndGggPSB1cmxzLmxlbmd0aCxcbiAgICAgIGltYWdlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaW1hZ2VzW2ldID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZXNbaV0uc3JjID0gdXJsc1tpXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRRdWVyeVBhcmFtZXRlcihwYXJhbSkge1xuICAgIHZhciBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLFxuICAgICAgdmFycyA9IHF1ZXJ5LnNwbGl0KFwiJlwiKSxcbiAgICAgIHBhaXI7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgaWYgKHBhaXJbMF0gPT0gcGFyYW0pIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2Uoc3RhdHVzQ29kZSkge1xuICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgY2FzZSA0MDQ6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGZpbGUgZG9lcyBub3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTA3OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZXJlIGlzIG5vdCBlbm91Z2ggZGlzayBzcGFjZSB0byBzYXZlIHRoZSBmaWxlIG9uIFJpc2UgQ2FjaGUuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiO1xuICAgIH1cblxuICAgIHJldHVybiBlcnJvck1lc3NhZ2U7XG4gIH1cblxuICBmdW5jdGlvbiB1bmVzY2FwZUhUTUwoaHRtbCkge1xuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICByZXR1cm4gZGl2LnRleHRDb250ZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzSW50ZXJuZXRDb25uZWN0aW9uKGZpbGVQYXRoLCBjYWxsYmFjaykge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghZmlsZVBhdGggfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJIRUFEXCIsIGZpbGVQYXRoICsgXCI/Y2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgZmFsc2UpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGNhbGxiYWNrKCh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzA0KSk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjYWxsYmFjayhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRRdWVyeVBhcmFtZXRlcjogZ2V0UXVlcnlQYXJhbWV0ZXIsXG4gICAgZ2V0Rm9udENzc1N0eWxlOiAgZ2V0Rm9udENzc1N0eWxlLFxuICAgIGFkZENTU1J1bGVzOiAgICAgIGFkZENTU1J1bGVzLFxuICAgIGxvYWRGb250czogICAgICAgIGxvYWRGb250cyxcbiAgICBsb2FkQ3VzdG9tRm9udDogICBsb2FkQ3VzdG9tRm9udCxcbiAgICBsb2FkR29vZ2xlRm9udHM6ICAgbG9hZEdvb2dsZUZvbnRzLFxuICAgIHByZWxvYWRJbWFnZXM6ICAgIHByZWxvYWRJbWFnZXMsXG4gICAgZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlOiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2UsXG4gICAgdW5lc2NhcGVIVE1MOiB1bmVzY2FwZUhUTUwsXG4gICAgaGFzSW50ZXJuZXRDb25uZWN0aW9uOiBoYXNJbnRlcm5ldENvbm5lY3Rpb25cbiAgfTtcbn0pKCk7XG5cbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xuaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJsb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfU1VGSVhcIiwgXCIuanNvblwiKTtcbn1cblxudmFyIGNvbmZpZyA9IHtcbiAgU1RPUkFHRV9FTlY6IFwicHJvZFwiXG59O1xuXG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLldlYlBhZ2UgPSB7fTtcblxuUmlzZVZpc2lvbi5XZWJQYWdlID0gKGZ1bmN0aW9uIChkb2N1bWVudCwgZ2FkZ2V0cykge1xuXG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIHByaXZhdGUgdmFyaWFibGVzXG4gIHZhciBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLFxuICAgIF91dGlscyA9IFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcyxcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IG51bGwsXG4gICAgX3VybCA9IFwiXCIsXG4gICAgX3ZlcnRpY2FsID0gMCxcbiAgICBfaW50ZXJ2YWxJZCA9IG51bGw7XG5cbiAgdmFyIF9tZXNzYWdlID0gbnVsbDtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3ZhbGlkYXRlVXJsKGNiKSB7XG4gICAgdmFyIHByb3h5VXJsID0gXCJodHRwczovL3Byb3h5LnJpc2V2aXNpb24uY29tL1wiICsgX3VybCxcbiAgICAgIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZVByb3h5UmVzcG9uc2UoZSkge1xuICAgICAgdmFyIHN1Y2Nlc3MgPSB0cnVlLFxuICAgICAgICBoZWFkZXIgPSBlLnRhcmdldC5nZXRSZXNwb25zZUhlYWRlcihcIlgtRnJhbWUtT3B0aW9uc1wiKTtcblxuICAgICAgaWYgKGhlYWRlciAmJiAoaGVhZGVyLnRvVXBwZXJDYXNlKCkgPT09IFwiU0FNRU9SSUdJTlwiKSkge1xuICAgICAgICBsb2dFdmVudCh7XG4gICAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwiWC1GcmFtZS1PcHRpb25zIGhlYWRlclwiLFxuICAgICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBcIlNBTUVPUklHSU5cIixcbiAgICAgICAgICBcInVybFwiOiBfdXJsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIF9tZXNzYWdlLnNob3coXCJUaGUgb3duZXIgb2YgdGhlIFdlYiBQYWdlIGF0IHRoZSBVUkwgcHJvdmlkZWQgZG9lcyBub3QgYWxsb3cgdGhlIFBhZ2UgdG8gXCIgK1xuICAgICAgICAgIFwiYmUgZW1iZWRkZWQgd2l0aGluIGFuIGlGcmFtZS4gSWYgcG9zc2libGUsIHBsZWFzZSBjb250YWN0IHRoZSBXZWIgUGFnZSBvd25lciB0byBcIiArXG4gICAgICAgICAgXCJkaXNjdXNzIFgtRnJhbWUtT3B0aW9ucy5cIik7XG5cbiAgICAgICAgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2IgJiYgKHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgICAgICBjYihzdWNjZXNzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGhhbmRsZVByb3h5UmVzcG9uc2UpO1xuICAgIHJlcXVlc3Qub3BlbihcIkdFVFwiLCBwcm94eVVybCk7XG4gICAgcmVxdWVzdC5zZW5kKCk7XG4gIH1cblxuICBmdW5jdGlvbiBfc2V0SW50ZXJhY3Rpdml0eShmcmFtZSkge1xuICAgIHZhciBibG9ja2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ibG9ja2VyXCIpO1xuXG4gICAgYmxvY2tlci5zdHlsZS5kaXNwbGF5ID0gKF9hZGRpdGlvbmFsUGFyYW1zLmludGVyYWN0aXZpdHkuaW50ZXJhY3RpdmUpID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG5cbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIixcbiAgICAgIChfYWRkaXRpb25hbFBhcmFtcy5pbnRlcmFjdGl2aXR5LmludGVyYWN0aXZlICYmIF9hZGRpdGlvbmFsUGFyYW1zLmludGVyYWN0aXZpdHkuc2Nyb2xsYmFycykgPyBcInllc1wiIDogXCJub1wiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jb25maWd1cmVQYWdlKCkge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSxcbiAgICAgIGZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWJwYWdlLWZyYW1lXCIpLFxuICAgICAgYXNwZWN0UmF0aW8gPSAgKF9wcmVmcy5nZXRJbnQoXCJyc0hcIikgLyBfcHJlZnMuZ2V0SW50KFwicnNXXCIpKSAqIDEwMDtcblxuICAgIGlmIChjb250YWluZXIgJiYgZnJhbWUpIHtcbiAgICAgIF9zZXRJbnRlcmFjdGl2aXR5KGZyYW1lKTtcbiAgICAgIF9zZXRSZWdpb24oZnJhbWUpO1xuICAgICAgX3NldFpvb20oZnJhbWUpO1xuXG4gICAgICAvLyBpbXBsZW1lbnQgcmVzcG9uc2l2ZSBpZnJhbWVcbiAgICAgIGlmIChfdmVydGljYWwgIT09IDApIHtcbiAgICAgICAgYXNwZWN0UmF0aW8gKz0gKF92ZXJ0aWNhbCAvIF9wcmVmcy5nZXRJbnQoXCJyc1dcIikpICogMTAwO1xuICAgICAgfVxuXG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJwYWRkaW5nLWJvdHRvbTpcIiArIGFzcGVjdFJhdGlvICsgXCIlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9zZXRab29tKGZyYW1lKSB7XG4gICB2YXIgem9vbSA9IHBhcnNlRmxvYXQoX2FkZGl0aW9uYWxQYXJhbXMuem9vbSksXG4gICAgY3VycmVudFN0eWxlID0gXCJcIixcbiAgICAgem9vbVN0eWxlID0gXCJcIjtcblxuICAgIC8vIENvbmZpZ3VyZSB0aGUgem9vbSAoc2NhbGUpIHN0eWxpbmdcbiAgICB6b29tU3R5bGUgPSBcIi1tcy16b29tOlwiICsgem9vbSArIFwiO1wiICtcbiAgICAgIFwiLW1vei10cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICBcIi1tb3otdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcbiAgICAgIFwiLW8tdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgXCItby10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCIgK1xuICAgICAgXCItd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCIgK1xuICAgICAgXCJ0cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICBcInRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIjtcblxuICAgIGN1cnJlbnRTdHlsZSA9IGZyYW1lLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgIHpvb21TdHlsZSArPSBcIndpZHRoOiBcIiArICgoMSAvIHpvb20pICogMTAwKSArIFwiJTtcIiArXG4gICAgICBcImhlaWdodDogXCIgKyAoKDEgLyB6b29tKSAqIDEwMCkgKyBcIiU7XCI7XG5cbiAgICBpZiAoY3VycmVudFN0eWxlKSB7XG4gICAgICB6b29tU3R5bGUgPSBjdXJyZW50U3R5bGUgKyB6b29tU3R5bGU7XG4gICAgfVxuXG4gICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgem9vbVN0eWxlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zZXRSZWdpb24oZnJhbWUpIHtcbiAgICB2YXIgY3VycmVudFN0eWxlID0gXCJcIixcbiAgICAgIG1hcmdpblN0eWxlID0gXCJcIixcbiAgICAgIGhvcml6b250YWwgPSAwO1xuXG4gICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbiAmJiBfYWRkaXRpb25hbFBhcmFtcy5yZWdpb24uc2hvd1JlZ2lvbiAmJlxuICAgICAgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbi5zaG93UmVnaW9uID09PSBcInJlZ2lvblwiKSkge1xuICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbi5ob3Jpem9udGFsID4gMCkge1xuICAgICAgICBob3Jpem9udGFsID0gX2FkZGl0aW9uYWxQYXJhbXMucmVnaW9uLmhvcml6b250YWw7XG4gICAgICB9XG5cbiAgICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy5yZWdpb24udmVydGljYWwgPiAwKSB7XG4gICAgICAgIF92ZXJ0aWNhbCA9IF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbi52ZXJ0aWNhbDtcbiAgICAgIH1cblxuICAgICAgLy8gQXBwbHkgbmVnYXRpdmUgbWFyZ2lucyBpbiBvcmRlciB0byBzaG93IGEgcmVnaW9uLlxuICAgICAgaWYgKChob3Jpem9udGFsICE9PSAwKSB8fCAoX3ZlcnRpY2FsICE9PSAwKSkge1xuICAgICAgICBjdXJyZW50U3R5bGUgPSBmcmFtZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgbWFyZ2luU3R5bGUgPSBcIm1hcmdpbjogXCIgKyBcIi1cIiArIF92ZXJ0aWNhbCArIFwicHggMCAwIC1cIiArIGhvcml6b250YWwgKyBcInB4O1wiO1xuXG4gICAgICAgIGlmIChjdXJyZW50U3R5bGUpIHtcbiAgICAgICAgICBtYXJnaW5TdHlsZSA9IGN1cnJlbnRTdHlsZSArIG1hcmdpblN0eWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgbWFyZ2luU3R5bGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpIHtcbiAgICBfaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgIF91dGlscy5oYXNJbnRlcm5ldENvbm5lY3Rpb24oXCJpbWcvdHJhbnNwYXJlbnQucG5nXCIsIGZ1bmN0aW9uIChoYXNJbnRlcm5ldCkge1xuICAgICAgICBpZiAoaGFzSW50ZXJuZXQpIHtcbiAgICAgICAgICBfcmVmcmVzaEZyYW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2gpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEZyYW1lRWxlbWVudCgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIiksXG4gICAgICBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG5cbiAgICBmcmFtZS5jbGFzc05hbWUgPSBcIndlYnBhZ2UtZnJhbWVcIjtcbiAgICBmcmFtZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJmcmFtZWJvcmRlclwiLCBcIjBcIik7XG4gICAgZnJhbWUuc2V0QXR0cmlidXRlKFwiYWxsb3dUcmFuc3BhcmVuY3lcIiwgXCJ0cnVlXCIpO1xuXG4gICAgX3NldEludGVyYWN0aXZpdHkoZnJhbWUpO1xuICAgIF9zZXRSZWdpb24oZnJhbWUpO1xuICAgIF9zZXRab29tKGZyYW1lKTtcblxuICAgIGZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMub25sb2FkID0gbnVsbDtcbiAgICAgIHRoaXMuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICAvLyBSZW1vdmUgb2xkIGlmcmFtZS5cbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndlYnBhZ2UtZnJhbWVcIikpO1xuICAgIH07XG5cbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgX3VybCk7XG5cbiAgICByZXR1cm4gZnJhbWU7XG4gIH1cblxuICBmdW5jdGlvbiBfbG9hZEZyYW1lKCkge1xuICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2VicGFnZS1mcmFtZVwiKTtcblxuICAgIGZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMub25sb2FkID0gbnVsbDtcblxuICAgICAgLy8gY2hlY2sgaWYgcmVmcmVzaCBpbnRlcnZhbCBzaG91bGQgYmUgc3RhcnRlZFxuICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2ggPiAwICYmIF9pbnRlcnZhbElkID09PSBudWxsKSB7XG4gICAgICAgIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgX3VybCk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVmcmVzaEZyYW1lKCkge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgZnJhbWUgPSBfZ2V0RnJhbWVFbGVtZW50KCk7XG5cbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF91bmxvYWRGcmFtZSgpIHtcbiAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndlYnBhZ2UtZnJhbWVcIik7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDApIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoX2ludGVydmFsSWQpO1xuICAgIH1cblxuICAgIGlmIChmcmFtZSkge1xuICAgICAgZnJhbWUuc3JjID0gXCJhYm91dDpibGFua1wiO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgX21lc3NhZ2UgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSxcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZUNvbnRhaW5lclwiKSk7XG5cbiAgICAvLyBhcHBseSBoZWlnaHQgdmFsdWUgdG8gbWVzc2FnZSBjb250YWluZXIgc28gYSBtZXNzYWdlIGdldHMgdmVydGljYWxseSBjZW50ZXJlZFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZUNvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuXG4gICAgLy8gQ29uZmlndXJlIHRoZSB2YWx1ZSBmb3IgX3VybFxuICAgIF91cmwgPSBfYWRkaXRpb25hbFBhcmFtcy51cmw7XG5cbiAgICAvLyBBZGQgaHR0cDovLyBpZiBubyBwcm90b2NvbCBwYXJhbWV0ZXIgZXhpc3RzXG4gICAgaWYgKF91cmwuaW5kZXhPZihcIjovL1wiKSA9PT0gLTEpIHtcbiAgICAgIF91cmwgPSBcImh0dHA6Ly9cIiArIF91cmw7XG4gICAgfVxuXG4gICAgX3ZhbGlkYXRlVXJsKGZ1bmN0aW9uKHN1Y2Nlc3MpIHtcbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIF9jb25maWd1cmVQYWdlKCk7XG4gICAgICB9XG5cbiAgICAgIF9yZWFkeSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXRUYWJsZU5hbWUoKSB7XG4gICAgcmV0dXJuIFwid2VicGFnZV9ldmVudHNcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHBhcmFtcykge1xuICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLmxvZ0V2ZW50KGdldFRhYmxlTmFtZSgpLCBwYXJhbXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgX3VubG9hZEZyYW1lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIF9sb2FkRnJhbWUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMoYWRkaXRpb25hbFBhcmFtcykge1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhZGRpdGlvbmFsUGFyYW1zKSk7XG5cbiAgICBfaW5pdCgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImdldFRhYmxlTmFtZVwiOiBnZXRUYWJsZU5hbWUsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcInNldEFkZGl0aW9uYWxQYXJhbXNcIjogc2V0QWRkaXRpb25hbFBhcmFtcyxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic3RvcFwiOiBzdG9wXG4gIH07XG5cbn0pKGRvY3VtZW50LCBnYWRnZXRzKTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZSA9IGZ1bmN0aW9uIChtYWluQ29udGFpbmVyLCBtZXNzYWdlQ29udGFpbmVyKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWN0aXZlID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbWFpbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3QgaW5pdGlhbGl6ZSBNZXNzYWdlIC0gXCIsIGUubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoaWRlKCkge1xuICAgIGlmIChfYWN0aXZlKSB7XG4gICAgICAvLyBjbGVhciBjb250ZW50IG9mIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICB3aGlsZSAobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIucmVtb3ZlQ2hpbGQobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgLy8gaGlkZSBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIC8vIHNob3cgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICBfYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhtZXNzYWdlKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgcDtcblxuICAgIGlmICghX2FjdGl2ZSkge1xuICAgICAgLy8gaGlkZSBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgICAvLyBjcmVhdGUgbWVzc2FnZSBlbGVtZW50XG4gICAgICBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICBwLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWVzc2FnZVwiKTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocCk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgX2FjdGl2ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1lc3NhZ2UgYWxyZWFkeSBiZWluZyBzaG93biwgdXBkYXRlIG1lc3NhZ2UgdGV4dFxuICAgICAgcCA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tZXNzYWdlXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBcImhpZGVcIjogaGlkZSxcbiAgICBcInNob3dcIjogc2hvd1xuICB9O1xufTtcblxuLyogZ2xvYmFsIFJpc2VWaXNpb24sIGdhZGdldHMgKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBpZCA9IG5ldyBnYWRnZXRzLlByZWZzKCkuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBkb2N1bWVudC5ib2R5Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZShuYW1lcywgdmFsdWVzKSB7XG4gICAgdmFyIGFkZGl0aW9uYWxQYXJhbXMsXG4gICAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgICAgZGlzcGxheUlkID0gXCJcIjtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gY29tcGFueSBpZFxuICAgICAgaWYgKG5hbWVzWzBdID09PSBcImNvbXBhbnlJZFwiKSB7XG4gICAgICAgIGNvbXBhbnlJZCA9IHZhbHVlc1swXTtcbiAgICAgIH1cblxuICAgICAgLy8gZGlzcGxheSBpZFxuICAgICAgaWYgKG5hbWVzWzFdID09PSBcImRpc3BsYXlJZFwiKSB7XG4gICAgICAgIGlmICh2YWx1ZXNbMV0pIHtcbiAgICAgICAgICBkaXNwbGF5SWQgPSB2YWx1ZXNbMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGlzcGxheUlkID0gXCJwcmV2aWV3XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcHJvdmlkZSBMb2dnZXJVdGlscyB0aGUgaWRzIHRvIHVzZVxuICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMuc2V0SWRzKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcblxuICAgICAgLy8gYWRkaXRpb25hbCBwYXJhbXNcbiAgICAgIGlmIChuYW1lc1syXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzJdKTtcblxuICAgICAgICBSaXNlVmlzaW9uLldlYlBhZ2Uuc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uV2ViUGFnZS5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnN0b3AoKTtcbiAgfVxuXG4gIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBjb25maWd1cmUpO1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiY29tcGFueUlkXCIsIFwiZGlzcGxheUlkXCIsIFwiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gIH1cblxufSkod2luZG93LCBkb2N1bWVudCwgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTYnXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
