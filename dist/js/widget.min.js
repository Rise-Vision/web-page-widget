var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,t){var o=null;e.event?(o=e,o.file_url&&(o.file_format=n(o.file_url)),o.company_id=l,o.display_id=a,c&&(o.version=c),t(o)):t(o)}function t(){var e=new Date,t=e.getUTCFullYear(),n=e.getUTCMonth()+1,o=e.getUTCDate();return 10>n&&(n="0"+n),10>o&&(o="0"+o),""+t+n+o}function n(e){var t,n=/[?#&]/;return e&&"string"==typeof e?(t=e.substr(e.lastIndexOf(".")+1),n.test(t)&&(t=t.substr(0,-1!==t.indexOf("?")?t.indexOf("?"):t.length),t=t.substr(0,-1!==t.indexOf("#")?t.indexOf("#"):t.length),t=t.substr(0,-1!==t.indexOf("&")?t.indexOf("&"):t.length)),t.toLowerCase()):null}function o(e){var n={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:t(),rows:[{insertId:""}]},o=JSON.parse(JSON.stringify(n));return o.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),o.rows[0].json=JSON.parse(JSON.stringify(e)),o.rows[0].json.ts=(new Date).toISOString(),o}function i(t,n){e(n,function(e){null!==e&&RiseVision.Common.Logger.log(t,e)})}function r(e,t){l=e,a=t}function s(e){c=e}var a="",l="",c=null;return{getInsertData:o,getFileFormat:n,logEvent:i,setIds:r,setVersion:s}}(),RiseVision.Common.Logger=function(e){"use strict";function t(e){var t=new XMLHttpRequest;return new Date-c<358e4?e({}):(t.open("POST",i,!0),t.onloadend=function(){var n=JSON.parse(t.response);e({token:n.access_token,refreshedAt:new Date})},t.send(),void 0)}function n(e){return s&&l===e}function o(o,i){function f(t){var n,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",o),c=t.refreshedAt||c,u=t.token||u,n=e.getInsertData(i),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),i.cb&&"function"==typeof i.cb&&(a.onloadend=function(){i.cb(a.response)}),a.send(JSON.stringify(n))}if(!(!o||!i||i.hasOwnProperty("event")&&!i.event||i.hasOwnProperty("event")&&n(i.event)))return s=!0,l=i.event,setTimeout(function(){s=!1},a),t(f)}var i="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",c=0,u="";return{log:o}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,t){var n="font-family: "+decodeURIComponent(t.font.family).replace(/'/g,"")+"; ",o="color: "+(t.color?t.color:t.forecolor)+"; ",i="font-size: "+(-1===t.size.indexOf("px")?t.size+"px; ":t.size+"; "),r="font-weight: "+(t.bold?"bold":"normal")+"; ",s="font-style: "+(t.italic?"italic":"normal")+"; ",a="text-decoration: "+(t.underline?"underline":"none")+"; ",l="background-color: "+(t.highlightColor?t.highlightColor:t.backcolor)+";";return"."+e+" {"+n+o+i+r+s+a+l+"}"}function t(e){for(var t=document.createElement("style"),n=0,o=e.length;o>n;n++)t.appendChild(document.createTextNode(e[n]));document.head.appendChild(t)}function n(n,r){function s(){r&&"function"==typeof r&&r()}function a(){s()}var l=null,c=[],u=[],f=[];if(!n||0===n.length)return s(),void 0;n.forEach(function(n){n.class&&n.fontStyle&&t([e(n.class,n.fontStyle)])});for(var g=0;g<n.length;g++)n[g].fontStyle&&n[g].fontStyle.font.type&&"google"===n[g].fontStyle.font.type&&(l=n[g].fontStyle.font.family.split(",")[0],l=l.replace(/'/g,""),c.push(l));for(g=0;g<n.length;g++)n[g].fontStyle&&n[g].fontStyle.font.type&&"custom"===n[g].fontStyle.font.type&&(u.push(decodeURIComponent(n[g].fontStyle.font.family).replace(/'/g,"")),f.push(n[g].fontStyle.font.url.replace(/'/g,"\\'")));if(0===c.length&&0===u.length)s();else{for(var d=0;d<u.length;d+=1)o(u[d],f[d]);c.length>0?i(c,a):s()}}function o(e,t,n){var o=null,i="font-family: "+e+"; src: url('"+t+"');";n=n||document,o=n.styleSheets[0],null!==o&&o.addRule("@font-face",i)}function i(e,t){WebFont.load({google:{families:e},active:function(){t&&"function"==typeof t&&t()},inactive:function(){t&&"function"==typeof t&&t()},timeout:2e3})}function r(e){for(var t=e.length,n=[],o=0;t>o;o++)n[o]=new Image,n[o].src=e[o]}function s(e){for(var t,n=window.location.search.substring(1),o=n.split("&"),i=0;i<o.length;i++)if(t=o[i].split("="),t[0]==e)return decodeURIComponent(t[1]);return""}function a(e){var t="";switch(e){case 404:t="The file does not exist or cannot be accessed.";break;case 507:t="There is not enough disk space to save the file on Rise Cache.";break;default:t="There was a problem retrieving the file from Rise Cache."}return t}function l(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent}function c(e,t){var n=new XMLHttpRequest;if(e&&t&&"function"==typeof t){n.open("HEAD",e+"?cb="+(new Date).getTime(),!1);try{n.send(),t(n.status>=200&&n.status<304)}catch(o){t(!1)}}}function u(){var e=25,t=navigator.userAgent.match(/Chrome\/(\S+)/),n=t?t[1]:0;return n&&(n=parseInt(n.substring(0,n.indexOf("."))),e>=n)?!0:!1}function f(e,t){return/^(?:f|ht)tps?\:\/\//.test(e)||(e=(t?"https://":"http://")+e),e}return{addProtocol:f,getQueryParameter:s,getFontCssStyle:e,addCSSRules:t,loadFonts:n,loadCustomFont:o,loadGoogleFonts:i,preloadImages:r,getRiseCacheErrorMessage:a,unescapeHTML:l,hasInternetConnection:c,isLegacy:u}}(),"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){t.rpc.call("","rsevent_ready",null,v.getString("id"),!0,!0,!0,!0,!1)}function o(t){var n=e.querySelector(".blocker");n.style.display=R.interactivity.interactive?"none":"block",t.setAttribute("scrolling",R.interactivity.interactive&&R.interactivity.scrollbars?"yes":"no")}function i(){var t=e.getElementById("container"),n=v.getInt("rsH")/v.getInt("rsW")*100;t&&(0!==w&&(n+=w/v.getInt("rsW")*100),t.setAttribute("style","padding-bottom:"+n+"%"))}function r(e){var t=parseFloat(R.zoom),n="",o="";o="-ms-zoom:"+t+";-moz-transform: scale("+t+");-moz-transform-origin: 0 0;-o-transform: scale("+t+");-o-transform-origin: 0 0;-webkit-transform: scale("+t+");-webkit-transform-origin: 0 0;transform: scale("+t+");transform-origin: 0 0;",n=e.getAttribute("style"),o+="width: "+(1/t*100+I)+"%;height: "+1/t*100+"%;",n&&(o=n+o),e.setAttribute("style",o)}function s(e){var t="",n="",o=0;R.region&&R.region.showRegion&&"region"===R.region.showRegion&&(R.region.horizontal>0&&(o=R.region.horizontal),R.region.vertical>0&&(w=R.region.vertical),(0!==o||0!==w)&&(I=100*o/v.getInt("rsW"),t=e.getAttribute("style"),n="margin: -"+w+"px 0 0 -"+o+"px;",t&&(n=t+n),e.setAttribute("style",n)))}function a(){_=setInterval(function(){C.hasInternetConnection("img/transparent.png",function(e){e&&c()})},R.refresh)}function l(){var t=e.createElement("iframe"),n=e.getElementById("container");return t.className="webpage-frame",t.style.visibility="hidden",t.setAttribute("frameborder","0"),t.setAttribute("allowTransparency","true"),t.setAttribute("sandbox","allow-forms allow-same-origin allow-scripts"),o(t),s(t),r(t),i(),t.onload=function(){this.onload=null,this.style.visibility="visible",E=!1,R.refresh>0&&null===_&&a(),e.querySelectorAll(".webpage-frame").length>1&&n.removeChild(e.querySelector(".webpage-frame"))},t}function c(){var t=e.getElementById("container"),n=e.createDocumentFragment(),o=l();o.setAttribute("src",b),n.appendChild(o),t.appendChild(n)}function u(){var t=e.getElementById("container"),n=e.querySelector(".webpage-frame");R.refresh>0&&(clearInterval(_),_=null),n&&t.removeChild(n)}function f(){O=new RiseVision.Common.Message(e.getElementById("container"),e.getElementById("messageContainer")),e.getElementById("messageContainer").style.height=v.getInt("rsH")+"px",b=R.url,-1===b.indexOf("://")&&(b="http://"+b),n()}function g(){return"webpage_events"}function d(e){RiseVision.Common.LoggerUtils.logEvent(g(),e)}function m(){R.unload&&u()}function p(){d({event:"play",url:b}),(E||R.unload)&&c()}function h(){m()}function y(e){R=JSON.parse(JSON.stringify(e)),f()}var v=new t.Prefs,C=RiseVision.Common.Utilities,R=null,b="",w=0,_=null,E=!0,I=0,O=null;return{getTableName:g,logEvent:d,setAdditionalParams:y,pause:m,play:p,stop:h}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function n(){try{t.style.height=e.style.height}catch(n){console.warn("Can't initialize Message - ",n.message)}}function o(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.display="block",r=!1}}function i(n){var o,i=document.createDocumentFragment();r?(o=t.querySelector(".message"),o.innerHTML=n):(e.style.display="none",t.style.display="block",o=document.createElement("p"),o.innerHTML=n,o.setAttribute("class","message"),i.appendChild(o),t.appendChild(i),r=!0)}var r=!1;return n(),{hide:o,show:i}},function(e,t,n){"use strict";function o(e,t){var n,o="",i="";Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(o=t[0]),"displayId"===e[1]&&(i=t[1]?t[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,i),"additionalParams"===e[2]&&(n=JSON.parse(t[2]),RiseVision.WebPage.setAdditionalParams(n)))}function i(){RiseVision.WebPage.play()}function r(){RiseVision.WebPage.pause()}function s(){RiseVision.WebPage.stop()}var a=(new n.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},a&&""!==a&&(n.rpc.register("rscmd_play_"+a,i),n.rpc.register("rscmd_pause_"+a,r),n.rpc.register("rscmd_stop_"+a,s),n.rpc.register("rsparam_set_"+a,o),n.rpc.call("","rsparam_get",null,a,["companyId","displayId","additionalParams"]))}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-6"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SRV9VUkwiLCJSaXNlVmlzaW9uIiwiQ29tbW9uIiwiTG9nZ2VyVXRpbHMiLCJnZXRFdmVudFBhcmFtcyIsInBhcmFtcyIsImNiIiwianNvbiIsImV2ZW50IiwiZmlsZV91cmwiLCJmaWxlX2Zvcm1hdCIsImdldEZpbGVGb3JtYXQiLCJjb21wYW55X2lkIiwiY29tcGFueUlkIiwiZGlzcGxheV9pZCIsImRpc3BsYXlJZCIsInZlcnNpb24iLCJnZXRTdWZmaXgiLCJkYXRlIiwiRGF0ZSIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsIm1vbnRoIiwiZ2V0VVRDTW9udGgiLCJkYXkiLCJnZXRVVENEYXRlIiwidXJsIiwic3RyIiwiaGFzUGFyYW1zIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJ0ZXN0IiwiaW5kZXhPZiIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiZ2V0SW5zZXJ0RGF0YSIsIkJBU0VfSU5TRVJUX1NDSEVNQSIsImtpbmQiLCJza2lwSW52YWxpZFJvd3MiLCJpZ25vcmVVbmtub3duVmFsdWVzIiwidGVtcGxhdGVTdWZmaXgiLCJyb3dzIiwiaW5zZXJ0SWQiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwidG9VcHBlckNhc2UiLCJ0cyIsInRvSVNPU3RyaW5nIiwibG9nRXZlbnQiLCJ0YWJsZSIsIkxvZ2dlciIsImxvZyIsInNldElkcyIsImNvbXBhbnkiLCJkaXNwbGF5Iiwic2V0VmVyc2lvbiIsInZhbHVlIiwidXRpbHMiLCJyZWZyZXNoVG9rZW4iLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInJlZnJlc2hEYXRlIiwib3BlbiIsIlJFRlJFU0hfVVJMIiwib25sb2FkZW5kIiwicmVzcCIsInJlc3BvbnNlIiwidG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoZWRBdCIsInNlbmQiLCJpc1Rocm90dGxlZCIsInRocm90dGxlIiwibGFzdEV2ZW50IiwidGFibGVOYW1lIiwiaW5zZXJ0V2l0aFRva2VuIiwicmVmcmVzaERhdGEiLCJpbnNlcnREYXRhIiwic2VydmljZVVybCIsInJlcGxhY2UiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiaGFzT3duUHJvcGVydHkiLCJzZXRUaW1lb3V0IiwidGhyb3R0bGVEZWxheSIsIlV0aWxpdGllcyIsImdldEZvbnRDc3NTdHlsZSIsImNsYXNzTmFtZSIsImZvbnRPYmoiLCJmYW1pbHkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJmb250IiwiY29sb3IiLCJmb3JlY29sb3IiLCJzaXplIiwid2VpZ2h0IiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImhpZ2hsaWdodCIsImhpZ2hsaWdodENvbG9yIiwiYmFja2NvbG9yIiwiYWRkQ1NTUnVsZXMiLCJydWxlcyIsInN0eWxlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaSIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJoZWFkIiwibG9hZEZvbnRzIiwic2V0dGluZ3MiLCJjYWxsYmFjayIsIm9uR29vZ2xlRm9udHNMb2FkZWQiLCJmYW1pbGllcyIsImdvb2dsZUZhbWlsaWVzIiwiY3VzdG9tRmFtaWxpZXMiLCJjdXN0b21VcmxzIiwiZm9yRWFjaCIsIml0ZW0iLCJjbGFzcyIsImZvbnRTdHlsZSIsInR5cGUiLCJzcGxpdCIsInB1c2giLCJqIiwibG9hZEN1c3RvbUZvbnQiLCJsb2FkR29vZ2xlRm9udHMiLCJjb250ZW50RG9jIiwic2hlZXQiLCJydWxlIiwic3R5bGVTaGVldHMiLCJhZGRSdWxlIiwiV2ViRm9udCIsImxvYWQiLCJnb29nbGUiLCJhY3RpdmUiLCJpbmFjdGl2ZSIsInRpbWVvdXQiLCJwcmVsb2FkSW1hZ2VzIiwidXJscyIsImltYWdlcyIsIkltYWdlIiwic3JjIiwiZ2V0UXVlcnlQYXJhbWV0ZXIiLCJwYXJhbSIsInBhaXIiLCJxdWVyeSIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwidmFycyIsImdldFJpc2VDYWNoZUVycm9yTWVzc2FnZSIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJ1bmVzY2FwZUhUTUwiLCJodG1sIiwiZGl2IiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJoYXNJbnRlcm5ldENvbm5lY3Rpb24iLCJmaWxlUGF0aCIsImdldFRpbWUiLCJzdGF0dXMiLCJlIiwiaXNMZWdhY3kiLCJsZWdhY3lWZXJzaW9uIiwibWF0Y2giLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJwYXJzZUludCIsImFkZFByb3RvY29sIiwic2VjdXJlIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiY29uZmlnIiwiU1RPUkFHRV9FTlYiLCJXZWJQYWdlIiwiZ2FkZ2V0cyIsIl9yZWFkeSIsInJwYyIsImNhbGwiLCJfcHJlZnMiLCJnZXRTdHJpbmciLCJfc2V0SW50ZXJhY3Rpdml0eSIsImZyYW1lIiwiYmxvY2tlciIsInF1ZXJ5U2VsZWN0b3IiLCJfYWRkaXRpb25hbFBhcmFtcyIsImludGVyYWN0aXZpdHkiLCJzZXRBdHRyaWJ1dGUiLCJpbnRlcmFjdGl2ZSIsInNjcm9sbGJhcnMiLCJfc2V0QXNwZWN0UmF0aW8iLCJjb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsImFzcGVjdFJhdGlvIiwiZ2V0SW50IiwiX3ZlcnRpY2FsIiwiX3NldFpvb20iLCJ6b29tIiwicGFyc2VGbG9hdCIsImN1cnJlbnRTdHlsZSIsInpvb21TdHlsZSIsImdldEF0dHJpYnV0ZSIsIl93aWR0aE9mZnNldCIsIl9zZXRSZWdpb24iLCJtYXJnaW5TdHlsZSIsImhvcml6b250YWwiLCJyZWdpb24iLCJzaG93UmVnaW9uIiwidmVydGljYWwiLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX3V0aWxzIiwiaGFzSW50ZXJuZXQiLCJfbG9hZEZyYW1lIiwicmVmcmVzaCIsIl9nZXRGcmFtZUVsZW1lbnQiLCJ2aXNpYmlsaXR5Iiwib25sb2FkIiwidGhpcyIsIl9pbml0aWFsTG9hZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW1vdmVDaGlsZCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsIl91cmwiLCJfdW5sb2FkRnJhbWUiLCJjbGVhckludGVydmFsIiwiX2luaXQiLCJfbWVzc2FnZSIsIk1lc3NhZ2UiLCJoZWlnaHQiLCJnZXRUYWJsZU5hbWUiLCJwYXVzZSIsInVubG9hZCIsInBsYXkiLCJzdG9wIiwic2V0QWRkaXRpb25hbFBhcmFtcyIsImFkZGl0aW9uYWxQYXJhbXMiLCJQcmVmcyIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiY29uc29sZSIsIndhcm4iLCJtZXNzYWdlIiwiaGlkZSIsIl9hY3RpdmUiLCJmaXJzdENoaWxkIiwic2hvdyIsInAiLCJjb25maWd1cmUiLCJuYW1lcyIsInZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsImlkIiwib25jb250ZXh0bWVudSIsImJvZHkiLCJvbm1vdXNlZG93biIsInJlZ2lzdGVyIiwiX2dhcSIsImdhIiwiYXN5bmMiLCJwcm90b2NvbCIsInMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlBLHVCQUNGQyxjQUFlLGlCQUNmQyxpQkFBa0IsNEVBQ2xCQyxxQkFBc0IsMkJBQ3RCQyxxQkFBc0IscUVBQ3RCQyxVQUFXLDZDQUlUQyxXQUFhQSxjQUNqQkEsWUFBV0MsT0FBU0QsV0FBV0MsV0FFL0JELFdBQVdDLE9BQU9DLFlBQWMsV0FDOUIsWUFXQSxTQUFTQyxHQUFlQyxFQUFRQyxHQUM5QixHQUFJQyxHQUFPLElBR1BGLEdBQU9HLE9BQ1RELEVBQU9GLEVBRUhFLEVBQUtFLFdBQ1BGLEVB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QyxLQUFLLEdBQUksY0FBZSxLQUFNNkUsR0FBSyxZQUFhLFlBQWEsdUJBRzFFaEgsT0FBUTVDLFNBQVU0RSxRQUtyQixJQUFJcUYsTUFBT0EsUUFFWEEsTUFBSzdJLE1BQU0sY0FBZSxrQkFDMUI2SSxLQUFLN0ksTUFBTSxtQkFFWCxXQUNFLEdBQUk4SSxHQUFLbEssU0FBU0MsY0FBYyxTQUFXaUssR0FBR2hKLEtBQU8sa0JBQW1CZ0osRUFBR0MsT0FBUSxFQUNuRkQsRUFBRzNILEtBQU8sVUFBWXZDLFNBQVM2QyxTQUFTdUgsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSXJLLFNBQVNzSyxxQkFBcUIsVUFBVSxFQUFJRCxHQUFFRSxXQUFXQyxhQUFhTixFQUFJRyIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXhwb3J0ZWQgV0lER0VUX0NPTU1PTl9DT05GSUcgKi9cbnZhciBXSURHRVRfQ09NTU9OX0NPTkZJRyA9IHtcbiAgQVVUSF9QQVRIX1VSTDogXCJ2MS93aWRnZXQvYXV0aFwiLFxuICBMT0dHRVJfQ0xJRU5UX0lEOiBcIjEwODg1MjcxNDcxMDktNnExbzJ2dGlobjM0MjkycGp0NGNraG1oY2swcmswbzcuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIixcbiAgTE9HR0VSX0NMSUVOVF9TRUNSRVQ6IFwibmxaeXJjUExnNm9Fd085ZjlXZm4yOVdoXCIsXG4gIExPR0dFUl9SRUZSRVNIX1RPS0VOOiBcIjEveHp0NGt3ekUxSDdXOVZuS0I4Y0FhQ3g2emI0RXM0bktFb3FhWUhkVEQxNUlnT3JKRHRkdW42eks2WGlBVENLVFwiLFxuICBTVE9SRV9VUkw6IFwiaHR0cHM6Ly9zdG9yZS1kb3QtcnZhc2VydmVyMi5hcHBzcG90LmNvbS9cIlxufTtcbi8qIGdsb2JhbCBXSURHRVRfQ09NTU9OX0NPTkZJRyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyA9IChmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgIHZhciBkaXNwbGF5SWQgPSBcIlwiLFxuICAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgICB2ZXJzaW9uID0gbnVsbDtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuXG4gIC8qIFJldHJpZXZlIHBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgZXZlbnQgbG9nZ2VyLiAqL1xuICBmdW5jdGlvbiBnZXRFdmVudFBhcmFtcyhwYXJhbXMsIGNiKSB7XG4gICAgdmFyIGpzb24gPSBudWxsO1xuXG4gICAgLy8gZXZlbnQgaXMgcmVxdWlyZWQuXG4gICAgaWYgKHBhcmFtcy5ldmVudCkge1xuICAgICAganNvbiA9IHBhcmFtcztcblxuICAgICAgaWYgKGpzb24uZmlsZV91cmwpIHtcbiAgICAgICAganNvbi5maWxlX2Zvcm1hdCA9IGdldEZpbGVGb3JtYXQoanNvbi5maWxlX3VybCk7XG4gICAgICB9XG5cbiAgICAgIGpzb24uY29tcGFueV9pZCA9IGNvbXBhbnlJZDtcbiAgICAgIGpzb24uZGlzcGxheV9pZCA9IGRpc3BsYXlJZDtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAganNvbi52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgY2IoanNvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY2IoanNvbik7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHN1ZmZpeCBmb3IgQlEgdGFibGUgbmFtZS5cbiAgZnVuY3Rpb24gZ2V0U3VmZml4KCkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKSxcbiAgICAgIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKSArIDEsXG4gICAgICBkYXkgPSBkYXRlLmdldFVUQ0RhdGUoKTtcblxuICAgIGlmIChtb250aCA8IDEwKSB7XG4gICAgICBtb250aCA9IFwiMFwiICsgbW9udGg7XG4gICAgfVxuXG4gICAgaWYgKGRheSA8IDEwKSB7XG4gICAgICBkYXkgPSBcIjBcIiArIGRheTtcbiAgICB9XG5cbiAgICByZXR1cm4gXCJcIiArIHllYXIgKyBtb250aCArIGRheTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIEJBU0VfSU5TRVJUX1NDSEVNQSA9IHtcbiAgICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICAgIFwic2tpcEludmFsaWRSb3dzXCI6IGZhbHNlLFxuICAgICAgXCJpZ25vcmVVbmtub3duVmFsdWVzXCI6IGZhbHNlLFxuICAgICAgXCJ0ZW1wbGF0ZVN1ZmZpeFwiOiBnZXRTdWZmaXgoKSxcbiAgICAgIFwicm93c1wiOiBbe1xuICAgICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShCQVNFX0lOU0VSVF9TQ0hFTUEpKTtcblxuICAgIGRhdGEucm93c1swXS5pbnNlcnRJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKS50b1VwcGVyQ2FzZSgpO1xuICAgIGRhdGEucm93c1swXS5qc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbi50cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQodGFibGUsIHBhcmFtcykge1xuICAgIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgaWYgKGpzb24gIT09IG51bGwpIHtcbiAgICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyLmxvZyh0YWJsZSwganNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiBTZXQgdGhlIENvbXBhbnkgYW5kIERpc3BsYXkgSURzLiAqL1xuICBmdW5jdGlvbiBzZXRJZHMoY29tcGFueSwgZGlzcGxheSkge1xuICAgIGNvbXBhbnlJZCA9IGNvbXBhbnk7XG4gICAgZGlzcGxheUlkID0gZGlzcGxheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFZlcnNpb24odmFsdWUpIHtcbiAgICB2ZXJzaW9uID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SW5zZXJ0RGF0YVwiOiBnZXRJbnNlcnREYXRhLFxuICAgIFwiZ2V0RmlsZUZvcm1hdFwiOiBnZXRGaWxlRm9ybWF0LFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJzZXRJZHNcIjogc2V0SWRzLFxuICAgIFwic2V0VmVyc2lvblwiOiBzZXRWZXJzaW9uXG4gIH07XG59KSgpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcblxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHRhYmxlTmFtZSk7XG4gICAgICByZWZyZXNoRGF0ZSA9IHJlZnJlc2hEYXRhLnJlZnJlc2hlZEF0IHx8IHJlZnJlc2hEYXRlO1xuICAgICAgdG9rZW4gPSByZWZyZXNoRGF0YS50b2tlbiB8fCB0b2tlbjtcbiAgICAgIGluc2VydERhdGEgPSB1dGlscy5nZXRJbnNlcnREYXRhKHBhcmFtcyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgZGF0YS5cbiAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmVhcmVyIFwiICsgdG9rZW4pO1xuXG4gICAgICBpZiAocGFyYW1zLmNiICYmIHR5cGVvZiBwYXJhbXMuY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcGFyYW1zLmNiKHhoci5yZXNwb25zZSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGluc2VydERhdGEpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVmcmVzaFRva2VuKGluc2VydFdpdGhUb2tlbik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwibG9nXCI6IGxvZ1xuICB9O1xufSkoUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMpO1xuLyogZ2xvYmFsIFdlYkZvbnQgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gZ2V0Rm9udENzc1N0eWxlKGNsYXNzTmFtZSwgZm9udE9iaikge1xuICAgIHZhciBmYW1pbHkgPSBcImZvbnQtZmFtaWx5OiBcIiArIGRlY29kZVVSSUNvbXBvbmVudChmb250T2JqLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpICsgXCI7IFwiO1xuICAgIHZhciBjb2xvciA9IFwiY29sb3I6IFwiICsgKGZvbnRPYmouY29sb3IgPyBmb250T2JqLmNvbG9yIDogZm9udE9iai5mb3JlY29sb3IpICsgXCI7IFwiO1xuICAgIHZhciBzaXplID0gXCJmb250LXNpemU6IFwiICsgKGZvbnRPYmouc2l6ZS5pbmRleE9mKFwicHhcIikgPT09IC0xID8gZm9udE9iai5zaXplICsgXCJweDsgXCIgOiBmb250T2JqLnNpemUgKyBcIjsgXCIpO1xuICAgIHZhciB3ZWlnaHQgPSBcImZvbnQtd2VpZ2h0OiBcIiArIChmb250T2JqLmJvbGQgPyBcImJvbGRcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciBpdGFsaWMgPSBcImZvbnQtc3R5bGU6IFwiICsgKGZvbnRPYmouaXRhbGljID8gXCJpdGFsaWNcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciB1bmRlcmxpbmUgPSBcInRleHQtZGVjb3JhdGlvbjogXCIgKyAoZm9udE9iai51bmRlcmxpbmUgPyBcInVuZGVybGluZVwiIDogXCJub25lXCIpICsgXCI7IFwiO1xuICAgIHZhciBoaWdobGlnaHQgPSBcImJhY2tncm91bmQtY29sb3I6IFwiICsgKGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgPyBmb250T2JqLmhpZ2hsaWdodENvbG9yIDogZm9udE9iai5iYWNrY29sb3IpICsgXCI7XCI7XG5cbiAgICByZXR1cm4gXCIuXCIgKyBjbGFzc05hbWUgKyBcIiB7XCIgKyBmYW1pbHkgKyBjb2xvciArIHNpemUgKyB3ZWlnaHQgKyBpdGFsaWMgKyB1bmRlcmxpbmUgKyBoaWdobGlnaHQgKyBcIn1cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENTU1J1bGVzKHJ1bGVzKSB7XG4gICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlc1tpXSkpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgLypcbiAgICogTG9hZHMgR29vZ2xlIG9yIGN1c3RvbSBmb250cywgaWYgYXBwbGljYWJsZSwgYW5kIGluamVjdHMgQ1NTIHN0eWxlc1xuICAgKiBpbnRvIHRoZSBoZWFkIG9mIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtICAgIGFycmF5ICAgIHNldHRpbmdzICAgIEFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgZm9sbG93aW5nIGZvcm06XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJkYXRlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvbnRTZXR0aW5nXCI6IHtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5OiBcIkFrcm9uaW1cIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJWZXJkYW5hXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdvb2dsZVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9jdXN0b20tZm9udC11cmxcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwiMjBcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICpcbiAgICogICAgICAgICAgIG9iamVjdCAgIGNvbnRlbnREb2MgICAgRG9jdW1lbnQgb2JqZWN0IGludG8gd2hpY2ggdG8gaW5qZWN0IHN0eWxlc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbG9hZCBmb250cyAob3B0aW9uYWwpLlxuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEZvbnRzKHNldHRpbmdzLCBjYikge1xuICAgIHZhciBmYW1pbGllcyA9IG51bGwsXG4gICAgICBnb29nbGVGYW1pbGllcyA9IFtdLFxuICAgICAgY3VzdG9tRmFtaWxpZXMgPSBbXSxcbiAgICAgIGN1c3RvbVVybHMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Hb29nbGVGb250c0xvYWRlZCgpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgaWYgKCFzZXR0aW5ncyB8fCBzZXR0aW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGN1c3RvbSBjc3MgY2xhc3MgbmFtZXMgYW5kIGFkZCBydWxlcyBpZiBzb1xuICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKGl0ZW0uY2xhc3MgJiYgaXRlbS5mb250U3R5bGUpIHtcbiAgICAgICAgYWRkQ1NTUnVsZXMoWyBnZXRGb250Q3NzU3R5bGUoaXRlbS5jbGFzcywgaXRlbS5mb250U3R5bGUpIF0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gR29vZ2xlIGZvbnRzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImdvb2dsZVwiKSkge1xuICAgICAgICAvLyBSZW1vdmUgZmFsbGJhY2sgZm9udC5cbiAgICAgICAgZmFtaWxpZXMgPSBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC5mYW1pbHkuc3BsaXQoXCIsXCIpWzBdO1xuXG4gICAgICAgIC8vIHN0cmlwIHBvc3NpYmxlIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgZmFtaWxpZXMgPSBmYW1pbGllcy5yZXBsYWNlKC8nL2csIFwiXCIpO1xuXG4gICAgICAgIGdvb2dsZUZhbWlsaWVzLnB1c2goZmFtaWxpZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEN1c3RvbSBmb250c1xuICAgIGZvciAoaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImN1c3RvbVwiKSkge1xuICAgICAgICAvLyBkZWNvZGUgdmFsdWUgYW5kIHN0cmlwIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgY3VzdG9tRmFtaWxpZXMucHVzaChkZWNvZGVVUklDb21wb25lbnQoc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpKTtcbiAgICAgICAgLy8gc3RyaXAgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBjdXN0b21VcmxzLnB1c2goc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQudXJsLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdvb2dsZUZhbWlsaWVzLmxlbmd0aCA9PT0gMCAmJiBjdXN0b21GYW1pbGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgZm9udHNcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3VzdG9tRmFtaWxpZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgbG9hZEN1c3RvbUZvbnQoY3VzdG9tRmFtaWxpZXNbal0sIGN1c3RvbVVybHNbal0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29vZ2xlRmFtaWxpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBsb2FkR29vZ2xlRm9udHMoZ29vZ2xlRmFtaWxpZXMsIG9uR29vZ2xlRm9udHNMb2FkZWQpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEN1c3RvbUZvbnQoZmFtaWx5LCB1cmwsIGNvbnRlbnREb2MpIHtcbiAgICB2YXIgc2hlZXQgPSBudWxsO1xuICAgIHZhciBydWxlID0gXCJmb250LWZhbWlseTogXCIgKyBmYW1pbHkgKyBcIjsgXCIgKyBcInNyYzogdXJsKCdcIiArIHVybCArIFwiJyk7XCI7XG5cbiAgICBjb250ZW50RG9jID0gY29udGVudERvYyB8fCBkb2N1bWVudDtcblxuICAgIHNoZWV0ID0gY29udGVudERvYy5zdHlsZVNoZWV0c1swXTtcblxuICAgIGlmIChzaGVldCAhPT0gbnVsbCkge1xuICAgICAgc2hlZXQuYWRkUnVsZShcIkBmb250LWZhY2VcIiwgcnVsZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEdvb2dsZUZvbnRzKGZhbWlsaWVzLCBjYikge1xuICAgIFdlYkZvbnQubG9hZCh7XG4gICAgICBnb29nbGU6IHtcbiAgICAgICAgZmFtaWxpZXM6IGZhbWlsaWVzXG4gICAgICB9LFxuICAgICAgYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRpbWVvdXQ6IDIwMDBcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZWxvYWRJbWFnZXModXJscykge1xuICAgIHZhciBsZW5ndGggPSB1cmxzLmxlbmd0aCxcbiAgICAgIGltYWdlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaW1hZ2VzW2ldID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZXNbaV0uc3JjID0gdXJsc1tpXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRRdWVyeVBhcmFtZXRlcihwYXJhbSkge1xuICAgIHZhciBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLFxuICAgICAgdmFycyA9IHF1ZXJ5LnNwbGl0KFwiJlwiKSxcbiAgICAgIHBhaXI7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgaWYgKHBhaXJbMF0gPT0gcGFyYW0pIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2Uoc3RhdHVzQ29kZSkge1xuICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgY2FzZSA0MDQ6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGZpbGUgZG9lcyBub3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTA3OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZXJlIGlzIG5vdCBlbm91Z2ggZGlzayBzcGFjZSB0byBzYXZlIHRoZSBmaWxlIG9uIFJpc2UgQ2FjaGUuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiO1xuICAgIH1cblxuICAgIHJldHVybiBlcnJvck1lc3NhZ2U7XG4gIH1cblxuICBmdW5jdGlvbiB1bmVzY2FwZUhUTUwoaHRtbCkge1xuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICByZXR1cm4gZGl2LnRleHRDb250ZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzSW50ZXJuZXRDb25uZWN0aW9uKGZpbGVQYXRoLCBjYWxsYmFjaykge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghZmlsZVBhdGggfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJIRUFEXCIsIGZpbGVQYXRoICsgXCI/Y2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgZmFsc2UpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGNhbGxiYWNrKCh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzA0KSk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjYWxsYmFjayhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNocm9tZSB2ZXJzaW9uIGlzIHVuZGVyIGEgY2VydGFpbiB2ZXJzaW9uXG4gICAqL1xuICBmdW5jdGlvbiBpc0xlZ2FjeSgpIHtcbiAgICB2YXIgbGVnYWN5VmVyc2lvbiA9IDI1O1xuXG4gICAgdmFyIG1hdGNoID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFxcUyspLyk7XG4gICAgdmFyIHZlcnNpb24gPSBtYXRjaCA/IG1hdGNoWzFdIDogMDtcblxuICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICB2ZXJzaW9uID0gcGFyc2VJbnQodmVyc2lvbi5zdWJzdHJpbmcoMCx2ZXJzaW9uLmluZGV4T2YoXCIuXCIpKSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uIDw9IGxlZ2FjeVZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgaHR0cDovLyBvciBodHRwczovLyBwcm90b2NvbCB0byB1cmwgaWYgdGhlIHByb3RvY29sIGlzIG1pc3NpbmdcbiAgICovXG4gIGZ1bmN0aW9uIGFkZFByb3RvY29sKHVybCwgc2VjdXJlKSB7XG4gICAgaWYgKCEvXig/OmZ8aHQpdHBzP1xcOlxcL1xcLy8udGVzdCh1cmwpKSB7XG4gICAgICB1cmwgPSAoKHNlY3VyZSkgPyBcImh0dHBzOi8vXCIgOiBcImh0dHA6Ly9cIikgKyB1cmw7XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFkZFByb3RvY29sOiBhZGRQcm90b2NvbCxcbiAgICBnZXRRdWVyeVBhcmFtZXRlcjogZ2V0UXVlcnlQYXJhbWV0ZXIsXG4gICAgZ2V0Rm9udENzc1N0eWxlOiAgZ2V0Rm9udENzc1N0eWxlLFxuICAgIGFkZENTU1J1bGVzOiAgICAgIGFkZENTU1J1bGVzLFxuICAgIGxvYWRGb250czogICAgICAgIGxvYWRGb250cyxcbiAgICBsb2FkQ3VzdG9tRm9udDogICBsb2FkQ3VzdG9tRm9udCxcbiAgICBsb2FkR29vZ2xlRm9udHM6ICAgbG9hZEdvb2dsZUZvbnRzLFxuICAgIHByZWxvYWRJbWFnZXM6ICAgIHByZWxvYWRJbWFnZXMsXG4gICAgZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlOiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2UsXG4gICAgdW5lc2NhcGVIVE1MOiB1bmVzY2FwZUhUTUwsXG4gICAgaGFzSW50ZXJuZXRDb25uZWN0aW9uOiBoYXNJbnRlcm5ldENvbm5lY3Rpb24sXG4gICAgaXNMZWdhY3k6IGlzTGVnYWN5XG4gIH07XG59KSgpO1xuXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfUFJFRklYXCIsIFwibG9jYWxlcy90cmFuc2xhdGlvbl9cIilcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG59XG5cbnZhciBjb25maWcgPSB7XG4gIFNUT1JBR0VfRU5WOiBcInByb2RcIlxufTtcblxuLyogZ2xvYmFsIGdhZGdldHMgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5XZWJQYWdlID0ge307XG5cblJpc2VWaXNpb24uV2ViUGFnZSA9IChmdW5jdGlvbiAoZG9jdW1lbnQsIGdhZGdldHMpIHtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBwcml2YXRlIHZhcmlhYmxlc1xuICB2YXIgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBfdXRpbHMgPSBSaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMsXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSBudWxsLFxuICAgIF91cmwgPSBcIlwiLFxuICAgIF92ZXJ0aWNhbCA9IDAsXG4gICAgX2ludGVydmFsSWQgPSBudWxsLFxuICAgIF9pbml0aWFsTG9hZCA9IHRydWUsXG4gICAgX3dpZHRoT2Zmc2V0ID0gMDtcblxuICB2YXIgX21lc3NhZ2UgPSBudWxsO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfc2V0SW50ZXJhY3Rpdml0eShmcmFtZSkge1xuICAgIHZhciBibG9ja2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ibG9ja2VyXCIpO1xuXG4gICAgYmxvY2tlci5zdHlsZS5kaXNwbGF5ID0gKF9hZGRpdGlvbmFsUGFyYW1zLmludGVyYWN0aXZpdHkuaW50ZXJhY3RpdmUpID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG5cbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIixcbiAgICAgIChfYWRkaXRpb25hbFBhcmFtcy5pbnRlcmFjdGl2aXR5LmludGVyYWN0aXZlICYmIF9hZGRpdGlvbmFsUGFyYW1zLmludGVyYWN0aXZpdHkuc2Nyb2xsYmFycykgPyBcInllc1wiIDogXCJub1wiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zZXRBc3BlY3RSYXRpbygpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIiksXG4gICAgICBhc3BlY3RSYXRpbyA9ICAoX3ByZWZzLmdldEludChcInJzSFwiKSAvIF9wcmVmcy5nZXRJbnQoXCJyc1dcIikpICogMTAwO1xuXG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgLy8gaW1wbGVtZW50IHJlc3BvbnNpdmUgaWZyYW1lXG4gICAgICBpZiAoX3ZlcnRpY2FsICE9PSAwKSB7XG4gICAgICAgIGFzcGVjdFJhdGlvICs9IChfdmVydGljYWwgLyBfcHJlZnMuZ2V0SW50KFwicnNXXCIpKSAqIDEwMDtcbiAgICAgIH1cblxuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicGFkZGluZy1ib3R0b206XCIgKyBhc3BlY3RSYXRpbyArIFwiJVwiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfc2V0Wm9vbShmcmFtZSkge1xuICAgdmFyIHpvb20gPSBwYXJzZUZsb2F0KF9hZGRpdGlvbmFsUGFyYW1zLnpvb20pLFxuICAgIGN1cnJlbnRTdHlsZSA9IFwiXCIsXG4gICAgIHpvb21TdHlsZSA9IFwiXCI7XG5cbiAgICAvLyBDb25maWd1cmUgdGhlIHpvb20gKHNjYWxlKSBzdHlsaW5nXG4gICAgem9vbVN0eWxlID0gXCItbXMtem9vbTpcIiArIHpvb20gKyBcIjtcIiArXG4gICAgICBcIi1tb3otdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgXCItbW96LXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIiArXG4gICAgICBcIi1vLXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgIFwiLW8tdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcbiAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICBcIi13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcbiAgICAgIFwidHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgXCJ0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCI7XG5cbiAgICBjdXJyZW50U3R5bGUgPSBmcmFtZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICB6b29tU3R5bGUgKz0gXCJ3aWR0aDogXCIgKyAoKCgxIC8gem9vbSkgKiAxMDApICsgX3dpZHRoT2Zmc2V0KSArIFwiJTtcIiArXG4gICAgICBcImhlaWdodDogXCIgKyAoKDEgLyB6b29tKSAqIDEwMCkgKyBcIiU7XCI7XG5cbiAgICBpZiAoY3VycmVudFN0eWxlKSB7XG4gICAgICB6b29tU3R5bGUgPSBjdXJyZW50U3R5bGUgKyB6b29tU3R5bGU7XG4gICAgfVxuXG4gICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgem9vbVN0eWxlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zZXRSZWdpb24oZnJhbWUpIHtcbiAgICB2YXIgY3VycmVudFN0eWxlID0gXCJcIixcbiAgICAgIG1hcmdpblN0eWxlID0gXCJcIixcbiAgICAgIGhvcml6b250YWwgPSAwO1xuXG4gICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbiAmJiBfYWRkaXRpb25hbFBhcmFtcy5yZWdpb24uc2hvd1JlZ2lvbiAmJlxuICAgICAgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbi5zaG93UmVnaW9uID09PSBcInJlZ2lvblwiKSkge1xuICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbi5ob3Jpem9udGFsID4gMCkge1xuICAgICAgICBob3Jpem9udGFsID0gX2FkZGl0aW9uYWxQYXJhbXMucmVnaW9uLmhvcml6b250YWw7XG4gICAgICB9XG5cbiAgICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy5yZWdpb24udmVydGljYWwgPiAwKSB7XG4gICAgICAgIF92ZXJ0aWNhbCA9IF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbi52ZXJ0aWNhbDtcbiAgICAgIH1cblxuICAgICAgLy8gQXBwbHkgbmVnYXRpdmUgbWFyZ2lucyBpbiBvcmRlciB0byBzaG93IGEgcmVnaW9uLlxuICAgICAgaWYgKChob3Jpem9udGFsICE9PSAwKSB8fCAoX3ZlcnRpY2FsICE9PSAwKSkge1xuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHdpZHRoIG9mZnNldCB3aGVuIHJlZ2lvbiBpcyBjaG9zZW4uXG4gICAgICAgIF93aWR0aE9mZnNldCA9ICAoaG9yaXpvbnRhbCAqIDEwMCkgLyBfcHJlZnMuZ2V0SW50KFwicnNXXCIpO1xuXG4gICAgICAgIGN1cnJlbnRTdHlsZSA9IGZyYW1lLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgICAgICBtYXJnaW5TdHlsZSA9IFwibWFyZ2luOiBcIiArIFwiLVwiICsgX3ZlcnRpY2FsICsgXCJweCAwIDAgLVwiICsgaG9yaXpvbnRhbCArIFwicHg7XCI7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRTdHlsZSkge1xuICAgICAgICAgIG1hcmdpblN0eWxlID0gY3VycmVudFN0eWxlICsgbWFyZ2luU3R5bGU7XG4gICAgICAgIH1cblxuICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBtYXJnaW5TdHlsZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0UmVmcmVzaEludGVydmFsKCkge1xuICAgIF9pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgX3V0aWxzLmhhc0ludGVybmV0Q29ubmVjdGlvbihcImltZy90cmFuc3BhcmVudC5wbmdcIiwgZnVuY3Rpb24gKGhhc0ludGVybmV0KSB7XG4gICAgICAgIGlmIChoYXNJbnRlcm5ldCkge1xuICAgICAgICAgIF9sb2FkRnJhbWUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0RnJhbWVFbGVtZW50KCkge1xuICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiksXG4gICAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKTtcblxuICAgIGZyYW1lLmNsYXNzTmFtZSA9IFwid2VicGFnZS1mcmFtZVwiO1xuICAgIGZyYW1lLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcImZyYW1lYm9yZGVyXCIsIFwiMFwiKTtcbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd1RyYW5zcGFyZW5jeVwiLCBcInRydWVcIik7XG4gICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic2FuZGJveFwiLCBcImFsbG93LWZvcm1zIGFsbG93LXNhbWUtb3JpZ2luIGFsbG93LXNjcmlwdHNcIik7XG5cbiAgICBfc2V0SW50ZXJhY3Rpdml0eShmcmFtZSk7XG4gICAgX3NldFJlZ2lvbihmcmFtZSk7XG4gICAgX3NldFpvb20oZnJhbWUpO1xuICAgIF9zZXRBc3BlY3RSYXRpbygpO1xuXG4gICAgZnJhbWUub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vbmxvYWQgPSBudWxsO1xuICAgICAgdGhpcy5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cbiAgICAgIF9pbml0aWFsTG9hZCA9IGZhbHNlO1xuXG4gICAgICAvLyBjaGVjayBpZiByZWZyZXNoIGludGVydmFsIHNob3VsZCBiZSBzdGFydGVkXG4gICAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDAgJiYgX2ludGVydmFsSWQgPT09IG51bGwpIHtcbiAgICAgICAgX3N0YXJ0UmVmcmVzaEludGVydmFsKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLndlYnBhZ2UtZnJhbWVcIikubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBSZWZyZXNoIG9jY3VycmVkLCByZW1vdmUgb2xkIGlmcmFtZVxuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWJwYWdlLWZyYW1lXCIpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGZyYW1lO1xuICB9XG5cbiAgZnVuY3Rpb24gX2xvYWRGcmFtZSgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIiksXG4gICAgICBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIGZyYW1lID0gX2dldEZyYW1lRWxlbWVudCgpO1xuXG4gICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIF91cmwpO1xuXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZnJhbWUpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIH1cblxuICBmdW5jdGlvbiBfdW5sb2FkRnJhbWUoKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLFxuICAgICAgZnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndlYnBhZ2UtZnJhbWVcIik7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDApIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoX2ludGVydmFsSWQpO1xuICAgICAgX2ludGVydmFsSWQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChmcmFtZSkge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGZyYW1lKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgIF9tZXNzYWdlID0gbmV3IFJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIiksXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikpO1xuXG4gICAgLy8gYXBwbHkgaGVpZ2h0IHZhbHVlIHRvIG1lc3NhZ2UgY29udGFpbmVyIHNvIGEgbWVzc2FnZSBnZXRzIHZlcnRpY2FsbHkgY2VudGVyZWRcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gX3ByZWZzLmdldEludChcInJzSFwiKSArIFwicHhcIjtcblxuICAgIC8vIENvbmZpZ3VyZSB0aGUgdmFsdWUgZm9yIF91cmxcbiAgICBfdXJsID0gX2FkZGl0aW9uYWxQYXJhbXMudXJsO1xuXG4gICAgLy8gQWRkIGh0dHA6Ly8gaWYgbm8gcHJvdG9jb2wgcGFyYW1ldGVyIGV4aXN0c1xuICAgIGlmIChfdXJsLmluZGV4T2YoXCI6Ly9cIikgPT09IC0xKSB7XG4gICAgICBfdXJsID0gXCJodHRwOi8vXCIgKyBfdXJsO1xuICAgIH1cblxuICAgIF9yZWFkeSgpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXRUYWJsZU5hbWUoKSB7XG4gICAgcmV0dXJuIFwid2VicGFnZV9ldmVudHNcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHBhcmFtcykge1xuICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLmxvZ0V2ZW50KGdldFRhYmxlTmFtZSgpLCBwYXJhbXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnVubG9hZCkge1xuICAgICAgX3VubG9hZEZyYW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcblxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcInBsYXlcIiwgXCJ1cmxcIjogX3VybCB9KTtcblxuICAgIGlmIChfaW5pdGlhbExvYWQgfHwgX2FkZGl0aW9uYWxQYXJhbXMudW5sb2FkKSB7XG4gICAgICBfbG9hZEZyYW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBwYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zKSB7XG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFkZGl0aW9uYWxQYXJhbXMpKTtcblxuICAgIF9pbml0KCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0VGFibGVOYW1lXCI6IGdldFRhYmxlTmFtZSxcbiAgICBcImxvZ0V2ZW50XCI6IGxvZ0V2ZW50LFxuICAgIFwic2V0QWRkaXRpb25hbFBhcmFtc1wiOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzdG9wXCI6IHN0b3BcbiAgfTtcblxufSkoZG9jdW1lbnQsIGdhZGdldHMpO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlID0gZnVuY3Rpb24gKG1haW5Db250YWluZXIsIG1lc3NhZ2VDb250YWluZXIpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hY3RpdmUgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBfaW5pdCgpIHtcbiAgICB0cnkge1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYWluQ29udGFpbmVyLnN0eWxlLmhlaWdodDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJDYW4ndCBpbml0aWFsaXplIE1lc3NhZ2UgLSBcIiwgZS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgaWYgKF9hY3RpdmUpIHtcbiAgICAgIC8vIGNsZWFyIGNvbnRlbnQgb2YgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIHdoaWxlIChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5yZW1vdmVDaGlsZChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAvLyBoaWRlIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgLy8gc2hvdyBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgICBfYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhtZXNzYWdlKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgcDtcblxuICAgIGlmICghX2FjdGl2ZSkge1xuICAgICAgLy8gaGlkZSBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgLy8gY3JlYXRlIG1lc3NhZ2UgZWxlbWVudFxuICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1lc3NhZ2VcIik7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHApO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIF9hY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtZXNzYWdlIGFscmVhZHkgYmVpbmcgc2hvd24sIHVwZGF0ZSBtZXNzYWdlIHRleHRcbiAgICAgIHAgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZVwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICB9XG4gIH1cblxuICBfaW5pdCgpO1xuXG4gIHJldHVybiB7XG4gICAgXCJoaWRlXCI6IGhpZGUsXG4gICAgXCJzaG93XCI6IHNob3dcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBSaXNlVmlzaW9uLCBnYWRnZXRzICovXG5cbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgaWQgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZG9jdW1lbnQuYm9keS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb25maWd1cmUobmFtZXMsIHZhbHVlcykge1xuICAgIHZhciBhZGRpdGlvbmFsUGFyYW1zLFxuICAgICAgY29tcGFueUlkID0gXCJcIixcbiAgICAgIGRpc3BsYXlJZCA9IFwiXCI7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIGNvbXBhbnkgaWRcbiAgICAgIGlmIChuYW1lc1swXSA9PT0gXCJjb21wYW55SWRcIikge1xuICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICB9XG5cbiAgICAgIC8vIGRpc3BsYXkgaWRcbiAgICAgIGlmIChuYW1lc1sxXSA9PT0gXCJkaXNwbGF5SWRcIikge1xuICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG4gICAgICAgICAgZGlzcGxheUlkID0gdmFsdWVzWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlJZCA9IFwicHJldmlld1wiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHByb3ZpZGUgTG9nZ2VyVXRpbHMgdGhlIGlkcyB0byB1c2VcbiAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLnNldElkcyhjb21wYW55SWQsIGRpc3BsYXlJZCk7XG5cbiAgICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1zXG4gICAgICBpZiAobmFtZXNbMl0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXMgPSBKU09OLnBhcnNlKHZhbHVlc1syXSk7XG5cbiAgICAgICAgUmlzZVZpc2lvbi5XZWJQYWdlLnNldEFkZGl0aW9uYWxQYXJhbXMoYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIFJpc2VWaXNpb24uV2ViUGFnZS5zdG9wKCk7XG4gIH1cblxuICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wYXVzZV9cIiArIGlkLCBwYXVzZSk7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgY29uZmlndXJlKTtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImNvbXBhbnlJZFwiLCBcImRpc3BsYXlJZFwiLCBcImFkZGl0aW9uYWxQYXJhbXNcIl0pO1xuICB9XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsIGdhZGdldHMpO1xuXG5cblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS02J10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
