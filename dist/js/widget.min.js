if("undefined"==typeof config){var config={STORAGE_ENV:"prod"};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){var t,n,a,o=e.getElementById("webpage-container"),r=e.getElementById("webpage-frame"),i=g.getInt("rsH")/g.getInt("rsW")*100,s=d.scrollHorizontal>0?d.scrollHorizontal:0,l=d.scrollVertical>0?d.scrollVertical:0,c=parseFloat(d.zoom);o&&r&&(t=o.getElementsByClassName("blocker")[0],o.style.visibility="hidden",0!==l&&(i+=l/g.getInt("rsW")*100),o.setAttribute("style","padding-bottom:"+i+"%"),t.style.display=d.interactive?"none":"block",r.setAttribute("scrolling",d.scrollbars?"yes":"no"),n="-ms-zoom:"+c+";-moz-transform: scale("+c+");-moz-transform-origin: 0 0;-o-transform: scale("+c+");-o-transform-origin: 0 0;-webkit-transform: scale("+c+");-webkit-transform-origin: 0 0;",n+="width: "+1/c*100+"%;height: "+1/c*100+"%;",r.setAttribute("style",n),(0!==s||0!==l)&&(a="margin: -"+l+"px 0 0 -"+s+"px;",r.setAttribute("style",n+a)))}function a(){var t=e.getElementById("webpage-frame"),n=e.getElementById("webpage-container"),o=/[?#&]/.test(m),r=Math.ceil(100*Math.random()),i=m;d.refresh>0&&(i=o?m+"&dummyVar="+r:m+"?dummyVar="+r),n&&t&&(t.onload=function(){t.onload=null,n.style.visibility="visible",d.refresh>0&&null===f&&(f=setInterval(function(){a()},d.refresh))},t.setAttribute("src",i))}function o(){var t=e.getElementById("webpage-frame");d.refresh>0&&clearInterval(f),t&&(t.src="about:blank")}function r(){t.rpc.call("","rsevent_ready",null,g.getString("id"),!0,!0,!0,!0,!1)}function i(){m=d.url,-1===m.indexOf("://")&&(m="http://"+m),n(),r()}function s(){o()}function l(){a()}function c(){o()}function u(e){g=new t.Prefs,d=e,b=new RiseVision.Common.Background(d),b.init(i)}var g=null,d={},m="",f=null,b=null;return{setAdditionalParams:u,pause:s,play:l,stop:c}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function t(){setTimeout(function(){s.style.backgroundImage="url("+e.background.image.url+g+"cb="+(new Date).getTime()+")",t()},c)}function n(){i=!0,e.background.useImage&&!u&&t(),r&&"function"==typeof r&&r()}function a(){var t;s=document.getElementById("background"),l=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,s?e.background.useImage?(s.className=e.background.image.position,s.className=e.background.image.scale?s.className+" scale-to-fit":s.className,u=0!==Object.keys(e.backgroundStorage).length,u?l?(l.addEventListener("rise-storage-response",function(e){i?e.detail&&e.detail.url&&e.detail.hasOwnProperty("changed")&&e.detail.changed&&(s.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')"):(e.detail&&e.detail.url&&(s.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')"),n())}),l.setAttribute("folder",e.backgroundStorage.folder),l.setAttribute("fileName",e.backgroundStorage.fileName),l.setAttribute("companyId",e.backgroundStorage.companyId),l.setAttribute("env",config.STORAGE_ENV),l.go()):console.log("Missing element with id value of 'backgroundStorage'"):(t=e.background.image.url.split("?"),g=1===t.length?"?":"&",s.style.backgroundImage="url("+e.background.image.url+")",n())):n():console.log("Missing element with id value of 'background'")}function o(e){i?e&&"function"==typeof e&&e():(e&&(r=e),a())}var r=null,i=!1,s=null,l=null,c=9e5,u=!1,g="";return{init:o}},function(e,t){"use strict";function n(){RiseVision.WebPage.play()}function a(){RiseVision.WebPage.pause()}function o(){RiseVision.WebPage.stop()}function r(e,t){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&RiseVision.WebPage.setAdditionalParams(JSON.parse(t[0]))}function i(){e.removeEventListener("WebComponentsReady",i),l&&""!==l&&(t.rpc.register("rscmd_play_"+l,n),t.rpc.register("rscmd_pause_"+l,a),t.rpc.register("rscmd_stop_"+l,o),t.rpc.register("rsparam_set_"+l,r),t.rpc.call("","rsparam_get",null,l,["additionalParams"]))}var s=new t.Prefs,l=s.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",i)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-6"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiU1RPUkFHRV9FTlYiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJSaXNlVmlzaW9uIiwiV2ViUGFnZSIsImRvY3VtZW50IiwiZ2FkZ2V0cyIsIl9jb25maWd1cmVQYWdlIiwiYmxvY2tlciIsInpvb21TdHlsZSIsIm1hcmdpblN0eWxlIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJmcmFtZSIsImFzcGVjdFJhdGlvIiwiX3ByZWZzIiwiZ2V0SW50Iiwic2Nyb2xsSG9yaXpWYWwiLCJfYWRkaXRpb25hbFBhcmFtcyIsInNjcm9sbEhvcml6b250YWwiLCJzY3JvbGxWZXJ0VmFsIiwic2Nyb2xsVmVydGljYWwiLCJ6b29tIiwicGFyc2VGbG9hdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJzZXRBdHRyaWJ1dGUiLCJkaXNwbGF5IiwiX2xvYWRGcmFtZSIsImhhc1BhcmFtcyIsInRlc3QiLCJfdXJsIiwicmFuZG9tTnVtIiwiTWF0aCIsImNlaWwiLCJyYW5kb20iLCJyZWZyZXNoVVJMIiwicmVmcmVzaCIsIm9ubG9hZCIsIl9pbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJfdW5sb2FkRnJhbWUiLCJjbGVhckludGVydmFsIiwic3JjIiwiX3JlYWR5IiwicnBjIiwiY2FsbCIsImdldFN0cmluZyIsIl9iYWNrZ3JvdW5kUmVhZHkiLCJ1cmwiLCJpbmRleE9mIiwicGF1c2UiLCJwbGF5Iiwic3RvcCIsInNldEFkZGl0aW9uYWxQYXJhbXMiLCJwYXJhbXMiLCJQcmVmcyIsIl9iYWNrZ3JvdW5kIiwiQ29tbW9uIiwiQmFja2dyb3VuZCIsImluaXQiLCJkYXRhIiwiX3JlZnJlc2hUaW1lciIsInNldFRpbWVvdXQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kIiwiaW1hZ2UiLCJfc2VwYXJhdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJfcmVmcmVzaER1cmF0aW9uIiwidXNlSW1hZ2UiLCJfaXNTdG9yYWdlRmlsZSIsIl9jYWxsYmFjayIsIl9jb25maWd1cmUiLCJzdHIiLCJfc3RvcmFnZSIsImJvZHkiLCJjb2xvciIsImNsYXNzTmFtZSIsInBvc2l0aW9uIiwic2NhbGUiLCJPYmplY3QiLCJrZXlzIiwiYmFja2dyb3VuZFN0b3JhZ2UiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRldGFpbCIsImhhc093blByb3BlcnR5IiwiY2hhbmdlZCIsInJlcGxhY2UiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImNvbXBhbnlJZCIsImdvIiwiY29uc29sZSIsImxvZyIsInNwbGl0IiwiY2IiLCJ3aW5kb3ciLCJhZGRpdGlvbmFsUGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJwb2x5bWVyUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaWQiLCJyZWdpc3RlciIsInByZWZzIiwib25jb250ZXh0bWVudSIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImFzeW5jIiwibG9jYXRpb24iLCJwcm90b2NvbCIsInMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUVBLEdBQXNCLG1CQUFYQSxRQUF3QixDQUNqQyxHQUFJQSxTQUNGQyxZQUFhLE9BR1Esb0JBQVpDLFVBQ1RBLFFBQVFDLE9BQU8sb0NBQ1pDLFNBQVMsaUJBQWtCLHdCQUMzQkEsU0FBUyxnQkFBaUIsU0FNakMsR0FBSUMsWUFBYUEsY0FDakJBLFlBQVdDLFdBRVhELFdBQVdDLFFBQVUsU0FBV0MsRUFBVUMsR0FFeEMsWUFhQSxTQUFTQyxLQUNQLEdBUUVDLEdBQVNDLEVBQVdDLEVBUmxCQyxFQUFZTixFQUFTTyxlQUFlLHFCQUN0Q0MsRUFBUVIsRUFBU08sZUFBZSxpQkFDaENFLEVBQWdCQyxFQUFPQyxPQUFP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LEdBQUlFLEdBQVEsR0FBSTNHLEdBQVFtRCxNQUN0QnNELEVBQUtFLEVBQU1qRSxVQUFVLEtBR3ZCcUQsR0FBT2EsY0FBZ0IsV0FDckIsT0FBTyxHQW9DVGIsRUFBT2QsaUJBQWlCLHFCQUFzQnNCLElBRTdDUixPQUFRL0YsUUFLWCxJQUFJNkcsTUFBT0EsUUFFWEEsTUFBS0MsTUFBTSxjQUFlLGtCQUMxQkQsS0FBS0MsTUFBTSxtQkFFWCxXQUNFLEdBQUlDLEdBQUtoSCxTQUFTaUgsY0FBYyxTQUFXRCxHQUFHRSxLQUFPLGtCQUFtQkYsRUFBR0csT0FBUSxFQUNuRkgsRUFBR3pFLEtBQU8sVUFBWXZDLFNBQVNvSCxTQUFTQyxTQUFXLGNBQWdCLGNBQWdCLDZCQUNuRixJQUFJQyxHQUFJdEgsU0FBU3VILHFCQUFxQixVQUFVLEVBQUlELEdBQUVFLFdBQVdDLGFBQWFULEVBQUlNIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgY29uZmlnOiB0cnVlICovXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgY29uZmlnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgU1RPUkFHRV9FTlY6IFwicHJvZFwiXG4gIH07XG5cbiAgaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAgIC5jb25zdGFudChcIkxPQ0FMRVNfUFJFRklYXCIsIFwibG9jYWxlcy90cmFuc2xhdGlvbl9cIilcbiAgICAgIC5jb25zdGFudChcIkxPQ0FMRVNfU1VGSVhcIiwgXCIuanNvblwiKTtcbiAgfVxufVxuXG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLldlYlBhZ2UgPSB7fTtcblxuUmlzZVZpc2lvbi5XZWJQYWdlID0gKGZ1bmN0aW9uIChkb2N1bWVudCwgZ2FkZ2V0cykge1xuXG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIHByaXZhdGUgdmFyaWFibGVzXG4gIHZhciBfcHJlZnMgPSBudWxsLFxuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0ge30sXG4gICAgX3VybCA9IFwiXCIsXG4gICAgX2ludGVydmFsSWQgPSBudWxsLFxuICAgIF9iYWNrZ3JvdW5kID0gbnVsbDtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuXG4gIGZ1bmN0aW9uIF9jb25maWd1cmVQYWdlKCkge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtY29udGFpbmVyXCIpLFxuICAgICAgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtZnJhbWVcIiksXG4gICAgICBhc3BlY3RSYXRpbyA9ICAoX3ByZWZzLmdldEludChcInJzSFwiKSAvIF9wcmVmcy5nZXRJbnQoXCJyc1dcIikpICogMTAwLFxuICAgICAgc2Nyb2xsSG9yaXpWYWwgPSAoX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsSG9yaXpvbnRhbCA+IDApID9cbiAgICAgICAgICBfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxIb3Jpem9udGFsIDogMCxcbiAgICAgIHNjcm9sbFZlcnRWYWwgPSAoX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsVmVydGljYWwgPiAwKSA/XG4gICAgICAgICAgX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsVmVydGljYWwgOiAwLFxuICAgICAgem9vbSA9IHBhcnNlRmxvYXQoX2FkZGl0aW9uYWxQYXJhbXMuem9vbSksXG4gICAgICBibG9ja2VyLCB6b29tU3R5bGUsIG1hcmdpblN0eWxlO1xuXG4gICAgaWYgKGNvbnRhaW5lciAmJiBmcmFtZSkge1xuICAgICAgYmxvY2tlciA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYmxvY2tlclwiKVswXTtcblxuICAgICAgLy8gSGlkaW5nIGlmcmFtZSBjb250YWluZXIsIHZpc2libGUgd2hlbiB0aGUgaWZyYW1lIHN1Y2Nlc3NmdWxseSBsb2Fkc1xuICAgICAgY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXG4gICAgICAvLyBzZXQgdGhlIHBhZGRpbmctYm90dG9tIHdpdGggdGhlIGFzcGVjdCByYXRpbyAlIChyZXNwb25zaXZlKVxuICAgICAgaWYgKHNjcm9sbFZlcnRWYWwgIT09IDApIHtcbiAgICAgICAgLy8gcmVjYWxjdWxhdGUgYXNwZWN0IHJhdGlvXG4gICAgICAgIGFzcGVjdFJhdGlvICs9IChzY3JvbGxWZXJ0VmFsIC8gX3ByZWZzLmdldEludChcInJzV1wiKSkgKiAxMDA7XG4gICAgICB9XG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJwYWRkaW5nLWJvdHRvbTpcIiArIGFzcGVjdFJhdGlvICsgXCIlXCIpO1xuXG4gICAgICAvLyBDb25maWd1cmUgaW50ZXJhY3Rpdml0eSBvZiBpZnJhbWVcbiAgICAgIGJsb2NrZXIuc3R5bGUuZGlzcGxheSA9IChfYWRkaXRpb25hbFBhcmFtcy5pbnRlcmFjdGl2ZSkgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcbiAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInNjcm9sbGluZ1wiLFxuICAgICAgICAoX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsYmFycykgPyBcInllc1wiIDogXCJub1wiKTtcblxuICAgICAgLy8gQ29uZmlndXJlIHRoZSB6b29tIChzY2FsZSkgc3R5bGluZ1xuICAgICAgem9vbVN0eWxlID0gXCItbXMtem9vbTpcIiArIHpvb20gKyBcIjtcIiArXG4gICAgICAgIFwiLW1vei10cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICAgIFwiLW1vei10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCIgK1xuICAgICAgICBcIi1vLXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgICAgXCItby10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCIgK1xuICAgICAgICBcIi13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgICBcIi13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiO1xuXG4gICAgICB6b29tU3R5bGUgKz0gXCJ3aWR0aDogXCIgKyAoKDEgLyB6b29tKSAqIDEwMCkgKyBcIiU7XCIgK1xuICAgICAgXCJoZWlnaHQ6IFwiICsgKCgxIC8gem9vbSkgKiAxMDApICsgXCIlO1wiO1xuXG4gICAgICAvLyBBcHBseSB0aGUgem9vbSAoc2NhbGUpIG9uIHRoZSBpZnJhbWVcbiAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIHpvb21TdHlsZSk7XG5cbiAgICAgIGlmIChzY3JvbGxIb3JpelZhbCAhPT0gMCB8fCBzY3JvbGxWZXJ0VmFsICE9PSAwKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyZSB0aGUgbWFyZ2luIHN0eWxpbmdcbiAgICAgICAgbWFyZ2luU3R5bGUgPSBcIm1hcmdpbjogXCIgKyBcIi1cIiArIHNjcm9sbFZlcnRWYWwgKyBcInB4IDAgMCAtXCIgK1xuICAgICAgICAgIHNjcm9sbEhvcml6VmFsICsgXCJweDtcIjtcblxuICAgICAgICAvKiBBcHBseSB0aGUgbWFyZ2luIHN0eWxpbmcgb24gdGhlIGlmcmFtZSB3aGlsZSBtYWludGFpbmluZ1xuICAgICAgICAgdGhlIHpvb20gc3R5bGluZyAqL1xuICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCB6b29tU3R5bGUgKyBtYXJnaW5TdHlsZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2xvYWRGcmFtZSgpIHtcbiAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtZnJhbWVcIiksXG4gICAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtY29udGFpbmVyXCIpLFxuICAgICAgaGFzUGFyYW1zID0gL1s/IyZdLy50ZXN0KF91cmwpLFxuICAgICAgcmFuZG9tTnVtID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDApLFxuICAgICAgcmVmcmVzaFVSTCA9IF91cmw7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDApIHtcbiAgICAgIHJlZnJlc2hVUkwgPSBoYXNQYXJhbXMgP1xuICAgICAgX3VybCArIFwiJmR1bW15VmFyPVwiICsgcmFuZG9tTnVtIDpcbiAgICAgIF91cmwgKyBcIj9kdW1teVZhcj1cIiArIHJhbmRvbU51bTtcbiAgICB9XG5cbiAgICBpZiAoY29udGFpbmVyICYmIGZyYW1lKSB7XG4gICAgICBmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYW1lLm9ubG9hZCA9IG51bGw7XG5cbiAgICAgICAgLy8gU2hvdyB0aGUgaWZyYW1lIGNvbnRhaW5lclxuICAgICAgICBjb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICAgIC8vIFJ1biBzZXRJbnRlcnZhbCB0byByZWxvYWQgcGFnZSBiYXNlZCBvbiB0aGUgZGF0YSByZWZyZXNoIHZhbHVlXG4gICAgICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy5yZWZyZXNoID4gMCAmJiBfaW50ZXJ2YWxJZCA9PT0gbnVsbCkge1xuICAgICAgICAgIF9pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX2xvYWRGcmFtZSgpO1xuICAgICAgICAgIH0sIF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2gpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgcmVmcmVzaFVSTCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3VubG9hZEZyYW1lKCkge1xuICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1mcmFtZVwiKTtcblxuICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy5yZWZyZXNoID4gMCkge1xuICAgICAgY2xlYXJJbnRlcnZhbChfaW50ZXJ2YWxJZCk7XG4gICAgfVxuXG4gICAgaWYgKGZyYW1lKSB7XG4gICAgICBmcmFtZS5zcmMgPSBcImFib3V0OmJsYW5rXCI7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2JhY2tncm91bmRSZWFkeSgpIHtcbiAgICAvLyBDb25maWd1cmUgdGhlIHZhbHVlIGZvciBfdXJsXG4gICAgX3VybCA9IF9hZGRpdGlvbmFsUGFyYW1zLnVybDtcblxuICAgIC8vIEFkZCBodHRwOi8vIGlmIG5vIHByb3RvY29sIHBhcmFtZXRlciBleGlzdHNcbiAgICBpZiAoX3VybC5pbmRleE9mKFwiOi8vXCIpID09PSAtMSkge1xuICAgICAgX3VybCA9IFwiaHR0cDovL1wiICsgX3VybDtcbiAgICB9XG5cbiAgICBfY29uZmlndXJlUGFnZSgpO1xuICAgIF9yZWFkeSgpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIF91bmxvYWRGcmFtZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBfbG9hZEZyYW1lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIF91bmxvYWRGcmFtZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyhwYXJhbXMpIHtcbiAgICBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gcGFyYW1zO1xuXG4gICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBCYWNrZ3JvdW5kIGluc3RhbmNlXG4gICAgX2JhY2tncm91bmQgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uQmFja2dyb3VuZChfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgX2JhY2tncm91bmQuaW5pdChfYmFja2dyb3VuZFJlYWR5KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2V0QWRkaXRpb25hbFBhcmFtczogc2V0QWRkaXRpb25hbFBhcmFtcyxcbiAgICBwYXVzZTogcGF1c2UsXG4gICAgcGxheTogcGxheSxcbiAgICBzdG9wOiBzdG9wXG4gIH07XG5cbn0pKGRvY3VtZW50LCBnYWRnZXRzKTtcblxuLyogZ2xvYmFsIGNvbmZpZyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5CYWNrZ3JvdW5kID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9jYWxsYmFjayA9IG51bGwsXG4gICAgX3JlYWR5ID0gZmFsc2UsXG4gICAgX2JhY2tncm91bmQgPSBudWxsLFxuICAgIF9zdG9yYWdlID0gbnVsbCxcbiAgICBfcmVmcmVzaER1cmF0aW9uID0gOTAwMDAwLCAvLyAxNSBtaW51dGVzXG4gICAgX2lzU3RvcmFnZUZpbGUgPSBmYWxzZSxcbiAgICBfc2VwYXJhdG9yID0gXCJcIjtcblxuICAvKlxuICAgKiBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9yZWZyZXNoVGltZXIoKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiBiYWNrZ3JvdW5kUmVmcmVzaCgpIHtcbiAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnVybCArIF9zZXBhcmF0b3IgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIilcIjtcbiAgICAgIF9yZWZyZXNoVGltZXIoKTtcbiAgICB9LCBfcmVmcmVzaER1cmF0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9iYWNrZ3JvdW5kUmVhZHkoKSB7XG4gICAgX3JlYWR5ID0gdHJ1ZTtcblxuICAgIGlmIChkYXRhLmJhY2tncm91bmQudXNlSW1hZ2UgJiYgIV9pc1N0b3JhZ2VGaWxlKSB7XG4gICAgICAvLyBzdGFydCB0aGUgcmVmcmVzaCBwb2xsIGZvciBub24tc3RvcmFnZSBiYWNrZ3JvdW5kIGltYWdlXG4gICAgICBfcmVmcmVzaFRpbWVyKCk7XG4gICAgfVxuXG4gICAgaWYgKF9jYWxsYmFjayAmJiB0eXBlb2YgX2NhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIF9jYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9jb25maWd1cmUoKSB7XG4gICAgdmFyIHN0cjtcblxuICAgIF9iYWNrZ3JvdW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kXCIpO1xuICAgIF9zdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kU3RvcmFnZVwiKTtcblxuICAgIC8vIHNldCB0aGUgZG9jdW1lbnQgYmFja2dyb3VuZFxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IGRhdGEuYmFja2dyb3VuZC5jb2xvcjtcblxuICAgIGlmIChfYmFja2dyb3VuZCkge1xuICAgICAgaWYgKGRhdGEuYmFja2dyb3VuZC51c2VJbWFnZSkge1xuICAgICAgICBfYmFja2dyb3VuZC5jbGFzc05hbWUgPSBkYXRhLmJhY2tncm91bmQuaW1hZ2UucG9zaXRpb247XG4gICAgICAgIF9iYWNrZ3JvdW5kLmNsYXNzTmFtZSA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS5zY2FsZSA/IF9iYWNrZ3JvdW5kLmNsYXNzTmFtZSArIFwiIHNjYWxlLXRvLWZpdFwiXG4gICAgICAgICAgOiBfYmFja2dyb3VuZC5jbGFzc05hbWU7XG5cbiAgICAgICAgX2lzU3RvcmFnZUZpbGUgPSAoT2JqZWN0LmtleXMoZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZSkubGVuZ3RoICE9PSAwKTtcblxuICAgICAgICBpZiAoIV9pc1N0b3JhZ2VGaWxlKSB7XG4gICAgICAgICAgc3RyID0gZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnVybC5zcGxpdChcIj9cIik7XG5cbiAgICAgICAgICAvLyBzdG9yZSB0aGlzIGZvciB0aGUgcmVmcmVzaCB0aW1lclxuICAgICAgICAgIF9zZXBhcmF0b3IgPSAoc3RyLmxlbmd0aCA9PT0gMSkgPyBcIj9cIiA6IFwiJlwiO1xuXG4gICAgICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBkYXRhLmJhY2tncm91bmQuaW1hZ2UudXJsICsgXCIpXCI7XG4gICAgICAgICAgX2JhY2tncm91bmRSZWFkeSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChfc3RvcmFnZSkge1xuICAgICAgICAgICAgLy8gUmlzZSBTdG9yYWdlXG4gICAgICAgICAgICBfc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIGlmICghX3JlYWR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuICAgICAgICAgICAgICAgICAgLy8gRXNjYXBlIHNpbmdsZSBxdW90ZXMuXG4gICAgICAgICAgICAgICAgICBfYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIgKyBlLmRldGFpbC51cmwucmVwbGFjZShcIidcIiwgXCJcXFxcJ1wiKSArIFwiJylcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfYmFja2dyb3VuZFJlYWR5KCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgZm9yIFwiY2hhbmdlZFwiIHByb3BlcnR5IGFuZCBlbnN1cmUgaXQgaXMgdHJ1ZVxuICAgICAgICAgICAgICAgICAgaWYgKGUuZGV0YWlsLmhhc093blByb3BlcnR5KFwiY2hhbmdlZFwiKSAmJiBlLmRldGFpbC5jaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVzY2FwZSBzaW5nbGUgcXVvdGVzLlxuICAgICAgICAgICAgICAgICAgICBfYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIgKyBlLmRldGFpbC51cmwucmVwbGFjZShcIidcIiwgXCJcXFxcJ1wiKSArIFwiJylcIjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5mb2xkZXIpO1xuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZU5hbWVcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5maWxlTmFtZSk7XG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5jb21wYW55SWQpO1xuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG4gICAgICAgICAgICBfc3RvcmFnZS5nbygpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1pc3NpbmcgZWxlbWVudCB3aXRoIGlkIHZhbHVlIG9mICdiYWNrZ3JvdW5kU3RvcmFnZSdcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfYmFja2dyb3VuZFJlYWR5KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBlbGVtZW50IHdpdGggaWQgdmFsdWUgb2YgJ2JhY2tncm91bmQnXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdChjYikge1xuICAgIGlmICghX3JlYWR5KSB7XG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgX2NhbGxiYWNrID0gY2I7XG4gICAgICB9XG5cbiAgICAgIF9jb25maWd1cmUoKTtcblxuICAgIH0gZWxzZSBpZiAoY2IgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNiKCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxuLyogZ2xvYmFsIFJpc2VWaXNpb24sIGdhZGdldHMgKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIFJpc2VWaXNpb24uV2ViUGFnZS5zdG9wKCk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRpdGlvbmFsUGFyYW1zKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lc1swXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgUmlzZVZpc2lvbi5XZWJQYWdlLnNldEFkZGl0aW9uYWxQYXJhbXMoSlNPTi5wYXJzZSh2YWx1ZXNbMF0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwb2x5bWVyUmVhZHkoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJXZWJDb21wb25lbnRzUmVhZHlcIiwgcG9seW1lclJlYWR5KTtcblxuICAgIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wbGF5X1wiICsgaWQsIHBsYXkpO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wYXVzZV9cIiArIGlkLCBwYXVzZSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG5cbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImFkZGl0aW9uYWxQYXJhbXNcIl0pO1xuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTYnXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
