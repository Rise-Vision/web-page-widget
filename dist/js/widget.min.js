if("undefined"==typeof config){var config={};"undefined"!=typeof angular&&(angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json"),angular.module("risevision.widget.common.storage-selector.config").value("STORAGE_MODAL","https://storage-stage.risevision.com/rva-test/dist/storage-modal.html#/files/"))}var RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){var t,n,o,i=e.getElementById("webpage-container"),r=e.getElementById("webpage-frame"),a=u.getInt("rsH")/u.getInt("rsW")*100,s=m.scrollHorizontal>0?m.scrollHorizontal:0,l=m.scrollVertical>0?m.scrollVertical:0,c=parseFloat(m.zoom);i&&r&&(t=i.getElementsByClassName("blocker")[0],i.style.visibility="hidden",0!==l&&(a+=l/u.getInt("rsW")*100),i.setAttribute("style","padding-bottom:"+a+"%"),t.style.display=m.interactive?"none":"block",r.setAttribute("scrolling",m.scrollbars?"yes":"no"),n="-ms-zoom:"+c+";-moz-transform: scale("+c+");-moz-transform-origin: 0 0;-o-transform: scale("+c+");-o-transform-origin: 0 0;-webkit-transform: scale("+c+");-webkit-transform-origin: 0 0;",n+="width: "+1/c*100+"%;height: "+1/c*100+"%;",r.setAttribute("style",n),(0!==s||0!==l)&&(o="margin: -"+l+"px 0 0 -"+s+"px;",r.setAttribute("style",n+o)))}function o(){var t=e.getElementById("webpage-frame"),n=e.getElementById("webpage-container"),i=/[?#&]/.test(d),r=Math.ceil(100*Math.random()),a=i?d+"&dummyVar="+r:d+"?dummyVar="+r;n&&t&&(t.onload=function(){t.onload=null,n.style.visibility="visible",m.refresh>0&&null===f&&(f=setInterval(function(){o()},m.refresh))},t.setAttribute("src",a))}function i(){var t=e.getElementById("webpage-frame");m.refresh>0&&clearInterval(f),t&&(t.src="about:blank")}function r(){t.rpc.call("","rsevent_ready",null,u.getString("id"),!0,!0,!0,!0,!1)}function a(){d=m.url,-1===d.indexOf("://")&&(d="http://"+d),n(),r()}function s(){i()}function l(){o()}function c(){i()}function g(e){u=new t.Prefs,m=e,b=new RiseVision.Common.Background(m),b.init(a)}var u=null,m={},d="",f=null,b=null;return{setAdditionalParams:g,pause:s,play:l,stop:c}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function t(){setTimeout(function(){l.style.backgroundImage="url("+e.background.image.url+m+"cb="+(new Date).getTime()+")",t()},g)}function n(){s=!0,e.background.useImage&&!u&&t(),a&&"function"==typeof a&&a()}function o(e){c.removeEventListener("rise-storage-response",o),l.style.backgroundImage=Array.isArray(e.detail)?"url("+e.detail[0]+")":"url("+e.detail+")",n()}function i(){var t;l=document.getElementById("background"),c=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,l?e.background.useImage?(l.className=e.background.image.position,l.className=e.background.image.scale?l.className+" scale-to-fit":l.className,u=0!==Object.keys(e.backgroundStorage).length,u?c?(c.addEventListener("rise-storage-response",o),c.setAttribute("folder",e.backgroundStorage.folder),c.setAttribute("fileName",e.backgroundStorage.fileName),c.setAttribute("companyId",e.backgroundStorage.companyId),c.go()):console.log("Missing element with id value of 'backgroundStorage'"):(t=e.background.image.url.split("?"),m=1===t.length?"?":"&",l.style.backgroundImage="url("+e.background.image.url+")",n())):n():console.log("Missing element with id value of 'background'")}function r(e){s?e&&"function"==typeof e&&e():(e&&(a=e),i())}var a=null,s=!1,l=null,c=null,g=9e5,u=!1,m="";return{init:r}},function(e,t){"use strict";function n(){RiseVision.WebPage.play()}function o(){RiseVision.WebPage.pause()}function i(){RiseVision.WebPage.stop()}function r(e,t){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&RiseVision.WebPage.setAdditionalParams(JSON.parse(t[0]))}var a=new t.Prefs,s=a.getString("id");e.oncontextmenu=function(){return!1},s&&""!==s&&(t.rpc.register("rscmd_play_"+s,n),t.rpc.register("rscmd_pause_"+s,o),t.rpc.register("rscmd_stop_"+s,i),t.rpc.register("rsparam_set_"+s,r),t.rpc.call("","rsparam_get",null,s,["additionalParams"]))}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-41395348-11"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFsdWUiLCJSaXNlVmlzaW9uIiwiV2ViUGFnZSIsImRvY3VtZW50IiwiZ2FkZ2V0cyIsIl9jb25maWd1cmVQYWdlIiwiYmxvY2tlciIsInpvb21TdHlsZSIsIm1hcmdpblN0eWxlIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJmcmFtZSIsImFzcGVjdFJhdGlvIiwiX3ByZWZzIiwiZ2V0SW50Iiwic2Nyb2xsSG9yaXpWYWwiLCJfYWRkaXRpb25hbFBhcmFtcyIsInNjcm9sbEhvcml6b250YWwiLCJzY3JvbGxWZXJ0VmFsIiwic2Nyb2xsVmVydGljYWwiLCJ6b29tIiwicGFyc2VGbG9hdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJzZXRBdHRyaWJ1dGUiLCJkaXNwbGF5IiwiX2xvYWRGcmFtZSIsImhhc1BhcmFtcyIsInRlc3QiLCJfdXJsIiwicmFuZG9tTnVtIiwiTWF0aCIsImNlaWwiLCJyYW5kb20iLCJyZWZyZXNoVVJMIiwib25sb2FkIiwicmVmcmVzaCIsIl9pbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJfdW5sb2FkRnJhbWUiLCJjbGVhckludGVydmFsIiwic3JjIiwiX3JlYWR5IiwicnBjIiwiY2FsbCIsImdldFN0cmluZyIsIl9iYWNrZ3JvdW5kUmVhZHkiLCJ1cmwiLCJpbmRleE9mIiwicGF1c2UiLCJwbGF5Iiwic3RvcCIsInNldEFkZGl0aW9uYWxQYXJhbXMiLCJwYXJhbXMiLCJQcmVmcyIsIl9iYWNrZ3JvdW5kIiwiQ29tbW9uIiwiQmFja2dyb3VuZCIsImluaXQiLCJkYXRhIiwiX3JlZnJlc2hUaW1lciIsInNldFRpbWVvdXQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kIiwiaW1hZ2UiLCJfc2VwYXJhdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJfcmVmcmVzaER1cmF0aW9uIiwidXNlSW1hZ2UiLCJfaXNTdG9yYWdlRmlsZSIsIl9jYWxsYmFjayIsIl9zdG9yYWdlUmVzcG9uc2UiLCJlIiwiX3N0b3JhZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiQXJyYXkiLCJpc0FycmF5IiwiZGV0YWlsIiwiX2NvbmZpZ3VyZSIsInN0ciIsImJvZHkiLCJjb2xvciIsImNsYXNzTmFtZSIsInBvc2l0aW9uIiwic2NhbGUiLCJPYmplY3QiLCJrZXlzIiwiYmFja2dyb3VuZFN0b3JhZ2UiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZm9sZGVyIiwiZmlsZU5hbWUiLCJjb21wYW55SWQiLCJnbyIsImNvbnNvbGUiLCJsb2ciLCJzcGxpdCIsImNiIiwid2luZG93IiwiYWRkaXRpb25hbFBhcmFtcyIsIm5hbWVzIiwidmFsdWVzIiwiSlNPTiIsInBhcnNlIiwicHJlZnMiLCJpZCIsIm9uY29udGV4dG1lbnUiLCJyZWdpc3RlciIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImFzeW5jIiwibG9jYXRpb24iLCJwcm90b2NvbCIsInMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUVBLEdBQXNCLG1CQUFYQSxRQUF3QixDQUNqQyxHQUFJQSxVQUltQixvQkFBWkMsV0FDVEEsUUFBUUMsT0FBTyxvQ0FDWkMsU0FBUyxpQkFBa0IsdURBQzNCQSxTQUFTLGdCQUFpQixTQUU3QkYsUUFBUUMsT0FBTyxvREFDWkUsTUFBTSxnQkFBaUIsa0ZBTTlCLEdBQUlDLFlBQWFBLGNBQ2pCQSxZQUFXQyxXQUVYRCxXQUFXQyxRQUFVLFNBQVdDLEVBQVVDLEdBRXhDLFlBYUEsU0FBU0MsS0FDUCxHQVFFQyxHQUFTQyxFQUFXQyxFQVJsQkMsRUFBWU4sRUFBU08sZUFBZSxxQkFDdENDLEVBQVFSLEVBQVNPLGVBQWUsaUJBQ2hDRSxFQUFnQkMsRUFBT0MsT0FBTyxPQUFTRCxFQUFP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LE9BQVEsRUFDbkZILEVBQUd0RSxLQUFPLFVBQVl2QyxTQUFTaUgsU0FBU0MsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSW5ILFNBQVNvSCxxQkFBcUIsVUFBVSxFQUFJRCxHQUFFRSxXQUFXQyxhQUFhVCxFQUFJTSIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGNvbmZpZzogdHJ1ZSAqL1xuLyogZXhwb3J0ZWQgY29uZmlnICovXG5pZiAodHlwZW9mIGNvbmZpZyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgY29uZmlnID0ge1xuICAgIC8vIHZhcmlhYmxlcyBnbyBoZXJlXG4gIH07XG5cbiAgaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAgIC5jb25zdGFudChcIkxPQ0FMRVNfUFJFRklYXCIsIFwiY29tcG9uZW50cy9ydi1jb21tb24taTE4bi9kaXN0L2xvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24ud2lkZ2V0LmNvbW1vbi5zdG9yYWdlLXNlbGVjdG9yLmNvbmZpZ1wiKVxuICAgICAgLnZhbHVlKFwiU1RPUkFHRV9NT0RBTFwiLCBcImh0dHBzOi8vc3RvcmFnZS1zdGFnZS5yaXNldmlzaW9uLmNvbS9ydmEtdGVzdC9kaXN0L3N0b3JhZ2UtbW9kYWwuaHRtbCMvZmlsZXMvXCIpO1xuICB9XG59XG5cbi8qIGdsb2JhbCBnYWRnZXRzICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uV2ViUGFnZSA9IHt9O1xuXG5SaXNlVmlzaW9uLldlYlBhZ2UgPSAoZnVuY3Rpb24gKGRvY3VtZW50LCBnYWRnZXRzKSB7XG5cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gcHJpdmF0ZSB2YXJpYWJsZXNcbiAgdmFyIF9wcmVmcyA9IG51bGwsXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSB7fSxcbiAgICBfdXJsID0gXCJcIixcbiAgICBfaW50ZXJ2YWxJZCA9IG51bGwsXG4gICAgX2JhY2tncm91bmQgPSBudWxsO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgZnVuY3Rpb24gX2NvbmZpZ3VyZVBhZ2UoKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1jb250YWluZXJcIiksXG4gICAgICBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1mcmFtZVwiKSxcbiAgICAgIGFzcGVjdFJhdGlvID0gIChfcHJlZnMuZ2V0SW50KFwicnNIXCIpIC8gX3ByZWZzLmdldEludChcInJzV1wiKSkgKiAxMDAsXG4gICAgICBzY3JvbGxIb3JpelZhbCA9IChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxIb3Jpem9udGFsID4gMCkgP1xuICAgICAgICAgIF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbEhvcml6b250YWwgOiAwLFxuICAgICAgc2Nyb2xsVmVydFZhbCA9IChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxWZXJ0aWNhbCA+IDApID9cbiAgICAgICAgICBfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxWZXJ0aWNhbCA6IDAsXG4gICAgICB6b29tID0gcGFyc2VGbG9hdChfYWRkaXRpb25hbFBhcmFtcy56b29tKSxcbiAgICAgIGJsb2NrZXIsIHpvb21TdHlsZSwgbWFyZ2luU3R5bGU7XG5cbiAgICBpZiAoY29udGFpbmVyICYmIGZyYW1lKSB7XG4gICAgICBibG9ja2VyID0gY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJibG9ja2VyXCIpWzBdO1xuXG4gICAgICAvLyBIaWRpbmcgaWZyYW1lIGNvbnRhaW5lciwgdmlzaWJsZSB3aGVuIHRoZSBpZnJhbWUgc3VjY2Vzc2Z1bGx5IGxvYWRzXG4gICAgICBjb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgIC8vIHNldCB0aGUgcGFkZGluZy1ib3R0b20gd2l0aCB0aGUgYXNwZWN0IHJhdGlvICUgKHJlc3BvbnNpdmUpXG4gICAgICBpZiAoc2Nyb2xsVmVydFZhbCAhPT0gMCkge1xuICAgICAgICAvLyByZWNhbGN1bGF0ZSBhc3BlY3QgcmF0aW9cbiAgICAgICAgYXNwZWN0UmF0aW8gKz0gKHNjcm9sbFZlcnRWYWwgLyBfcHJlZnMuZ2V0SW50KFwicnNXXCIpKSAqIDEwMDtcbiAgICAgIH1cbiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBhZGRpbmctYm90dG9tOlwiICsgYXNwZWN0UmF0aW8gKyBcIiVcIik7XG5cbiAgICAgIC8vIENvbmZpZ3VyZSBpbnRlcmFjdGl2aXR5IG9mIGlmcmFtZVxuICAgICAgYmxvY2tlci5zdHlsZS5kaXNwbGF5ID0gKF9hZGRpdGlvbmFsUGFyYW1zLmludGVyYWN0aXZlKSA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic2Nyb2xsaW5nXCIsXG4gICAgICAgIChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxiYXJzKSA/IFwieWVzXCIgOiBcIm5vXCIpO1xuXG4gICAgICAvLyBDb25maWd1cmUgdGhlIHpvb20gKHNjYWxlKSBzdHlsaW5nXG4gICAgICB6b29tU3R5bGUgPSBcIi1tcy16b29tOlwiICsgem9vbSArIFwiO1wiICtcbiAgICAgICAgXCItbW96LXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgICAgXCItbW96LXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIiArXG4gICAgICAgIFwiLW8tdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgICBcIi1vLXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIiArXG4gICAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCI7XG5cbiAgICAgIHpvb21TdHlsZSArPSBcIndpZHRoOiBcIiArICgoMSAvIHpvb20pICogMTAwKSArIFwiJTtcIiArXG4gICAgICBcImhlaWdodDogXCIgKyAoKDEgLyB6b29tKSAqIDEwMCkgKyBcIiU7XCI7XG5cbiAgICAgIC8vIEFwcGx5IHRoZSB6b29tIChzY2FsZSkgb24gdGhlIGlmcmFtZVxuICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgem9vbVN0eWxlKTtcblxuICAgICAgaWYgKHNjcm9sbEhvcml6VmFsICE9PSAwIHx8IHNjcm9sbFZlcnRWYWwgIT09IDApIHtcbiAgICAgICAgLy8gQ29uZmlndXJlIHRoZSBtYXJnaW4gc3R5bGluZ1xuICAgICAgICBtYXJnaW5TdHlsZSA9IFwibWFyZ2luOiBcIiArIFwiLVwiICsgc2Nyb2xsVmVydFZhbCArIFwicHggMCAwIC1cIiArXG4gICAgICAgICAgc2Nyb2xsSG9yaXpWYWwgKyBcInB4O1wiO1xuXG4gICAgICAgIC8qIEFwcGx5IHRoZSBtYXJnaW4gc3R5bGluZyBvbiB0aGUgaWZyYW1lIHdoaWxlIG1haW50YWluaW5nXG4gICAgICAgICB0aGUgem9vbSBzdHlsaW5nICovXG4gICAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIHpvb21TdHlsZSArIG1hcmdpblN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfbG9hZEZyYW1lKCkge1xuICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1mcmFtZVwiKSxcbiAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1jb250YWluZXJcIiksXG4gICAgICBoYXNQYXJhbXMgPSAvWz8jJl0vLnRlc3QoX3VybCksXG4gICAgICByYW5kb21OdW0gPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwMCksXG4gICAgICByZWZyZXNoVVJMID0gaGFzUGFyYW1zID9cbiAgICAgICAgICBfdXJsICsgXCImZHVtbXlWYXI9XCIgKyByYW5kb21OdW0gOlxuICAgICAgICAgIF91cmwgKyBcIj9kdW1teVZhcj1cIiArIHJhbmRvbU51bTtcblxuICAgIGlmIChjb250YWluZXIgJiYgZnJhbWUpIHtcbiAgICAgIGZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhbWUub25sb2FkID0gbnVsbDtcblxuICAgICAgICAvLyBTaG93IHRoZSBpZnJhbWUgY29udGFpbmVyXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cbiAgICAgICAgLy8gUnVuIHNldEludGVydmFsIHRvIHJlbG9hZCBwYWdlIGJhc2VkIG9uIHRoZSBkYXRhIHJlZnJlc2ggdmFsdWVcbiAgICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2ggPiAwICYmIF9pbnRlcnZhbElkID09PSBudWxsKSB7XG4gICAgICAgICAgX2ludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfbG9hZEZyYW1lKCk7XG4gICAgICAgICAgfSwgX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCByZWZyZXNoVVJMKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfdW5sb2FkRnJhbWUoKSB7XG4gICAgdmFyIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWZyYW1lXCIpO1xuXG4gICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2ggPiAwKSB7XG4gICAgICBjbGVhckludGVydmFsKF9pbnRlcnZhbElkKTtcbiAgICB9XG5cbiAgICBpZiAoZnJhbWUpIHtcbiAgICAgIGZyYW1lLnNyYyA9IFwiYWJvdXQ6YmxhbmtcIjtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfYmFja2dyb3VuZFJlYWR5KCkge1xuICAgIC8vIENvbmZpZ3VyZSB0aGUgdmFsdWUgZm9yIF91cmxcbiAgICBfdXJsID0gX2FkZGl0aW9uYWxQYXJhbXMudXJsO1xuXG4gICAgLy8gQWRkIGh0dHA6Ly8gaWYgbm8gcHJvdG9jb2wgcGFyYW1ldGVyIGV4aXN0c1xuICAgIGlmIChfdXJsLmluZGV4T2YoXCI6Ly9cIikgPT09IC0xKSB7XG4gICAgICBfdXJsID0gXCJodHRwOi8vXCIgKyBfdXJsO1xuICAgIH1cblxuICAgIF9jb25maWd1cmVQYWdlKCk7XG4gICAgX3JlYWR5KCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgX3VubG9hZEZyYW1lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIF9sb2FkRnJhbWUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgX3VubG9hZEZyYW1lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBZGRpdGlvbmFsUGFyYW1zKHBhcmFtcykge1xuICAgIF9wcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCk7XG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIEJhY2tncm91bmQgaW5zdGFuY2VcbiAgICBfYmFja2dyb3VuZCA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5CYWNrZ3JvdW5kKF9hZGRpdGlvbmFsUGFyYW1zKTtcbiAgICBfYmFja2dyb3VuZC5pbml0KF9iYWNrZ3JvdW5kUmVhZHkpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRBZGRpdGlvbmFsUGFyYW1zOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIHBhdXNlOiBwYXVzZSxcbiAgICBwbGF5OiBwbGF5LFxuICAgIHN0b3A6IHN0b3BcbiAgfTtcblxufSkoZG9jdW1lbnQsIGdhZGdldHMpO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5CYWNrZ3JvdW5kID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9jYWxsYmFjayA9IG51bGwsXG4gICAgX3JlYWR5ID0gZmFsc2UsXG4gICAgX2JhY2tncm91bmQgPSBudWxsLFxuICAgIF9zdG9yYWdlID0gbnVsbCxcbiAgICBfcmVmcmVzaER1cmF0aW9uID0gOTAwMDAwLCAvLyAxNSBtaW51dGVzXG4gICAgX2lzU3RvcmFnZUZpbGUgPSBmYWxzZSxcbiAgICBfc2VwYXJhdG9yID0gXCJcIjtcblxuICAvKlxuICAgKiBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9yZWZyZXNoVGltZXIoKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiBiYWNrZ3JvdW5kUmVmcmVzaCgpIHtcbiAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnVybCArIF9zZXBhcmF0b3IgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIilcIjtcbiAgICAgIF9yZWZyZXNoVGltZXIoKTtcbiAgICB9LCBfcmVmcmVzaER1cmF0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9iYWNrZ3JvdW5kUmVhZHkoKSB7XG4gICAgX3JlYWR5ID0gdHJ1ZTtcblxuICAgIGlmIChkYXRhLmJhY2tncm91bmQudXNlSW1hZ2UgJiYgIV9pc1N0b3JhZ2VGaWxlKSB7XG4gICAgICAvLyBzdGFydCB0aGUgcmVmcmVzaCBwb2xsIGZvciBub24tc3RvcmFnZSBiYWNrZ3JvdW5kIGltYWdlXG4gICAgICBfcmVmcmVzaFRpbWVyKCk7XG4gICAgfVxuXG4gICAgaWYgKF9jYWxsYmFjayAmJiB0eXBlb2YgX2NhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIF9jYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdG9yYWdlUmVzcG9uc2UoZSkge1xuICAgIF9zdG9yYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgX3N0b3JhZ2VSZXNwb25zZSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShlLmRldGFpbCkpIHtcbiAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZS5kZXRhaWxbMF0gKyBcIilcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBlLmRldGFpbCArIFwiKVwiO1xuICAgIH1cbiAgICBfYmFja2dyb3VuZFJlYWR5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBfY29uZmlndXJlKCkge1xuICAgIHZhciBzdHI7XG5cbiAgICBfYmFja2dyb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZFwiKTtcbiAgICBfc3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZFN0b3JhZ2VcIik7XG5cbiAgICAvLyBzZXQgdGhlIGRvY3VtZW50IGJhY2tncm91bmRcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmQgPSBkYXRhLmJhY2tncm91bmQuY29sb3I7XG5cbiAgICBpZiAoX2JhY2tncm91bmQpIHtcbiAgICAgIGlmIChkYXRhLmJhY2tncm91bmQudXNlSW1hZ2UpIHtcbiAgICAgICAgX2JhY2tncm91bmQuY2xhc3NOYW1lID0gZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnBvc2l0aW9uO1xuICAgICAgICBfYmFja2dyb3VuZC5jbGFzc05hbWUgPSBkYXRhLmJhY2tncm91bmQuaW1hZ2Uuc2NhbGUgPyBfYmFja2dyb3VuZC5jbGFzc05hbWUgKyBcIiBzY2FsZS10by1maXRcIlxuICAgICAgICAgIDogX2JhY2tncm91bmQuY2xhc3NOYW1lO1xuXG4gICAgICAgIF9pc1N0b3JhZ2VGaWxlID0gKE9iamVjdC5rZXlzKGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UpLmxlbmd0aCAhPT0gMCk7XG5cbiAgICAgICAgaWYgKCFfaXNTdG9yYWdlRmlsZSkge1xuICAgICAgICAgIHN0ciA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS51cmwuc3BsaXQoXCI/XCIpO1xuXG4gICAgICAgICAgLy8gc3RvcmUgdGhpcyBmb3IgdGhlIHJlZnJlc2ggdGltZXJcbiAgICAgICAgICBfc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcblxuICAgICAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnVybCArIFwiKVwiO1xuICAgICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoX3N0b3JhZ2UpIHtcbiAgICAgICAgICAgIC8vIFJpc2UgU3RvcmFnZVxuICAgICAgICAgICAgX3N0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBfc3RvcmFnZVJlc3BvbnNlKTtcblxuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuZm9sZGVyKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVOYW1lXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLmdvKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBlbGVtZW50IHdpdGggaWQgdmFsdWUgb2YgJ2JhY2tncm91bmRTdG9yYWdlJ1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIGVsZW1lbnQgd2l0aCBpZCB2YWx1ZSBvZiAnYmFja2dyb3VuZCdcIik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KGNiKSB7XG4gICAgaWYgKCFfcmVhZHkpIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBfY2FsbGJhY2sgPSBjYjtcbiAgICAgIH1cblxuICAgICAgX2NvbmZpZ3VyZSgpO1xuXG4gICAgfSBlbHNlIGlmIChjYiAmJiB0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgUmlzZVZpc2lvbiwgZ2FkZ2V0cyAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLFxuICAgIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uV2ViUGFnZS5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZGl0aW9uYWxQYXJhbXMobmFtZXMsIHZhbHVlcykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIG5hbWVzWzBdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBSaXNlVmlzaW9uLldlYlBhZ2Uuc2V0QWRkaXRpb25hbFBhcmFtcyhKU09OLnBhcnNlKHZhbHVlc1swXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG5cbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIGFkZGl0aW9uYWxQYXJhbXMpO1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gIH1cblxufSkod2luZG93LCBnYWRnZXRzKTtcblxuXG5cbi8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbnZhciBfZ2FxID0gX2dhcSB8fCBbXTtcblxuX2dhcS5wdXNoKFsnX3NldEFjY291bnQnLCAnVUEtNDEzOTUzNDgtMTEnXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9