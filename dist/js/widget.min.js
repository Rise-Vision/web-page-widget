var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,t){var o=null;e.event?(o=e,o.file_url&&(o.file_format=n(o.file_url)),o.company_id=a,o.display_id=s,t(o)):t(o)}function t(){var e=new Date,t=e.getUTCFullYear(),n=e.getUTCMonth()+1,o=e.getUTCDate();return 10>n&&(n="0"+n),10>o&&(o="0"+o),t+n+o}function n(e){var t,n=/[?#&]/;return e&&"string"==typeof e?(t=e.substr(e.lastIndexOf(".")+1),n.test(t)&&(t=t.substr(0,-1!==t.indexOf("?")?t.indexOf("?"):t.length),t=t.substr(0,-1!==t.indexOf("#")?t.indexOf("#"):t.length),t=t.substr(0,-1!==t.indexOf("&")?t.indexOf("&"):t.length)),t.toLowerCase()):null}function o(e){var n={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:t(),rows:[{insertId:""}]},o=JSON.parse(JSON.stringify(n));return o.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),o.rows[0].json=JSON.parse(JSON.stringify(e)),o.rows[0].json.ts=(new Date).toISOString(),o}function i(t,n){e(n,function(e){null!==e&&RiseVision.Common.Logger.log(t,e)})}function r(e,t){a=e,s=t}var s="",a="";return{getInsertData:o,getFileFormat:n,logEvent:i,setIds:r}}(),RiseVision.Common.Logger=function(e){"use strict";function t(e){var t=new XMLHttpRequest;return new Date-c<358e4?e({}):(t.open("POST",i,!0),t.onloadend=function(){var n=JSON.parse(t.response);e({token:n.access_token,refreshedAt:new Date})},t.send(),void 0)}function n(e){return s&&l===e}function o(o,i){function f(t){var n,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",o),c=t.refreshedAt||c,u=t.token||u,n=e.getInsertData(i),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),i.cb&&"function"==typeof i.cb&&(a.onloadend=function(){i.cb(a.response)}),a.send(JSON.stringify(n))}if(!(!o||!i||i.hasOwnProperty("event")&&!i.event||i.hasOwnProperty("event")&&n(i.event)))return s=!0,l=i.event,setTimeout(function(){s=!1},a),t(f)}var i="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",c=0,u="";return{log:o}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,t){var n="font-family: "+decodeURIComponent(t.font.family).replace(/'/g,"")+"; ",o="color: "+(t.color?t.color:t.forecolor)+"; ",i="font-size: "+(-1===t.size.indexOf("px")?t.size+"px; ":t.size+"; "),r="font-weight: "+(t.bold?"bold":"normal")+"; ",s="font-style: "+(t.italic?"italic":"normal")+"; ",a="text-decoration: "+(t.underline?"underline":"none")+"; ",l="background-color: "+(t.highlightColor?t.highlightColor:t.backcolor)+";";return"."+e+" {"+n+o+i+r+s+a+l+"}"}function t(e){for(var t=document.createElement("style"),n=0,o=e.length;o>n;n++)t.appendChild(document.createTextNode(e[n]));document.head.appendChild(t)}function n(n,r){function s(){r&&"function"==typeof r&&r()}function a(){s()}var l=null,c=[],u=[],f=[];if(!n||0===n.length)return s(),void 0;n.forEach(function(n){n.class&&n.fontStyle&&t([e(n.class,n.fontStyle)])});for(var g=0;g<n.length;g++)n[g].fontStyle&&n[g].fontStyle.font.type&&"google"===n[g].fontStyle.font.type&&(l=n[g].fontStyle.font.family.split(",")[0],l=l.replace(/'/g,""),c.push(l));for(g=0;g<n.length;g++)n[g].fontStyle&&n[g].fontStyle.font.type&&"custom"===n[g].fontStyle.font.type&&(u.push(decodeURIComponent(n[g].fontStyle.font.family).replace(/'/g,"")),f.push(n[g].fontStyle.font.url.replace(/'/g,"\\'")));if(0===c.length&&0===u.length)s();else{for(var d=0;d<u.length;d+=1)o(u[d],f[d]);c.length>0?i(c,a):s()}}function o(e,t,n){var o=null,i="font-family: "+e+"; src: url('"+t+"');";n=n||document,o=n.styleSheets[0],null!==o&&o.addRule("@font-face",i)}function i(e,t){WebFont.load({google:{families:e},active:function(){t&&"function"==typeof t&&t()},inactive:function(){t&&"function"==typeof t&&t()},timeout:2e3})}function r(e){for(var t=e.length,n=[],o=0;t>o;o++)n[o]=new Image,n[o].src=e[o]}function s(e){for(var t,n=window.location.search.substring(1),o=n.split("&"),i=0;i<o.length;i++)if(t=o[i].split("="),t[0]==e)return decodeURIComponent(t[1]);return""}function a(e){var t="";switch(e){case 404:t="The file does not exist or cannot be accessed.";break;case 507:t="There is not enough disk space to save the file on Rise Cache.";break;default:t="There was a problem retrieving the file from Rise Cache."}return t}function l(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent}function c(e,t){var n=new XMLHttpRequest;if(e&&t&&"function"==typeof t){n.open("HEAD",e+"?cb="+(new Date).getTime(),!1);try{n.send(),t(n.status>=200&&n.status<304)}catch(o){t(!1)}}}return{getQueryParameter:s,getFontCssStyle:e,addCSSRules:t,loadFonts:n,loadCustomFont:o,loadGoogleFonts:i,preloadImages:r,getRiseCacheErrorMessage:a,unescapeHTML:l,hasInternetConnection:c}}(),"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){t.rpc.call("","rsevent_ready",null,C.getString("id"),!0,!0,!0,!0,!1)}function o(t){var n=e.querySelector(".blocker");n.style.display=R.interactivity.interactive?"none":"block",t.setAttribute("scrolling",R.interactivity.interactive&&R.interactivity.scrollbars?"yes":"no")}function i(){var t=e.getElementById("container"),n=e.querySelector(".webpage-frame"),i=C.getInt("rsH")/C.getInt("rsW")*100;t&&n&&(o(n),s(n),r(n),0!==w&&(i+=w/C.getInt("rsW")*100),t.setAttribute("style","padding-bottom:"+i+"%"))}function r(e){var t=parseFloat(R.zoom),n="",o="";o="-ms-zoom:"+t+";-moz-transform: scale("+t+");-moz-transform-origin: 0 0;-o-transform: scale("+t+");-o-transform-origin: 0 0;-webkit-transform: scale("+t+");-webkit-transform-origin: 0 0;transform: scale("+t+");transform-origin: 0 0;",n=e.getAttribute("style"),o+="width: "+1/t*100+"%;height: "+1/t*100+"%;",n&&(o=n+o),e.setAttribute("style",o)}function s(e){var t="",n="",o=0;R.region&&R.region.showRegion&&"region"===R.region.showRegion&&(R.region.horizontal>0&&(o=R.region.horizontal),R.region.vertical>0&&(w=R.region.vertical),(0!==o||0!==w)&&(t=e.getAttribute("style"),n="margin: -"+w+"px 0 0 -"+o+"px;",t&&(n=t+n),e.setAttribute("style",n)))}function a(){E=setInterval(function(){b.hasInternetConnection("img/transparent.png",function(e){e&&u()})},R.refresh)}function l(){var t=e.getElementById("container"),n=e.createElement("iframe");return n.className="webpage-frame",n.style.visibility="hidden",n.setAttribute("frameborder","0"),n.setAttribute("allowTransparency","true"),o(n),s(n),r(n),n.onload=function(){this.onload=null,this.style.visibility="visible",t.removeChild(e.querySelector(".webpage-frame"))},n.setAttribute("src",_),n}function c(){var t=e.querySelector(".webpage-frame");t.onload=function(){this.onload=null,I=!1,R.refresh>0&&null===E&&a()},t.setAttribute("src",_)}function u(){var t=e.getElementById("container"),n=e.createDocumentFragment(),o=l();n.appendChild(o),t.appendChild(n)}function f(){var t=e.querySelector(".webpage-frame");R.refresh>0&&clearInterval(E),t&&(t.src="about:blank")}function g(){O=new RiseVision.Common.Message(e.getElementById("container"),e.getElementById("messageContainer")),e.getElementById("messageContainer").style.height=C.getInt("rsH")+"px",_=R.url,-1===_.indexOf("://")&&(_="http://"+_),i(),n()}function d(){return"webpage_events"}function m(e){RiseVision.Common.LoggerUtils.logEvent(d(),e)}function p(){R.unload&&f()}function y(){m({event:"play",url:_}),(I||R.unload)&&c()}function h(){p()}function v(e){R=JSON.parse(JSON.stringify(e)),g()}var C=new t.Prefs,b=RiseVision.Common.Utilities,R=null,_="",w=0,E=null,I=!0,O=null;return{getTableName:d,logEvent:m,setAdditionalParams:v,pause:p,play:y,stop:h}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function n(){try{t.style.height=e.style.height}catch(n){console.warn("Can't initialize Message - ",n.message)}}function o(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",r=!1}}function i(n){var o,i=document.createDocumentFragment();r?(o=t.querySelector(".message"),o.innerHTML=n):(e.style.visibility="hidden",t.style.display="block",o=document.createElement("p"),o.innerHTML=n,o.setAttribute("class","message"),i.appendChild(o),t.appendChild(i),r=!0)}var r=!1;return n(),{hide:o,show:i}},function(e,t,n){"use strict";function o(e,t){var n,o="",i="";Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(o=t[0]),"displayId"===e[1]&&(i=t[1]?t[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,i),"additionalParams"===e[2]&&(n=JSON.parse(t[2]),RiseVision.WebPage.setAdditionalParams(n)))}function i(){RiseVision.WebPage.play()}function r(){RiseVision.WebPage.pause()}function s(){RiseVision.WebPage.stop()}var a=(new n.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},a&&""!==a&&(n.rpc.register("rscmd_play_"+a,i),n.rpc.register("rscmd_pause_"+a,r),n.rpc.register("rscmd_stop_"+a,s),n.rpc.register("rsparam_set_"+a,o),n.rpc.call("","rsparam_get",null,a,["companyId","displayId","additionalParams"]))}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-6"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdldEV2ZW50UGFyYW1zIiwicGFyYW1zIiwiY2IiLCJqc29uIiwiZXZlbnQiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiZ2V0RmlsZUZvcm1hdCIsImNvbXBhbnlfaWQiLCJjb21wYW55SWQiLCJkaXNwbGF5X2lkIiwiZGlzcGxheUlkIiwiZ2V0U3VmZml4IiwiZGF0ZSIsIkRhdGUiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJtb250aCIsImdldFVUQ01vbnRoIiwiZGF5IiwiZ2V0VVRDRGF0ZSIsInVybCIsInN0ciIsImhhc1BhcmFtcyIsInN1YnN0ciIsImxhc3RJbmRleE9mIiwidGVzdCIsImluZGV4T2YiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsImdldEluc2VydERhdGEiLCJCQVNFX0lOU0VSVF9TQ0hFTUEiLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsInRlbXBsYXRlU3VmZml4Iiwicm93cyIsImluc2VydElkIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwidHMiLCJ0b0lTT1N0cmluZyIsImxvZ0V2ZW50IiwidGFibGUiLCJMb2dnZXIiLCJsb2ciLCJzZXRJZHMiLCJjb21wYW55IiwiZGlzcGxheSIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJ0aHJvdHRsZSIsImxhc3RFdmVudCIsInRhYmxlTmFtZSIsImluc2VydFdpdGhUb2tlbiIsInJlZnJlc2hEYXRhIiwiaW5zZXJ0RGF0YSIsInNlcnZpY2VVcmwiLCJyZXBsYWNlIiwic2V0UmVxdWVzdEhlYWRlciIsImhhc093blByb3BlcnR5Iiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJVdGlsaXRpZXMiLCJnZXRGb250Q3NzU3R5bGUiLCJjbGFzc05hbWUiLCJmb250T2JqIiwiZmFtaWx5IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZm9udCIsImNvbG9yIiwiZm9yZWNvbG9yIiwic2l6ZSIsIndlaWdodCIsImJvbGQiLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJoaWdobGlnaHQiLCJoaWdobGlnaHRDb2xvciIsImJhY2tjb2xvciIsImFkZENTU1J1bGVzIiwicnVsZXMiLCJzdHlsZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImkiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiaGVhZCIsImxvYWRGb250cyIsInNldHRpbmdzIiwiY2FsbGJhY2siLCJvbkdvb2dsZUZvbnRzTG9hZGVkIiwiZmFtaWxpZXMiLCJnb29nbGVGYW1pbGllcyIsImN1c3RvbUZhbWlsaWVzIiwiY3VzdG9tVXJscyIsImZvckVhY2giLCJpdGVtIiwiY2xhc3MiLCJmb250U3R5bGUiLCJ0eXBlIiwic3BsaXQiLCJwdXNoIiwiaiIsImxvYWRDdXN0b21Gb250IiwibG9hZEdvb2dsZUZvbnRzIiwiY29udGVudERvYyIsInNoZWV0IiwicnVsZSIsInN0eWxlU2hlZXRzIiwiYWRkUnVsZSIsIldlYkZvbnQiLCJsb2FkIiwiZ29vZ2xlIiwiYWN0aXZlIiwiaW5hY3RpdmUiLCJ0aW1lb3V0IiwicHJlbG9hZEltYWdlcyIsInVybHMiLCJpbWFnZXMiLCJJbWFnZSIsInNyYyIsImdldFF1ZXJ5UGFyYW1ldGVyIiwicGFyYW0iLCJwYWlyIiwicXVlcnkiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsInZhcnMiLCJnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiZXJyb3JNZXNzYWdlIiwidW5lc2NhcGVIVE1MIiwiaHRtbCIsImRpdiIsImlubmVySFRNTCIsInRleHRDb250ZW50IiwiaGFzSW50ZXJuZXRDb25uZWN0aW9uIiwiZmlsZVBhdGgiLCJnZXRUaW1lIiwic3RhdHVzIiwiZSIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25zdGFudCIsImNvbmZpZyIsIldlYlBhZ2UiLCJnYWRnZXRzIiwiX3JlYWR5IiwicnBjIiwiY2FsbCIsIl9wcmVmcyIsImdldFN0cmluZyIsIl9zZXRJbnRlcmFjdGl2aXR5IiwiZnJhbWUiLCJibG9ja2VyIiwicXVlcnlTZWxlY3RvciIsIl9hZGRpdGlvbmFsUGFyYW1zIiwiaW50ZXJhY3Rpdml0eSIsInNldEF0dHJpYnV0ZSIsImludGVyYWN0aXZlIiwic2Nyb2xsYmFycyIsIl9jb25maWd1cmVQYWdlIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJhc3BlY3RSYXRpbyIsImdldEludCIsIl9zZXRSZWdpb24iLCJfc2V0Wm9vbSIsIl92ZXJ0aWNhbCIsInpvb20iLCJwYXJzZUZsb2F0IiwiY3VycmVudFN0eWxlIiwiem9vbVN0eWxlIiwiZ2V0QXR0cmlidXRlIiwibWFyZ2luU3R5bGUiLCJob3Jpem9udGFsIiwicmVnaW9uIiwic2hvd1JlZ2lvbiIsInZlcnRpY2FsIiwiX3N0YXJ0UmVmcmVzaEludGVydmFsIiwiX2ludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl91dGlscyIsImhhc0ludGVybmV0IiwiX3JlZnJlc2hGcmFtZSIsInJlZnJlc2giLCJfZ2V0RnJhbWVFbGVtZW50IiwidmlzaWJpbGl0eSIsIm9ubG9hZCIsInRoaXMiLCJyZW1vdmVDaGlsZCIsIl91cmwiLCJfbG9hZEZyYW1lIiwiX2luaXRpYWxMb2FkIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiX3VubG9hZEZyYW1lIiwiY2xlYXJJbnRlcnZhbCIsIl9pbml0IiwiX21lc3NhZ2UiLCJNZXNzYWdlIiwiaGVpZ2h0IiwiZ2V0VGFibGVOYW1lIiwicGF1c2UiLCJ1bmxvYWQiLCJwbGF5Iiwic3RvcCIsInNldEFkZGl0aW9uYWxQYXJhbXMiLCJhZGRpdGlvbmFsUGFyYW1zIiwiUHJlZnMiLCJtYWluQ29udGFpbmVyIiwibWVzc2FnZUNvbnRhaW5lciIsImNvbnNvbGUiLCJ3YXJuIiwibWVzc2FnZSIsImhpZGUiLCJfYWN0aXZlIiwiZmlyc3RDaGlsZCIsInNob3ciLCJwIiwiY29uZmlndXJlIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJpZCIsIm9uY29udGV4dG1lbnUiLCJib2R5Iiwib25tb3VzZWRvd24iLCJyZWdpc3RlciIsIl9nYXEiLCJnYSIsImFzeW5jIiwicHJvdG9jb2wiLCJzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiQUFDQSxHQUFJQSx1QkFDRkMsY0FBZSxpQkFDZkMsaUJBQWtCLDRFQUNsQkMscUJBQXNCLDJCQUN0QkMscUJBQXNCLHFFQUN0QkMsWUFBYSxPQUNiQyxVQUFXLDZDQUlUQyxXQUFhQSxjQUNqQkEsWUFBV0MsT0FBU0QsV0FBV0MsV0FFL0JELFdBQVdDLE9BQU9DLFlBQWMsV0FDOUIsWUFVQSxTQUFTQyxHQUFlQyxFQUFRQyxHQUM5QixHQUFJQyxHQUFPLElBR1BGLEdBQU9HLE9BQ1RELEVBQU9GLEVBRUhFLEVBQUtFLFdBQ1BGLEVBQUtHLFlBQWNDLEVBQWNKLEVBQUtFLFdBR3hDRixFQUFLSyxXQUFhQyxFQUNsQk4sRUFBS08sV0FBYUMsRUFFbEJULEVBQUdDLElBR0hELEVBQUdDLEdBS1AsUUFBU1MsS0FDUCxHQUFJQyxHQUFPLEdBQUlDLE1BQ2JDLEVBQU9GLEVB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N0MsUUFBU0gsS0FDUHZPLFdBQVcySyxRQUFRNEQsT0FHckIsUUFBU0YsS0FDUHJPLFdBQVcySyxRQUFRMEQsUUFHckIsUUFBU0csS0FDUHhPLFdBQVcySyxRQUFRNkQsT0FyRHJCLEdBQUltQixJQUFLLEdBQUkvRSxHQUFRK0QsT0FBUTFELFVBQVUsS0FHdkM1QixHQUFPdUcsY0FBZ0IsV0FDckIsT0FBTyxHQUdUbkosRUFBU29KLEtBQUtDLFlBQWMsV0FDMUIsT0FBTyxHQWdETEgsR0FBYSxLQUFQQSxJQUNSL0UsRUFBUUUsSUFBSWlGLFNBQVMsY0FBZ0JKLEVBQUlwQixHQUN6QzNELEVBQVFFLElBQUlpRixTQUFTLGVBQWlCSixFQUFJdEIsR0FDMUN6RCxFQUFRRSxJQUFJaUYsU0FBUyxjQUFnQkosRUFBSW5CLEdBQ3pDNUQsRUFBUUUsSUFBSWlGLFNBQVMsZUFBaUJKLEVBQUlMLEdBQzFDMUUsRUFBUUUsSUFBSUMsS0FBSyxHQUFJLGNBQWUsS0FBTTRFLEdBQUssWUFBYSxZQUFhLHVCQUcxRXRHLE9BQVE1QyxTQUFVbUUsUUFLckIsSUFBSW9GLE1BQU9BLFFBRVhBLE1BQUtuSSxNQUFNLGNBQWUsa0JBQzFCbUksS0FBS25JLE1BQU0sbUJBRVgsV0FDRSxHQUFJb0ksR0FBS3hKLFNBQVNDLGNBQWMsU0FBV3VKLEdBQUd0SSxLQUFPLGtCQUFtQnNJLEVBQUdDLE9BQVEsRUFDbkZELEVBQUdqSCxLQUFPLFVBQVl2QyxTQUFTNkMsU0FBUzZHLFNBQVcsY0FBZ0IsY0FBZ0IsNkJBQ25GLElBQUlDLEdBQUkzSixTQUFTNEoscUJBQXFCLFVBQVUsRUFBSUQsR0FBRUUsV0FBV0MsYUFBYU4sRUFBSUciLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGV4cG9ydGVkIFdJREdFVF9DT01NT05fQ09ORklHICovXG52YXIgV0lER0VUX0NPTU1PTl9DT05GSUcgPSB7XG4gIEFVVEhfUEFUSF9VUkw6IFwidjEvd2lkZ2V0L2F1dGhcIixcbiAgTE9HR0VSX0NMSUVOVF9JRDogXCIxMDg4NTI3MTQ3MTA5LTZxMW8ydnRpaG4zNDI5MnBqdDRja2htaGNrMHJrMG83LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tXCIsXG4gIExPR0dFUl9DTElFTlRfU0VDUkVUOiBcIm5sWnlyY1BMZzZvRXdPOWY5V2ZuMjlXaFwiLFxuICBMT0dHRVJfUkVGUkVTSF9UT0tFTjogXCIxL3h6dDRrd3pFMUg3VzlWbktCOGNBYUN4NnpiNEVzNG5LRW9xYVlIZFREMTVJZ09ySkR0ZHVuNnpLNlhpQVRDS1RcIixcbiAgU1RPUkFHRV9FTlY6IFwicHJvZFwiLFxuICBTVE9SRV9VUkw6IFwiaHR0cHM6Ly9zdG9yZS1kb3QtcnZhc2VydmVyMi5hcHBzcG90LmNvbS9cIlxufTtcbi8qIGdsb2JhbCBXSURHRVRfQ09NTU9OX0NPTkZJRyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyA9IChmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgIHZhciBkaXNwbGF5SWQgPSBcIlwiLFxuICAgIGNvbXBhbnlJZCA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cblxuICAvKiBSZXRyaWV2ZSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGV2ZW50IGxvZ2dlci4gKi9cbiAgZnVuY3Rpb24gZ2V0RXZlbnRQYXJhbXMocGFyYW1zLCBjYikge1xuICAgIHZhciBqc29uID0gbnVsbDtcblxuICAgIC8vIGV2ZW50IGlzIHJlcXVpcmVkLlxuICAgIGlmIChwYXJhbXMuZXZlbnQpIHtcbiAgICAgIGpzb24gPSBwYXJhbXM7XG5cbiAgICAgIGlmIChqc29uLmZpbGVfdXJsKSB7XG4gICAgICAgIGpzb24uZmlsZV9mb3JtYXQgPSBnZXRGaWxlRm9ybWF0KGpzb24uZmlsZV91cmwpO1xuICAgICAgfVxuXG4gICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICBqc29uLmRpc3BsYXlfaWQgPSBkaXNwbGF5SWQ7XG5cbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBzdWZmaXggZm9yIEJRIHRhYmxlIG5hbWUuXG4gIGZ1bmN0aW9uIGdldFN1ZmZpeCgpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCksXG4gICAgICB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgICAgZGF5ID0gZGF0ZS5nZXRVVENEYXRlKCk7XG5cbiAgICBpZiAobW9udGggPCAxMCkge1xuICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuICAgIH1cblxuICAgIGlmIChkYXkgPCAxMCkge1xuICAgICAgZGF5ID0gXCIwXCIgKyBkYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHllYXIgKyBtb250aCArIGRheTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIEJBU0VfSU5TRVJUX1NDSEVNQSA9IHtcbiAgICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICAgIFwic2tpcEludmFsaWRSb3dzXCI6IGZhbHNlLFxuICAgICAgXCJpZ25vcmVVbmtub3duVmFsdWVzXCI6IGZhbHNlLFxuICAgICAgXCJ0ZW1wbGF0ZVN1ZmZpeFwiOiBnZXRTdWZmaXgoKSxcbiAgICAgIFwicm93c1wiOiBbe1xuICAgICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShCQVNFX0lOU0VSVF9TQ0hFTUEpKTtcblxuICAgIGRhdGEucm93c1swXS5pbnNlcnRJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKS50b1VwcGVyQ2FzZSgpO1xuICAgIGRhdGEucm93c1swXS5qc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbi50cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQodGFibGUsIHBhcmFtcykge1xuICAgIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgaWYgKGpzb24gIT09IG51bGwpIHtcbiAgICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyLmxvZyh0YWJsZSwganNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiBTZXQgdGhlIENvbXBhbnkgYW5kIERpc3BsYXkgSURzLiAqL1xuICBmdW5jdGlvbiBzZXRJZHMoY29tcGFueSwgZGlzcGxheSkge1xuICAgIGNvbXBhbnlJZCA9IGNvbXBhbnk7XG4gICAgZGlzcGxheUlkID0gZGlzcGxheTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRJbnNlcnREYXRhXCI6IGdldEluc2VydERhdGEsXG4gICAgXCJnZXRGaWxlRm9ybWF0XCI6IGdldEZpbGVGb3JtYXQsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcInNldElkc1wiOiBzZXRJZHNcbiAgfTtcbn0pKCk7XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlciA9IChmdW5jdGlvbih1dGlscykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgUkVGUkVTSF9VUkwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My90b2tlbj9jbGllbnRfaWQ9XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfQ0xJRU5UX0lEICtcbiAgICAgIFwiJmNsaWVudF9zZWNyZXQ9XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfQ0xJRU5UX1NFQ1JFVCArXG4gICAgICBcIiZyZWZyZXNoX3Rva2VuPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX1JFRlJFU0hfVE9LRU4gK1xuICAgICAgXCImZ3JhbnRfdHlwZT1yZWZyZXNoX3Rva2VuXCI7XG5cbiAgdmFyIHNlcnZpY2VVcmwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2JpZ3F1ZXJ5L3YyL3Byb2plY3RzL2NsaWVudC1zaWRlLWV2ZW50cy9kYXRhc2V0cy9XaWRnZXRfRXZlbnRzL3RhYmxlcy9UQUJMRV9JRC9pbnNlcnRBbGxcIixcbiAgICB0aHJvdHRsZSA9IGZhbHNlLFxuICAgIHRocm90dGxlRGVsYXkgPSAxMDAwLFxuICAgIGxhc3RFdmVudCA9IFwiXCIsXG4gICAgcmVmcmVzaERhdGUgPSAwLFxuICAgIHRva2VuID0gXCJcIjtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiByZWZyZXNoVG9rZW4oY2IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAobmV3IERhdGUoKSAtIHJlZnJlc2hEYXRlIDwgMzU4MDAwMCkge1xuICAgICAgcmV0dXJuIGNiKHt9KTtcbiAgICB9XG5cbiAgICB4aHIub3BlbihcIlBPU1RcIiwgUkVGUkVTSF9VUkwsIHRydWUpO1xuICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXNwID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpO1xuXG4gICAgICBjYih7IHRva2VuOiByZXNwLmFjY2Vzc190b2tlbiwgcmVmcmVzaGVkQXQ6IG5ldyBEYXRlKCkgfSk7XG4gICAgfTtcblxuICAgIHhoci5zZW5kKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1Rocm90dGxlZChldmVudCkge1xuICAgIHJldHVybiB0aHJvdHRsZSAmJiAobGFzdEV2ZW50ID09PSBldmVudCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGxvZyh0YWJsZU5hbWUsIHBhcmFtcykge1xuICAgIGlmICghdGFibGVOYW1lIHx8ICFwYXJhbXMgfHwgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmICFwYXJhbXMuZXZlbnQpIHx8XG4gICAgICAocGFyYW1zLmhhc093blByb3BlcnR5KFwiZXZlbnRcIikgJiYgaXNUaHJvdHRsZWQocGFyYW1zLmV2ZW50KSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aHJvdHRsZSA9IHRydWU7XG4gICAgbGFzdEV2ZW50ID0gcGFyYW1zLmV2ZW50O1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdHRsZSA9IGZhbHNlO1xuICAgIH0sIHRocm90dGxlRGVsYXkpO1xuXG4gICAgZnVuY3Rpb24gaW5zZXJ0V2l0aFRva2VuKHJlZnJlc2hEYXRhKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIGluc2VydERhdGEsIHVybDtcblxuICAgICAgdXJsID0gc2VydmljZVVybC5yZXBsYWNlKFwiVEFCTEVfSURcIiwgdGFibGVOYW1lKTtcbiAgICAgIHJlZnJlc2hEYXRlID0gcmVmcmVzaERhdGEucmVmcmVzaGVkQXQgfHwgcmVmcmVzaERhdGU7XG4gICAgICB0b2tlbiA9IHJlZnJlc2hEYXRhLnRva2VuIHx8IHRva2VuO1xuICAgICAgaW5zZXJ0RGF0YSA9IHV0aWxzLmdldEluc2VydERhdGEocGFyYW1zKTtcblxuICAgICAgLy8gSW5zZXJ0IHRoZSBkYXRhLlxuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgXCJCZWFyZXIgXCIgKyB0b2tlbik7XG5cbiAgICAgIGlmIChwYXJhbXMuY2IgJiYgdHlwZW9mIHBhcmFtcy5jYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBwYXJhbXMuY2IoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoaW5zZXJ0RGF0YSkpO1xuICAgIH1cblxuICAgIHJldHVybiByZWZyZXNoVG9rZW4oaW5zZXJ0V2l0aFRva2VuKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJsb2dcIjogbG9nXG4gIH07XG59KShSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyk7XG4vKiBnbG9iYWwgV2ViRm9udCAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcyA9IChmdW5jdGlvbigpIHtcblxuICBmdW5jdGlvbiBnZXRGb250Q3NzU3R5bGUoY2xhc3NOYW1lLCBmb250T2JqKSB7XG4gICAgdmFyIGZhbWlseSA9IFwiZm9udC1mYW1pbHk6IFwiICsgZGVjb2RlVVJJQ29tcG9uZW50KGZvbnRPYmouZm9udC5mYW1pbHkpLnJlcGxhY2UoLycvZywgXCJcIikgKyBcIjsgXCI7XG4gICAgdmFyIGNvbG9yID0gXCJjb2xvcjogXCIgKyAoZm9udE9iai5jb2xvciA/IGZvbnRPYmouY29sb3IgOiBmb250T2JqLmZvcmVjb2xvcikgKyBcIjsgXCI7XG4gICAgdmFyIHNpemUgPSBcImZvbnQtc2l6ZTogXCIgKyAoZm9udE9iai5zaXplLmluZGV4T2YoXCJweFwiKSA9PT0gLTEgPyBmb250T2JqLnNpemUgKyBcInB4OyBcIiA6IGZvbnRPYmouc2l6ZSArIFwiOyBcIik7XG4gICAgdmFyIHdlaWdodCA9IFwiZm9udC13ZWlnaHQ6IFwiICsgKGZvbnRPYmouYm9sZCA/IFwiYm9sZFwiIDogXCJub3JtYWxcIikgKyBcIjsgXCI7XG4gICAgdmFyIGl0YWxpYyA9IFwiZm9udC1zdHlsZTogXCIgKyAoZm9udE9iai5pdGFsaWMgPyBcIml0YWxpY1wiIDogXCJub3JtYWxcIikgKyBcIjsgXCI7XG4gICAgdmFyIHVuZGVybGluZSA9IFwidGV4dC1kZWNvcmF0aW9uOiBcIiArIChmb250T2JqLnVuZGVybGluZSA/IFwidW5kZXJsaW5lXCIgOiBcIm5vbmVcIikgKyBcIjsgXCI7XG4gICAgdmFyIGhpZ2hsaWdodCA9IFwiYmFja2dyb3VuZC1jb2xvcjogXCIgKyAoZm9udE9iai5oaWdobGlnaHRDb2xvciA/IGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgOiBmb250T2JqLmJhY2tjb2xvcikgKyBcIjtcIjtcblxuICAgIHJldHVybiBcIi5cIiArIGNsYXNzTmFtZSArIFwiIHtcIiArIGZhbWlseSArIGNvbG9yICsgc2l6ZSArIHdlaWdodCArIGl0YWxpYyArIHVuZGVybGluZSArIGhpZ2hsaWdodCArIFwifVwiO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkQ1NTUnVsZXMocnVsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gcnVsZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJ1bGVzW2ldKSk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICAvKlxuICAgKiBMb2FkcyBHb29nbGUgb3IgY3VzdG9tIGZvbnRzLCBpZiBhcHBsaWNhYmxlLCBhbmQgaW5qZWN0cyBDU1Mgc3R5bGVzXG4gICAqIGludG8gdGhlIGhlYWQgb2YgdGhlIGRvY3VtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gICAgYXJyYXkgICAgc2V0dGluZ3MgICAgQXJyYXkgb2Ygb2JqZWN0cyB3aXRoIHRoZSBmb2xsb3dpbmcgZm9ybTpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbe1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImRhdGVcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9udFNldHRpbmdcIjoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiYmxhY2tcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiB7XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHk6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogXCJBa3JvbmltXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlZlcmRhbmFcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ29vZ2xlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cDovL2N1c3RvbS1mb250LXVybFwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogXCIyMFwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2VcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgKlxuICAgKiAgICAgICAgICAgb2JqZWN0ICAgY29udGVudERvYyAgICBEb2N1bWVudCBvYmplY3QgaW50byB3aGljaCB0byBpbmplY3Qgc3R5bGVzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBsb2FkIGZvbnRzIChvcHRpb25hbCkuXG4gICAqL1xuICBmdW5jdGlvbiBsb2FkRm9udHMoc2V0dGluZ3MsIGNiKSB7XG4gICAgdmFyIGZhbWlsaWVzID0gbnVsbCxcbiAgICAgIGdvb2dsZUZhbWlsaWVzID0gW10sXG4gICAgICBjdXN0b21GYW1pbGllcyA9IFtdLFxuICAgICAgY3VzdG9tVXJscyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICBpZiAoY2IgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkdvb2dsZUZvbnRzTG9hZGVkKCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBpZiAoIXNldHRpbmdzIHx8IHNldHRpbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgY3VzdG9tIGNzcyBjbGFzcyBuYW1lcyBhbmQgYWRkIHJ1bGVzIGlmIHNvXG4gICAgc2V0dGluZ3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICBpZiAoaXRlbS5jbGFzcyAmJiBpdGVtLmZvbnRTdHlsZSkge1xuICAgICAgICBhZGRDU1NSdWxlcyhbIGdldEZvbnRDc3NTdHlsZShpdGVtLmNsYXNzLCBpdGVtLmZvbnRTdHlsZSkgXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBHb29nbGUgZm9udHNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHRpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc2V0dGluZ3NbaV0uZm9udFN0eWxlICYmIHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LnR5cGUgJiZcbiAgICAgICAgKHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LnR5cGUgPT09IFwiZ29vZ2xlXCIpKSB7XG4gICAgICAgIC8vIFJlbW92ZSBmYWxsYmFjayBmb250LlxuICAgICAgICBmYW1pbGllcyA9IHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LmZhbWlseS5zcGxpdChcIixcIilbMF07XG5cbiAgICAgICAgLy8gc3RyaXAgcG9zc2libGUgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBmYW1pbGllcyA9IGZhbWlsaWVzLnJlcGxhY2UoLycvZywgXCJcIik7XG5cbiAgICAgICAgZ29vZ2xlRmFtaWxpZXMucHVzaChmYW1pbGllcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3VzdG9tIGZvbnRzXG4gICAgZm9yIChpID0gMDsgaSA8IHNldHRpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc2V0dGluZ3NbaV0uZm9udFN0eWxlICYmIHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LnR5cGUgJiZcbiAgICAgICAgKHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LnR5cGUgPT09IFwiY3VzdG9tXCIpKSB7XG4gICAgICAgIC8vIGRlY29kZSB2YWx1ZSBhbmQgc3RyaXAgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBjdXN0b21GYW1pbGllcy5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC5mYW1pbHkpLnJlcGxhY2UoLycvZywgXCJcIikpO1xuICAgICAgICAvLyBzdHJpcCBzaW5nbGUgcXVvdGVzXG4gICAgICAgIGN1c3RvbVVybHMucHVzaChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC51cmwucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZ29vZ2xlRmFtaWxpZXMubGVuZ3RoID09PSAwICYmIGN1c3RvbUZhbWlsaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBMb2FkIHRoZSBmb250c1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjdXN0b21GYW1pbGllcy5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICBsb2FkQ3VzdG9tRm9udChjdXN0b21GYW1pbGllc1tqXSwgY3VzdG9tVXJsc1tqXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChnb29nbGVGYW1pbGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxvYWRHb29nbGVGb250cyhnb29nbGVGYW1pbGllcywgb25Hb29nbGVGb250c0xvYWRlZCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkQ3VzdG9tRm9udChmYW1pbHksIHVybCwgY29udGVudERvYykge1xuICAgIHZhciBzaGVldCA9IG51bGw7XG4gICAgdmFyIHJ1bGUgPSBcImZvbnQtZmFtaWx5OiBcIiArIGZhbWlseSArIFwiOyBcIiArIFwic3JjOiB1cmwoJ1wiICsgdXJsICsgXCInKTtcIjtcblxuICAgIGNvbnRlbnREb2MgPSBjb250ZW50RG9jIHx8IGRvY3VtZW50O1xuXG4gICAgc2hlZXQgPSBjb250ZW50RG9jLnN0eWxlU2hlZXRzWzBdO1xuXG4gICAgaWYgKHNoZWV0ICE9PSBudWxsKSB7XG4gICAgICBzaGVldC5hZGRSdWxlKFwiQGZvbnQtZmFjZVwiLCBydWxlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkR29vZ2xlRm9udHMoZmFtaWxpZXMsIGNiKSB7XG4gICAgV2ViRm9udC5sb2FkKHtcbiAgICAgIGdvb2dsZToge1xuICAgICAgICBmYW1pbGllczogZmFtaWxpZXNcbiAgICAgIH0sXG4gICAgICBhY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY2IgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5hY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY2IgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGltZW91dDogMjAwMFxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJlbG9hZEltYWdlcyh1cmxzKSB7XG4gICAgdmFyIGxlbmd0aCA9IHVybHMubGVuZ3RoLFxuICAgICAgaW1hZ2VzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpbWFnZXNbaV0gPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltYWdlc1tpXS5zcmMgPSB1cmxzW2ldO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1ldGVyKHBhcmFtKSB7XG4gICAgdmFyIHF1ZXJ5ID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSksXG4gICAgICB2YXJzID0gcXVlcnkuc3BsaXQoXCImXCIpLFxuICAgICAgcGFpcjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFycy5sZW5ndGg7IGkrKykge1xuICAgICAgcGFpciA9IHZhcnNbaV0uc3BsaXQoXCI9XCIpO1xuXG4gICAgICBpZiAocGFpclswXSA9PSBwYXJhbSkgeyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJpc2VDYWNoZUVycm9yTWVzc2FnZShzdGF0dXNDb2RlKSB7XG4gICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgc3dpdGNoIChzdGF0dXNDb2RlKSB7XG4gICAgICBjYXNlIDQwNDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGUgZmlsZSBkb2VzIG5vdCBleGlzdCBvciBjYW5ub3QgYmUgYWNjZXNzZWQuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA1MDc6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgaXMgbm90IGVub3VnaCBkaXNrIHNwYWNlIHRvIHNhdmUgdGhlIGZpbGUgb24gUmlzZSBDYWNoZS5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZXJlIHdhcyBhIHByb2JsZW0gcmV0cmlldmluZyB0aGUgZmlsZSBmcm9tIFJpc2UgQ2FjaGUuXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVycm9yTWVzc2FnZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuZXNjYXBlSFRNTChodG1sKSB7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBkaXYuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgIHJldHVybiBkaXYudGV4dENvbnRlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNJbnRlcm5ldENvbm5lY3Rpb24oZmlsZVBhdGgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKCFmaWxlUGF0aCB8fCAhY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB4aHIub3BlbihcIkhFQURcIiwgZmlsZVBhdGggKyBcIj9jYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpLCBmYWxzZSk7XG5cbiAgICB0cnkge1xuICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgY2FsbGJhY2soKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDQpKTtcblxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldFF1ZXJ5UGFyYW1ldGVyOiBnZXRRdWVyeVBhcmFtZXRlcixcbiAgICBnZXRGb250Q3NzU3R5bGU6ICBnZXRGb250Q3NzU3R5bGUsXG4gICAgYWRkQ1NTUnVsZXM6ICAgICAgYWRkQ1NTUnVsZXMsXG4gICAgbG9hZEZvbnRzOiAgICAgICAgbG9hZEZvbnRzLFxuICAgIGxvYWRDdXN0b21Gb250OiAgIGxvYWRDdXN0b21Gb250LFxuICAgIGxvYWRHb29nbGVGb250czogICBsb2FkR29vZ2xlRm9udHMsXG4gICAgcHJlbG9hZEltYWdlczogICAgcHJlbG9hZEltYWdlcyxcbiAgICBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2U6IGdldFJpc2VDYWNoZUVycm9yTWVzc2FnZSxcbiAgICB1bmVzY2FwZUhUTUw6IHVuZXNjYXBlSFRNTCxcbiAgICBoYXNJbnRlcm5ldENvbm5lY3Rpb246IGhhc0ludGVybmV0Q29ubmVjdGlvblxuICB9O1xufSkoKTtcblxuLyogZXhwb3J0ZWQgY29uZmlnICovXG5pZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xufVxuXG52YXIgY29uZmlnID0ge1xuICBTVE9SQUdFX0VOVjogXCJwcm9kXCJcbn07XG5cbi8qIGdsb2JhbCBnYWRnZXRzICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uV2ViUGFnZSA9IHt9O1xuXG5SaXNlVmlzaW9uLldlYlBhZ2UgPSAoZnVuY3Rpb24gKGRvY3VtZW50LCBnYWRnZXRzKSB7XG5cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gcHJpdmF0ZSB2YXJpYWJsZXNcbiAgdmFyIF9wcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXG4gICAgX3V0aWxzID0gUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLFxuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gbnVsbCxcbiAgICBfdXJsID0gXCJcIixcbiAgICBfdmVydGljYWwgPSAwLFxuICAgIF9pbnRlcnZhbElkID0gbnVsbCxcbiAgICBfaW5pdGlhbExvYWQgPSB0cnVlO1xuXG4gIHZhciBfbWVzc2FnZSA9IG51bGw7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUsIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zZXRJbnRlcmFjdGl2aXR5KGZyYW1lKSB7XG4gICAgdmFyIGJsb2NrZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJsb2NrZXJcIik7XG5cbiAgICBibG9ja2VyLnN0eWxlLmRpc3BsYXkgPSAoX2FkZGl0aW9uYWxQYXJhbXMuaW50ZXJhY3Rpdml0eS5pbnRlcmFjdGl2ZSkgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcblxuICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInNjcm9sbGluZ1wiLFxuICAgICAgKF9hZGRpdGlvbmFsUGFyYW1zLmludGVyYWN0aXZpdHkuaW50ZXJhY3RpdmUgJiYgX2FkZGl0aW9uYWxQYXJhbXMuaW50ZXJhY3Rpdml0eS5zY3JvbGxiYXJzKSA/IFwieWVzXCIgOiBcIm5vXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2NvbmZpZ3VyZVBhZ2UoKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLFxuICAgICAgZnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndlYnBhZ2UtZnJhbWVcIiksXG4gICAgICBhc3BlY3RSYXRpbyA9ICAoX3ByZWZzLmdldEludChcInJzSFwiKSAvIF9wcmVmcy5nZXRJbnQoXCJyc1dcIikpICogMTAwO1xuXG4gICAgaWYgKGNvbnRhaW5lciAmJiBmcmFtZSkge1xuICAgICAgX3NldEludGVyYWN0aXZpdHkoZnJhbWUpO1xuICAgICAgX3NldFJlZ2lvbihmcmFtZSk7XG4gICAgICBfc2V0Wm9vbShmcmFtZSk7XG5cbiAgICAgIC8vIGltcGxlbWVudCByZXNwb25zaXZlIGlmcmFtZVxuICAgICAgaWYgKF92ZXJ0aWNhbCAhPT0gMCkge1xuICAgICAgICBhc3BlY3RSYXRpbyArPSAoX3ZlcnRpY2FsIC8gX3ByZWZzLmdldEludChcInJzV1wiKSkgKiAxMDA7XG4gICAgICB9XG5cbiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBhZGRpbmctYm90dG9tOlwiICsgYXNwZWN0UmF0aW8gKyBcIiVcIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3NldFpvb20oZnJhbWUpIHtcbiAgIHZhciB6b29tID0gcGFyc2VGbG9hdChfYWRkaXRpb25hbFBhcmFtcy56b29tKSxcbiAgICBjdXJyZW50U3R5bGUgPSBcIlwiLFxuICAgICB6b29tU3R5bGUgPSBcIlwiO1xuXG4gICAgLy8gQ29uZmlndXJlIHRoZSB6b29tIChzY2FsZSkgc3R5bGluZ1xuICAgIHpvb21TdHlsZSA9IFwiLW1zLXpvb206XCIgKyB6b29tICsgXCI7XCIgK1xuICAgICAgXCItbW96LXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgIFwiLW1vei10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCIgK1xuICAgICAgXCItby10cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICBcIi1vLXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIiArXG4gICAgICBcIi13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgXCItd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIiArXG4gICAgICBcInRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgIFwidHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiO1xuXG4gICAgY3VycmVudFN0eWxlID0gZnJhbWUuZ2V0QXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgem9vbVN0eWxlICs9IFwid2lkdGg6IFwiICsgKCgxIC8gem9vbSkgKiAxMDApICsgXCIlO1wiICtcbiAgICAgIFwiaGVpZ2h0OiBcIiArICgoMSAvIHpvb20pICogMTAwKSArIFwiJTtcIjtcblxuICAgIGlmIChjdXJyZW50U3R5bGUpIHtcbiAgICAgIHpvb21TdHlsZSA9IGN1cnJlbnRTdHlsZSArIHpvb21TdHlsZTtcbiAgICB9XG5cbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCB6b29tU3R5bGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3NldFJlZ2lvbihmcmFtZSkge1xuICAgIHZhciBjdXJyZW50U3R5bGUgPSBcIlwiLFxuICAgICAgbWFyZ2luU3R5bGUgPSBcIlwiLFxuICAgICAgaG9yaXpvbnRhbCA9IDA7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVnaW9uICYmIF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbi5zaG93UmVnaW9uICYmXG4gICAgICAoX2FkZGl0aW9uYWxQYXJhbXMucmVnaW9uLnNob3dSZWdpb24gPT09IFwicmVnaW9uXCIpKSB7XG4gICAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVnaW9uLmhvcml6b250YWwgPiAwKSB7XG4gICAgICAgIGhvcml6b250YWwgPSBfYWRkaXRpb25hbFBhcmFtcy5yZWdpb24uaG9yaXpvbnRhbDtcbiAgICAgIH1cblxuICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZ2lvbi52ZXJ0aWNhbCA+IDApIHtcbiAgICAgICAgX3ZlcnRpY2FsID0gX2FkZGl0aW9uYWxQYXJhbXMucmVnaW9uLnZlcnRpY2FsO1xuICAgICAgfVxuXG4gICAgICAvLyBBcHBseSBuZWdhdGl2ZSBtYXJnaW5zIGluIG9yZGVyIHRvIHNob3cgYSByZWdpb24uXG4gICAgICBpZiAoKGhvcml6b250YWwgIT09IDApIHx8IChfdmVydGljYWwgIT09IDApKSB7XG4gICAgICAgIGN1cnJlbnRTdHlsZSA9IGZyYW1lLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgICAgICBtYXJnaW5TdHlsZSA9IFwibWFyZ2luOiBcIiArIFwiLVwiICsgX3ZlcnRpY2FsICsgXCJweCAwIDAgLVwiICsgaG9yaXpvbnRhbCArIFwicHg7XCI7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRTdHlsZSkge1xuICAgICAgICAgIG1hcmdpblN0eWxlID0gY3VycmVudFN0eWxlICsgbWFyZ2luU3R5bGU7XG4gICAgICAgIH1cblxuICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBtYXJnaW5TdHlsZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0UmVmcmVzaEludGVydmFsKCkge1xuICAgIF9pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgX3V0aWxzLmhhc0ludGVybmV0Q29ubmVjdGlvbihcImltZy90cmFuc3BhcmVudC5wbmdcIiwgZnVuY3Rpb24gKGhhc0ludGVybmV0KSB7XG4gICAgICAgIGlmIChoYXNJbnRlcm5ldCkge1xuICAgICAgICAgIF9yZWZyZXNoRnJhbWUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0RnJhbWVFbGVtZW50KCkge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSxcbiAgICAgIGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcblxuICAgIGZyYW1lLmNsYXNzTmFtZSA9IFwid2VicGFnZS1mcmFtZVwiO1xuICAgIGZyYW1lLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcImZyYW1lYm9yZGVyXCIsIFwiMFwiKTtcbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd1RyYW5zcGFyZW5jeVwiLCBcInRydWVcIik7XG5cbiAgICBfc2V0SW50ZXJhY3Rpdml0eShmcmFtZSk7XG4gICAgX3NldFJlZ2lvbihmcmFtZSk7XG4gICAgX3NldFpvb20oZnJhbWUpO1xuXG4gICAgZnJhbWUub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vbmxvYWQgPSBudWxsO1xuICAgICAgdGhpcy5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cbiAgICAgIC8vIFJlbW92ZSBvbGQgaWZyYW1lLlxuICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2VicGFnZS1mcmFtZVwiKSk7XG4gICAgfTtcblxuICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCBfdXJsKTtcblxuICAgIHJldHVybiBmcmFtZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9sb2FkRnJhbWUoKSB7XG4gICAgdmFyIGZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWJwYWdlLWZyYW1lXCIpO1xuXG4gICAgZnJhbWUub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vbmxvYWQgPSBudWxsO1xuXG4gICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcblxuICAgICAgLy8gY2hlY2sgaWYgcmVmcmVzaCBpbnRlcnZhbCBzaG91bGQgYmUgc3RhcnRlZFxuICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2ggPiAwICYmIF9pbnRlcnZhbElkID09PSBudWxsKSB7XG4gICAgICAgIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgX3VybCk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVmcmVzaEZyYW1lKCkge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgZnJhbWUgPSBfZ2V0RnJhbWVFbGVtZW50KCk7XG5cbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF91bmxvYWRGcmFtZSgpIHtcbiAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndlYnBhZ2UtZnJhbWVcIik7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDApIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoX2ludGVydmFsSWQpO1xuICAgIH1cblxuICAgIGlmIChmcmFtZSkge1xuICAgICAgZnJhbWUuc3JjID0gXCJhYm91dDpibGFua1wiO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgX21lc3NhZ2UgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSxcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZUNvbnRhaW5lclwiKSk7XG5cbiAgICAvLyBhcHBseSBoZWlnaHQgdmFsdWUgdG8gbWVzc2FnZSBjb250YWluZXIgc28gYSBtZXNzYWdlIGdldHMgdmVydGljYWxseSBjZW50ZXJlZFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZUNvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuXG4gICAgLy8gQ29uZmlndXJlIHRoZSB2YWx1ZSBmb3IgX3VybFxuICAgIF91cmwgPSBfYWRkaXRpb25hbFBhcmFtcy51cmw7XG5cbiAgICAvLyBBZGQgaHR0cDovLyBpZiBubyBwcm90b2NvbCBwYXJhbWV0ZXIgZXhpc3RzXG4gICAgaWYgKF91cmwuaW5kZXhPZihcIjovL1wiKSA9PT0gLTEpIHtcbiAgICAgIF91cmwgPSBcImh0dHA6Ly9cIiArIF91cmw7XG4gICAgfVxuXG4gICAgX2NvbmZpZ3VyZVBhZ2UoKTtcbiAgICBfcmVhZHkoKTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0VGFibGVOYW1lKCkge1xuICAgIHJldHVybiBcIndlYnBhZ2VfZXZlbnRzXCI7XG4gIH1cblxuICBmdW5jdGlvbiBsb2dFdmVudChwYXJhbXMpIHtcbiAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5sb2dFdmVudChnZXRUYWJsZU5hbWUoKSwgcGFyYW1zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy51bmxvYWQpIHtcbiAgICAgIF91bmxvYWRGcmFtZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG5cbiAgICBsb2dFdmVudCh7IFwiZXZlbnRcIjogXCJwbGF5XCIsIFwidXJsXCI6IF91cmwgfSk7XG5cbiAgICBpZiAoX2luaXRpYWxMb2FkIHx8IF9hZGRpdGlvbmFsUGFyYW1zLnVubG9hZCkge1xuICAgICAgX2xvYWRGcmFtZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMoYWRkaXRpb25hbFBhcmFtcykge1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhZGRpdGlvbmFsUGFyYW1zKSk7XG5cbiAgICBfaW5pdCgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImdldFRhYmxlTmFtZVwiOiBnZXRUYWJsZU5hbWUsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcInNldEFkZGl0aW9uYWxQYXJhbXNcIjogc2V0QWRkaXRpb25hbFBhcmFtcyxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic3RvcFwiOiBzdG9wXG4gIH07XG5cbn0pKGRvY3VtZW50LCBnYWRnZXRzKTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZSA9IGZ1bmN0aW9uIChtYWluQ29udGFpbmVyLCBtZXNzYWdlQ29udGFpbmVyKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWN0aXZlID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbWFpbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3QgaW5pdGlhbGl6ZSBNZXNzYWdlIC0gXCIsIGUubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoaWRlKCkge1xuICAgIGlmIChfYWN0aXZlKSB7XG4gICAgICAvLyBjbGVhciBjb250ZW50IG9mIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICB3aGlsZSAobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIucmVtb3ZlQ2hpbGQobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgLy8gaGlkZSBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIC8vIHNob3cgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICBfYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhtZXNzYWdlKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgcDtcblxuICAgIGlmICghX2FjdGl2ZSkge1xuICAgICAgLy8gaGlkZSBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgICAvLyBjcmVhdGUgbWVzc2FnZSBlbGVtZW50XG4gICAgICBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICBwLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWVzc2FnZVwiKTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocCk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgX2FjdGl2ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1lc3NhZ2UgYWxyZWFkeSBiZWluZyBzaG93biwgdXBkYXRlIG1lc3NhZ2UgdGV4dFxuICAgICAgcCA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tZXNzYWdlXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBcImhpZGVcIjogaGlkZSxcbiAgICBcInNob3dcIjogc2hvd1xuICB9O1xufTtcblxuLyogZ2xvYmFsIFJpc2VWaXNpb24sIGdhZGdldHMgKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBpZCA9IG5ldyBnYWRnZXRzLlByZWZzKCkuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBkb2N1bWVudC5ib2R5Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZShuYW1lcywgdmFsdWVzKSB7XG4gICAgdmFyIGFkZGl0aW9uYWxQYXJhbXMsXG4gICAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgICAgZGlzcGxheUlkID0gXCJcIjtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gY29tcGFueSBpZFxuICAgICAgaWYgKG5hbWVzWzBdID09PSBcImNvbXBhbnlJZFwiKSB7XG4gICAgICAgIGNvbXBhbnlJZCA9IHZhbHVlc1swXTtcbiAgICAgIH1cblxuICAgICAgLy8gZGlzcGxheSBpZFxuICAgICAgaWYgKG5hbWVzWzFdID09PSBcImRpc3BsYXlJZFwiKSB7XG4gICAgICAgIGlmICh2YWx1ZXNbMV0pIHtcbiAgICAgICAgICBkaXNwbGF5SWQgPSB2YWx1ZXNbMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGlzcGxheUlkID0gXCJwcmV2aWV3XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcHJvdmlkZSBMb2dnZXJVdGlscyB0aGUgaWRzIHRvIHVzZVxuICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMuc2V0SWRzKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcblxuICAgICAgLy8gYWRkaXRpb25hbCBwYXJhbXNcbiAgICAgIGlmIChuYW1lc1syXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzJdKTtcblxuICAgICAgICBSaXNlVmlzaW9uLldlYlBhZ2Uuc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uV2ViUGFnZS5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnN0b3AoKTtcbiAgfVxuXG4gIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBjb25maWd1cmUpO1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiY29tcGFueUlkXCIsIFwiZGlzcGxheUlkXCIsIFwiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gIH1cblxufSkod2luZG93LCBkb2N1bWVudCwgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTYnXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
