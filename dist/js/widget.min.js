"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){var t,n,a,o=e.getElementById("webpage-container"),r=e.getElementById("webpage-frame"),i=g.getInt("rsH")/g.getInt("rsW")*100,s=d.scrollHorizontal>0?d.scrollHorizontal:0,l=d.scrollVertical>0?d.scrollVertical:0,c=parseFloat(d.zoom);o&&r&&(t=o.getElementsByClassName("blocker")[0],o.style.visibility="hidden",0!==l&&(i+=l/g.getInt("rsW")*100),o.setAttribute("style","padding-bottom:"+i+"%"),t.style.display=d.interactive?"none":"block",r.setAttribute("scrolling",d.scrollbars?"yes":"no"),n="-ms-zoom:"+c+";-moz-transform: scale("+c+");-moz-transform-origin: 0 0;-o-transform: scale("+c+");-o-transform-origin: 0 0;-webkit-transform: scale("+c+");-webkit-transform-origin: 0 0;",n+="width: "+1/c*100+"%;height: "+1/c*100+"%;",r.setAttribute("style",n),(0!==s||0!==l)&&(a="margin: -"+l+"px 0 0 -"+s+"px;",r.setAttribute("style",n+a)))}function a(){var t=e.getElementById("webpage-frame"),n=e.getElementById("webpage-container"),o=/[?#&]/.test(m),r=Math.ceil(100*Math.random()),i=m;d.refresh>0&&(i=o?m+"&dummyVar="+r:m+"?dummyVar="+r),n&&t&&(t.onload=function(){t.onload=null,n.style.visibility="visible",d.refresh>0&&null===f&&(f=setInterval(function(){a()},d.refresh))},t.setAttribute("src",i))}function o(){var t=e.getElementById("webpage-frame");d.refresh>0&&clearInterval(f),t&&(t.src="about:blank")}function r(){t.rpc.call("","rsevent_ready",null,g.getString("id"),!0,!0,!0,!0,!1)}function i(){m=d.url,-1===m.indexOf("://")&&(m="http://"+m),n(),r()}function s(){o()}function l(){a()}function c(){o()}function u(e){g=new t.Prefs,d=e,b=new RiseVision.Common.Background(d),b.init(i)}var g=null,d={},m="",f=null,b=null;return{setAdditionalParams:u,pause:s,play:l,stop:c}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function t(){setTimeout(function(){s.style.backgroundImage="url("+e.background.image.url+g+"cb="+(new Date).getTime()+")",t()},c)}function n(){i=!0,e.background.useImage&&!u&&t(),r&&"function"==typeof r&&r()}function a(){var t;s=document.getElementById("background"),l=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,s?e.background.useImage?(s.className=e.background.image.position,s.className=e.background.image.scale?s.className+" scale-to-fit":s.className,u=0!==Object.keys(e.backgroundStorage).length,u?l?(l.addEventListener("rise-storage-response",function(e){i?e.detail&&e.detail.url&&e.detail.hasOwnProperty("changed")&&e.detail.changed&&(s.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')"):(e.detail&&e.detail.url&&(s.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')"),n())}),l.setAttribute("folder",e.backgroundStorage.folder),l.setAttribute("fileName",e.backgroundStorage.fileName),l.setAttribute("companyId",e.backgroundStorage.companyId),l.setAttribute("env",config.STORAGE_ENV),l.go()):console.log("Missing element with id value of 'backgroundStorage'"):(t=e.background.image.url.split("?"),g=1===t.length?"?":"&",s.style.backgroundImage="url("+e.background.image.url+")",n())):n():console.log("Missing element with id value of 'background'")}function o(e){i?e&&"function"==typeof e&&e():(e&&(r=e),a())}var r=null,i=!1,s=null,l=null,c=9e5,u=!1,g="";return{init:o}},function(e,t){"use strict";function n(){RiseVision.WebPage.play()}function a(){RiseVision.WebPage.pause()}function o(){RiseVision.WebPage.stop()}function r(e,t){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&RiseVision.WebPage.setAdditionalParams(JSON.parse(t[0]))}function i(){e.removeEventListener("WebComponentsReady",i),l&&""!==l&&(t.rpc.register("rscmd_play_"+l,n),t.rpc.register("rscmd_pause_"+l,a),t.rpc.register("rscmd_stop_"+l,o),t.rpc.register("rsparam_set_"+l,r),t.rpc.call("","rsparam_get",null,l,["additionalParams"]))}var s=new t.Prefs,l=s.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",i)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-6"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiY29uZmlnIiwiU1RPUkFHRV9FTlYiLCJSaXNlVmlzaW9uIiwiV2ViUGFnZSIsImRvY3VtZW50IiwiZ2FkZ2V0cyIsIl9jb25maWd1cmVQYWdlIiwiYmxvY2tlciIsInpvb21TdHlsZSIsIm1hcmdpblN0eWxlIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJmcmFtZSIsImFzcGVjdFJhdGlvIiwiX3ByZWZzIiwiZ2V0SW50Iiwic2Nyb2xsSG9yaXpWYWwiLCJfYWRkaXRpb25hbFBhcmFtcyIsInNjcm9sbEhvcml6b250YWwiLCJzY3JvbGxWZXJ0VmFsIiwic2Nyb2xsVmVydGljYWwiLCJ6b29tIiwicGFyc2VGbG9hdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJzZXRBdHRyaWJ1dGUiLCJkaXNwbGF5IiwiX2xvYWRGcmFtZSIsImhhc1BhcmFtcyIsInRlc3QiLCJfdXJsIiwicmFuZG9tTnVtIiwiTWF0aCIsImNlaWwiLCJyYW5kb20iLCJyZWZyZXNoVVJMIiwicmVmcmVzaCIsIm9ubG9hZCIsIl9pbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJfdW5sb2FkRnJhbWUiLCJjbGVhckludGVydmFsIiwic3JjIiwiX3JlYWR5IiwicnBjIiwiY2FsbCIsImdldFN0cmluZyIsIl9iYWNrZ3JvdW5kUmVhZHkiLCJ1cmwiLCJpbmRleE9mIiwicGF1c2UiLCJwbGF5Iiwic3RvcCIsInNldEFkZGl0aW9uYWxQYXJhbXMiLCJwYXJhbXMiLCJQcmVmcyIsIl9iYWNrZ3JvdW5kIiwiQ29tbW9uIiwiQmFja2dyb3VuZCIsImluaXQiLCJkYXRhIiwiX3JlZnJlc2hUaW1lciIsInNldFRpbWVvdXQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kIiwiaW1hZ2UiLCJfc2VwYXJhdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJfcmVmcmVzaER1cmF0aW9uIiwidXNlSW1hZ2UiLCJfaXNTdG9yYWdlRmlsZSIsIl9jYWxsYmFjayIsIl9jb25maWd1cmUiLCJzdHIiLCJfc3RvcmFnZSIsImJvZHkiLCJjb2xvciIsImNsYXNzTmFtZSIsInBvc2l0aW9uIiwic2NhbGUiLCJPYmplY3QiLCJrZXlzIiwiYmFja2dyb3VuZFN0b3JhZ2UiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRldGFpbCIsImhhc093blByb3BlcnR5IiwiY2hhbmdlZCIsInJlcGxhY2UiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImNvbXBhbnlJZCIsImdvIiwiY29uc29sZSIsImxvZyIsInNwbGl0IiwiY2IiLCJ3aW5kb3ciLCJhZGRpdGlvbmFsUGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJwb2x5bWVyUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaWQiLCJyZWdpc3RlciIsInByZWZzIiwib25jb250ZXh0bWVudSIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImFzeW5jIiwibG9jYXRpb24iLCJwcm90b2NvbCIsInMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUN1QixtQkFBWkEsVUFDVEEsUUFBUUMsT0FBTyxvQ0FDWkMsU0FBUyxpQkFBa0Isd0JBQzNCQSxTQUFTLGdCQUFpQixRQUcvQixJQUFJQyxTQUNGQyxZQUFhLFFBS1hDLFdBQWFBLGNBQ2pCQSxZQUFXQyxXQUVYRCxXQUFXQyxRQUFVLFNBQVdDLEVBQVVDLEdBRXhDLFlBYUEsU0FBU0MsS0FDUCxHQVFFQyxHQUFTQyxFQUFXQyxFQVJsQkMsRUFBWU4sRUFBU08sZUFBZSxxQkFDdENDLEVBQVFSLEVBQVNPLGVBQWUsaUJBQ2hDRSxFQUFnQkMsRUFBT0MsT0FBTyxPQUFTRCxFQUFPQyxPQUFPLE9BQVUsSUFDL0RD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dEJzRCxFQUFLRSxFQUFNakUsVUFBVSxLQUd2QnFELEdBQU9hLGNBQWdCLFdBQ3JCLE9BQU8sR0FvQ1RiLEVBQU9kLGlCQUFpQixxQkFBc0JzQixJQUU3Q1IsT0FBUS9GLFFBS1gsSUFBSTZHLE1BQU9BLFFBRVhBLE1BQUtDLE1BQU0sY0FBZSxrQkFDMUJELEtBQUtDLE1BQU0sbUJBRVgsV0FDRSxHQUFJQyxHQUFLaEgsU0FBU2lILGNBQWMsU0FBV0QsR0FBR0UsS0FBTyxrQkFBbUJGLEVBQUdHLE9BQVEsRUFDbkZILEVBQUd6RSxLQUFPLFVBQVl2QyxTQUFTb0gsU0FBU0MsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSXRILFNBQVN1SCxxQkFBcUIsVUFBVSxFQUFJRCxHQUFFRSxXQUFXQyxhQUFhVCxFQUFJTSIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXhwb3J0ZWQgY29uZmlnICovXG5pZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xufVxuXG52YXIgY29uZmlnID0ge1xuICBTVE9SQUdFX0VOVjogXCJwcm9kXCJcbn07XG5cbi8qIGdsb2JhbCBnYWRnZXRzICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uV2ViUGFnZSA9IHt9O1xuXG5SaXNlVmlzaW9uLldlYlBhZ2UgPSAoZnVuY3Rpb24gKGRvY3VtZW50LCBnYWRnZXRzKSB7XG5cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gcHJpdmF0ZSB2YXJpYWJsZXNcbiAgdmFyIF9wcmVmcyA9IG51bGwsXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSB7fSxcbiAgICBfdXJsID0gXCJcIixcbiAgICBfaW50ZXJ2YWxJZCA9IG51bGwsXG4gICAgX2JhY2tncm91bmQgPSBudWxsO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgZnVuY3Rpb24gX2NvbmZpZ3VyZVBhZ2UoKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1jb250YWluZXJcIiksXG4gICAgICBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1mcmFtZVwiKSxcbiAgICAgIGFzcGVjdFJhdGlvID0gIChfcHJlZnMuZ2V0SW50KFwicnNIXCIpIC8gX3ByZWZzLmdldEludChcInJzV1wiKSkgKiAxMDAsXG4gICAgICBzY3JvbGxIb3JpelZhbCA9IChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxIb3Jpem9udGFsID4gMCkgP1xuICAgICAgICAgIF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbEhvcml6b250YWwgOiAwLFxuICAgICAgc2Nyb2xsVmVydFZhbCA9IChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxWZXJ0aWNhbCA+IDApID9cbiAgICAgICAgICBfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxWZXJ0aWNhbCA6IDAsXG4gICAgICB6b29tID0gcGFyc2VGbG9hdChfYWRkaXRpb25hbFBhcmFtcy56b29tKSxcbiAgICAgIGJsb2NrZXIsIHpvb21TdHlsZSwgbWFyZ2luU3R5bGU7XG5cbiAgICBpZiAoY29udGFpbmVyICYmIGZyYW1lKSB7XG4gICAgICBibG9ja2VyID0gY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJibG9ja2VyXCIpWzBdO1xuXG4gICAgICAvLyBIaWRpbmcgaWZyYW1lIGNvbnRhaW5lciwgdmlzaWJsZSB3aGVuIHRoZSBpZnJhbWUgc3VjY2Vzc2Z1bGx5IGxvYWRzXG4gICAgICBjb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgIC8vIHNldCB0aGUgcGFkZGluZy1ib3R0b20gd2l0aCB0aGUgYXNwZWN0IHJhdGlvICUgKHJlc3BvbnNpdmUpXG4gICAgICBpZiAoc2Nyb2xsVmVydFZhbCAhPT0gMCkge1xuICAgICAgICAvLyByZWNhbGN1bGF0ZSBhc3BlY3QgcmF0aW9cbiAgICAgICAgYXNwZWN0UmF0aW8gKz0gKHNjcm9sbFZlcnRWYWwgLyBfcHJlZnMuZ2V0SW50KFwicnNXXCIpKSAqIDEwMDtcbiAgICAgIH1cbiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBhZGRpbmctYm90dG9tOlwiICsgYXNwZWN0UmF0aW8gKyBcIiVcIik7XG5cbiAgICAgIC8vIENvbmZpZ3VyZSBpbnRlcmFjdGl2aXR5IG9mIGlmcmFtZVxuICAgICAgYmxvY2tlci5zdHlsZS5kaXNwbGF5ID0gKF9hZGRpdGlvbmFsUGFyYW1zLmludGVyYWN0aXZlKSA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic2Nyb2xsaW5nXCIsXG4gICAgICAgIChfYWRkaXRpb25hbFBhcmFtcy5zY3JvbGxiYXJzKSA/IFwieWVzXCIgOiBcIm5vXCIpO1xuXG4gICAgICAvLyBDb25maWd1cmUgdGhlIHpvb20gKHNjYWxlKSBzdHlsaW5nXG4gICAgICB6b29tU3R5bGUgPSBcIi1tcy16b29tOlwiICsgem9vbSArIFwiO1wiICtcbiAgICAgICAgXCItbW96LXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgICAgXCItbW96LXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIiArXG4gICAgICAgIFwiLW8tdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgICBcIi1vLXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIiArXG4gICAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XCI7XG5cbiAgICAgIHpvb21TdHlsZSArPSBcIndpZHRoOiBcIiArICgoMSAvIHpvb20pICogMTAwKSArIFwiJTtcIiArXG4gICAgICBcImhlaWdodDogXCIgKyAoKDEgLyB6b29tKSAqIDEwMCkgKyBcIiU7XCI7XG5cbiAgICAgIC8vIEFwcGx5IHRoZSB6b29tIChzY2FsZSkgb24gdGhlIGlmcmFtZVxuICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgem9vbVN0eWxlKTtcblxuICAgICAgaWYgKHNjcm9sbEhvcml6VmFsICE9PSAwIHx8IHNjcm9sbFZlcnRWYWwgIT09IDApIHtcbiAgICAgICAgLy8gQ29uZmlndXJlIHRoZSBtYXJnaW4gc3R5bGluZ1xuICAgICAgICBtYXJnaW5TdHlsZSA9IFwibWFyZ2luOiBcIiArIFwiLVwiICsgc2Nyb2xsVmVydFZhbCArIFwicHggMCAwIC1cIiArXG4gICAgICAgICAgc2Nyb2xsSG9yaXpWYWwgKyBcInB4O1wiO1xuXG4gICAgICAgIC8qIEFwcGx5IHRoZSBtYXJnaW4gc3R5bGluZyBvbiB0aGUgaWZyYW1lIHdoaWxlIG1haW50YWluaW5nXG4gICAgICAgICB0aGUgem9vbSBzdHlsaW5nICovXG4gICAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIHpvb21TdHlsZSArIG1hcmdpblN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfbG9hZEZyYW1lKCkge1xuICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1mcmFtZVwiKSxcbiAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VicGFnZS1jb250YWluZXJcIiksXG4gICAgICBoYXNQYXJhbXMgPSAvWz8jJl0vLnRlc3QoX3VybCksXG4gICAgICByYW5kb21OdW0gPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwMCksXG4gICAgICByZWZyZXNoVVJMID0gX3VybDtcblxuICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy5yZWZyZXNoID4gMCkge1xuICAgICAgcmVmcmVzaFVSTCA9IGhhc1BhcmFtcyA/XG4gICAgICBfdXJsICsgXCImZHVtbXlWYXI9XCIgKyByYW5kb21OdW0gOlxuICAgICAgX3VybCArIFwiP2R1bW15VmFyPVwiICsgcmFuZG9tTnVtO1xuICAgIH1cblxuICAgIGlmIChjb250YWluZXIgJiYgZnJhbWUpIHtcbiAgICAgIGZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhbWUub25sb2FkID0gbnVsbDtcblxuICAgICAgICAvLyBTaG93IHRoZSBpZnJhbWUgY29udGFpbmVyXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cbiAgICAgICAgLy8gUnVuIHNldEludGVydmFsIHRvIHJlbG9hZCBwYWdlIGJhc2VkIG9uIHRoZSBkYXRhIHJlZnJlc2ggdmFsdWVcbiAgICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2ggPiAwICYmIF9pbnRlcnZhbElkID09PSBudWxsKSB7XG4gICAgICAgICAgX2ludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfbG9hZEZyYW1lKCk7XG4gICAgICAgICAgfSwgX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCByZWZyZXNoVVJMKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfdW5sb2FkRnJhbWUoKSB7XG4gICAgdmFyIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWZyYW1lXCIpO1xuXG4gICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnJlZnJlc2ggPiAwKSB7XG4gICAgICBjbGVhckludGVydmFsKF9pbnRlcnZhbElkKTtcbiAgICB9XG5cbiAgICBpZiAoZnJhbWUpIHtcbiAgICAgIGZyYW1lLnNyYyA9IFwiYWJvdXQ6YmxhbmtcIjtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfYmFja2dyb3VuZFJlYWR5KCkge1xuICAgIC8vIENvbmZpZ3VyZSB0aGUgdmFsdWUgZm9yIF91cmxcbiAgICBfdXJsID0gX2FkZGl0aW9uYWxQYXJhbXMudXJsO1xuXG4gICAgLy8gQWRkIGh0dHA6Ly8gaWYgbm8gcHJvdG9jb2wgcGFyYW1ldGVyIGV4aXN0c1xuICAgIGlmIChfdXJsLmluZGV4T2YoXCI6Ly9cIikgPT09IC0xKSB7XG4gICAgICBfdXJsID0gXCJodHRwOi8vXCIgKyBfdXJsO1xuICAgIH1cblxuICAgIF9jb25maWd1cmVQYWdlKCk7XG4gICAgX3JlYWR5KCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgX3VubG9hZEZyYW1lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIF9sb2FkRnJhbWUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgX3VubG9hZEZyYW1lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBZGRpdGlvbmFsUGFyYW1zKHBhcmFtcykge1xuICAgIF9wcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCk7XG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIEJhY2tncm91bmQgaW5zdGFuY2VcbiAgICBfYmFja2dyb3VuZCA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5CYWNrZ3JvdW5kKF9hZGRpdGlvbmFsUGFyYW1zKTtcbiAgICBfYmFja2dyb3VuZC5pbml0KF9iYWNrZ3JvdW5kUmVhZHkpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRBZGRpdGlvbmFsUGFyYW1zOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIHBhdXNlOiBwYXVzZSxcbiAgICBwbGF5OiBwbGF5LFxuICAgIHN0b3A6IHN0b3BcbiAgfTtcblxufSkoZG9jdW1lbnQsIGdhZGdldHMpO1xuXG4vKiBnbG9iYWwgY29uZmlnICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLkJhY2tncm91bmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2NhbGxiYWNrID0gbnVsbCxcbiAgICBfcmVhZHkgPSBmYWxzZSxcbiAgICBfYmFja2dyb3VuZCA9IG51bGwsXG4gICAgX3N0b3JhZ2UgPSBudWxsLFxuICAgIF9yZWZyZXNoRHVyYXRpb24gPSA5MDAwMDAsIC8vIDE1IG1pbnV0ZXNcbiAgICBfaXNTdG9yYWdlRmlsZSA9IGZhbHNlLFxuICAgIF9zZXBhcmF0b3IgPSBcIlwiO1xuXG4gIC8qXG4gICAqIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gX3JlZnJlc2hUaW1lcigpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGJhY2tncm91bmRSZWZyZXNoKCkge1xuICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBkYXRhLmJhY2tncm91bmQuaW1hZ2UudXJsICsgX3NlcGFyYXRvciArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiKVwiO1xuICAgICAgX3JlZnJlc2hUaW1lcigpO1xuICAgIH0sIF9yZWZyZXNoRHVyYXRpb24pO1xuICB9XG5cbiAgZnVuY3Rpb24gX2JhY2tncm91bmRSZWFkeSgpIHtcbiAgICBfcmVhZHkgPSB0cnVlO1xuXG4gICAgaWYgKGRhdGEuYmFja2dyb3VuZC51c2VJbWFnZSAmJiAhX2lzU3RvcmFnZUZpbGUpIHtcbiAgICAgIC8vIHN0YXJ0IHRoZSByZWZyZXNoIHBvbGwgZm9yIG5vbi1zdG9yYWdlIGJhY2tncm91bmQgaW1hZ2VcbiAgICAgIF9yZWZyZXNoVGltZXIoKTtcbiAgICB9XG5cbiAgICBpZiAoX2NhbGxiYWNrICYmIHR5cGVvZiBfY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgX2NhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NvbmZpZ3VyZSgpIHtcbiAgICB2YXIgc3RyO1xuXG4gICAgX2JhY2tncm91bmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tncm91bmRcIik7XG4gICAgX3N0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tncm91bmRTdG9yYWdlXCIpO1xuXG4gICAgLy8gc2V0IHRoZSBkb2N1bWVudCBiYWNrZ3JvdW5kXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gZGF0YS5iYWNrZ3JvdW5kLmNvbG9yO1xuXG4gICAgaWYgKF9iYWNrZ3JvdW5kKSB7XG4gICAgICBpZiAoZGF0YS5iYWNrZ3JvdW5kLnVzZUltYWdlKSB7XG4gICAgICAgIF9iYWNrZ3JvdW5kLmNsYXNzTmFtZSA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS5wb3NpdGlvbjtcbiAgICAgICAgX2JhY2tncm91bmQuY2xhc3NOYW1lID0gZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnNjYWxlID8gX2JhY2tncm91bmQuY2xhc3NOYW1lICsgXCIgc2NhbGUtdG8tZml0XCJcbiAgICAgICAgICA6IF9iYWNrZ3JvdW5kLmNsYXNzTmFtZTtcblxuICAgICAgICBfaXNTdG9yYWdlRmlsZSA9IChPYmplY3Qua2V5cyhkYXRhLmJhY2tncm91bmRTdG9yYWdlKS5sZW5ndGggIT09IDApO1xuXG4gICAgICAgIGlmICghX2lzU3RvcmFnZUZpbGUpIHtcbiAgICAgICAgICBzdHIgPSBkYXRhLmJhY2tncm91bmQuaW1hZ2UudXJsLnNwbGl0KFwiP1wiKTtcblxuICAgICAgICAgIC8vIHN0b3JlIHRoaXMgZm9yIHRoZSByZWZyZXNoIHRpbWVyXG4gICAgICAgICAgX3NlcGFyYXRvciA9IChzdHIubGVuZ3RoID09PSAxKSA/IFwiP1wiIDogXCImXCI7XG5cbiAgICAgICAgICBfYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChcIiArIGRhdGEuYmFja2dyb3VuZC5pbWFnZS51cmwgKyBcIilcIjtcbiAgICAgICAgICBfYmFja2dyb3VuZFJlYWR5KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKF9zdG9yYWdlKSB7XG4gICAgICAgICAgICAvLyBSaXNlIFN0b3JhZ2VcbiAgICAgICAgICAgIF9zdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgaWYgKCFfcmVhZHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5kZXRhaWwgJiYgZS5kZXRhaWwudXJsKSB7XG4gICAgICAgICAgICAgICAgICAvLyBFc2NhcGUgc2luZ2xlIHF1b3Rlcy5cbiAgICAgICAgICAgICAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIGUuZGV0YWlsLnVybC5yZXBsYWNlKFwiJ1wiLCBcIlxcXFwnXCIpICsgXCInKVwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5kZXRhaWwgJiYgZS5kZXRhaWwudXJsKSB7XG4gICAgICAgICAgICAgICAgICAvLyBjaGVjayBmb3IgXCJjaGFuZ2VkXCIgcHJvcGVydHkgYW5kIGVuc3VyZSBpdCBpcyB0cnVlXG4gICAgICAgICAgICAgICAgICBpZiAoZS5kZXRhaWwuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpICYmIGUuZGV0YWlsLmNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXNjYXBlIHNpbmdsZSBxdW90ZXMuXG4gICAgICAgICAgICAgICAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIGUuZGV0YWlsLnVybC5yZXBsYWNlKFwiJ1wiLCBcIlxcXFwnXCIpICsgXCInKVwiO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF9zdG9yYWdlLnNldEF0dHJpYnV0ZShcImZvbGRlclwiLCBkYXRhLmJhY2tncm91bmRTdG9yYWdlLmZvbGRlcik7XG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBkYXRhLmJhY2tncm91bmRTdG9yYWdlLmZpbGVOYW1lKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBkYXRhLmJhY2tncm91bmRTdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJlbnZcIiwgY29uZmlnLlNUT1JBR0VfRU5WKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLmdvKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBlbGVtZW50IHdpdGggaWQgdmFsdWUgb2YgJ2JhY2tncm91bmRTdG9yYWdlJ1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIGVsZW1lbnQgd2l0aCBpZCB2YWx1ZSBvZiAnYmFja2dyb3VuZCdcIik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KGNiKSB7XG4gICAgaWYgKCFfcmVhZHkpIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBfY2FsbGJhY2sgPSBjYjtcbiAgICAgIH1cblxuICAgICAgX2NvbmZpZ3VyZSgpO1xuXG4gICAgfSBlbHNlIGlmIChjYiAmJiB0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgUmlzZVZpc2lvbiwgZ2FkZ2V0cyAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLFxuICAgIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uV2ViUGFnZS5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZGl0aW9uYWxQYXJhbXMobmFtZXMsIHZhbHVlcykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIG5hbWVzWzBdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBSaXNlVmlzaW9uLldlYlBhZ2Uuc2V0QWRkaXRpb25hbFBhcmFtcyhKU09OLnBhcnNlKHZhbHVlc1swXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBvbHltZXJSZWFkeSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG4gICAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcblxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBhZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gICAgfVxuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJXZWJDb21wb25lbnRzUmVhZHlcIiwgcG9seW1lclJlYWR5KTtcblxufSkod2luZG93LCBnYWRnZXRzKTtcblxuXG5cbi8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbnZhciBfZ2FxID0gX2dhcSB8fCBbXTtcblxuX2dhcS5wdXNoKFsnX3NldEFjY291bnQnLCAnVUEtNTcwOTIxNTktNiddKTtcbl9nYXEucHVzaChbJ190cmFja1BhZ2V2aWV3J10pO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBnYS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IGdhLmFzeW5jID0gdHJ1ZTtcbiAgZ2Euc3JjID0gKCdodHRwczonID09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gJ2h0dHBzOi8vc3NsJyA6ICdodHRwOi8vd3d3JykgKyAnLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzJztcbiAgdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZ2EsIHMpO1xufSkoKTtcbi8qIGpzaGludCBpZ25vcmU6ZW5kICovXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
