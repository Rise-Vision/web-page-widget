if("undefined"==typeof config){var config={STORAGE_ENV:"prod"};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){var t,n,a,o=e.getElementById("webpage-container"),i=e.getElementById("webpage-frame"),r=g.getInt("rsH")/g.getInt("rsW")*100,s=d.scrollHorizontal>0?d.scrollHorizontal:0,l=d.scrollVertical>0?d.scrollVertical:0,c=parseFloat(d.zoom);o&&i&&(t=o.getElementsByClassName("blocker")[0],o.style.visibility="hidden",0!==l&&(r+=l/g.getInt("rsW")*100),o.setAttribute("style","padding-bottom:"+r+"%"),t.style.display=d.interactive?"none":"block",i.setAttribute("scrolling",d.scrollbars?"yes":"no"),n="-ms-zoom:"+c+";-moz-transform: scale("+c+");-moz-transform-origin: 0 0;-o-transform: scale("+c+");-o-transform-origin: 0 0;-webkit-transform: scale("+c+");-webkit-transform-origin: 0 0;",n+="width: "+1/c*100+"%;height: "+1/c*100+"%;",i.setAttribute("style",n),(0!==s||0!==l)&&(a="margin: -"+l+"px 0 0 -"+s+"px;",i.setAttribute("style",n+a)))}function a(){var t=e.getElementById("webpage-frame"),n=e.getElementById("webpage-container"),o=/[?#&]/.test(m),i=Math.ceil(100*Math.random()),r=o?m+"&dummyVar="+i:m+"?dummyVar="+i;n&&t&&(t.onload=function(){t.onload=null,n.style.visibility="visible",d.refresh>0&&null===f&&(f=setInterval(function(){a()},d.refresh))},t.setAttribute("src",r))}function o(){var t=e.getElementById("webpage-frame");d.refresh>0&&clearInterval(f),t&&(t.src="about:blank")}function i(){t.rpc.call("","rsevent_ready",null,g.getString("id"),!0,!0,!0,!0,!1)}function r(){m=d.url,-1===m.indexOf("://")&&(m="http://"+m),n(),i()}function s(){o()}function l(){a()}function c(){o()}function u(e){g=new t.Prefs,d=e,b=new RiseVision.Common.Background(d),b.init(r)}var g=null,d={},m="",f=null,b=null;return{setAdditionalParams:u,pause:s,play:l,stop:c}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function t(){setTimeout(function(){s.style.backgroundImage="url("+e.background.image.url+g+"cb="+(new Date).getTime()+")",t()},c)}function n(){r=!0,e.background.useImage&&!u&&t(),i&&"function"==typeof i&&i()}function a(){var t;s=document.getElementById("background"),l=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,s?e.background.useImage?(s.className=e.background.image.position,s.className=e.background.image.scale?s.className+" scale-to-fit":s.className,u=0!==Object.keys(e.backgroundStorage).length,u?l?(l.addEventListener("rise-storage-response",function(e){r?e.detail&&e.detail.url&&e.detail.hasOwnProperty("changed")&&e.detail.changed&&(s.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')"):(e.detail&&e.detail.url&&(s.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')"),n())}),l.setAttribute("folder",e.backgroundStorage.folder),l.setAttribute("fileName",e.backgroundStorage.fileName),l.setAttribute("companyId",e.backgroundStorage.companyId),l.setAttribute("env",config.STORAGE_ENV),l.go()):console.log("Missing element with id value of 'backgroundStorage'"):(t=e.background.image.url.split("?"),g=1===t.length?"?":"&",s.style.backgroundImage="url("+e.background.image.url+")",n())):n():console.log("Missing element with id value of 'background'")}function o(e){r?e&&"function"==typeof e&&e():(e&&(i=e),a())}var i=null,r=!1,s=null,l=null,c=9e5,u=!1,g="";return{init:o}},function(e,t){"use strict";function n(){RiseVision.WebPage.play()}function a(){RiseVision.WebPage.pause()}function o(){RiseVision.WebPage.stop()}function i(e,t){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&RiseVision.WebPage.setAdditionalParams(JSON.parse(t[0]))}function r(){e.removeEventListener("WebComponentsReady",r),l&&""!==l&&(t.rpc.register("rscmd_play_"+l,n),t.rpc.register("rscmd_pause_"+l,a),t.rpc.register("rscmd_stop_"+l,o),t.rpc.register("rsparam_set_"+l,i),t.rpc.call("","rsparam_get",null,l,["additionalParams"]))}var s=new t.Prefs,l=s.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",r)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-6"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiU1RPUkFHRV9FTlYiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJSaXNlVmlzaW9uIiwiV2ViUGFnZSIsImRvY3VtZW50IiwiZ2FkZ2V0cyIsIl9jb25maWd1cmVQYWdlIiwiYmxvY2tlciIsInpvb21TdHlsZSIsIm1hcmdpblN0eWxlIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJmcmFtZSIsImFzcGVjdFJhdGlvIiwiX3ByZWZzIiwiZ2V0SW50Iiwic2Nyb2xsSG9yaXpWYWwiLCJfYWRkaXRpb25hbFBhcmFtcyIsInNjcm9sbEhvcml6b250YWwiLCJzY3JvbGxWZXJ0VmFsIiwic2Nyb2xsVmVydGljYWwiLCJ6b29tIiwicGFyc2VGbG9hdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJzZXRBdHRyaWJ1dGUiLCJkaXNwbGF5IiwiX2xvYWRGcmFtZSIsImhhc1BhcmFtcyIsInRlc3QiLCJfdXJsIiwicmFuZG9tTnVtIiwiTWF0aCIsImNlaWwiLCJyYW5kb20iLCJyZWZyZXNoVVJMIiwib25sb2FkIiwicmVmcmVzaCIsIl9pbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJfdW5sb2FkRnJhbWUiLCJjbGVhckludGVydmFsIiwic3JjIiwiX3JlYWR5IiwicnBjIiwiY2FsbCIsImdldFN0cmluZyIsIl9iYWNrZ3JvdW5kUmVhZHkiLCJ1cmwiLCJpbmRleE9mIiwicGF1c2UiLCJwbGF5Iiwic3RvcCIsInNldEFkZGl0aW9uYWxQYXJhbXMiLCJwYXJhbXMiLCJQcmVmcyIsIl9iYWNrZ3JvdW5kIiwiQ29tbW9uIiwiQmFja2dyb3VuZCIsImluaXQiLCJkYXRhIiwiX3JlZnJlc2hUaW1lciIsInNldFRpbWVvdXQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kIiwiaW1hZ2UiLCJfc2VwYXJhdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJfcmVmcmVzaER1cmF0aW9uIiwidXNlSW1hZ2UiLCJfaXNTdG9yYWdlRmlsZSIsIl9jYWxsYmFjayIsIl9jb25maWd1cmUiLCJzdHIiLCJfc3RvcmFnZSIsImJvZHkiLCJjb2xvciIsImNsYXNzTmFtZSIsInBvc2l0aW9uIiwic2NhbGUiLCJPYmplY3QiLCJrZXlzIiwiYmFja2dyb3VuZFN0b3JhZ2UiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRldGFpbCIsImhhc093blByb3BlcnR5IiwiY2hhbmdlZCIsInJlcGxhY2UiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImNvbXBhbnlJZCIsImdvIiwiY29uc29sZSIsImxvZyIsInNwbGl0IiwiY2IiLCJ3aW5kb3ciLCJhZGRpdGlvbmFsUGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJwb2x5bWVyUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaWQiLCJyZWdpc3RlciIsInByZWZzIiwib25jb250ZXh0bWVudSIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImFzeW5jIiwibG9jYXRpb24iLCJwcm90b2NvbCIsInMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUVBLEdBQXNCLG1CQUFYQSxRQUF3QixDQUNqQyxHQUFJQSxTQUNGQyxZQUFhLE9BR1Esb0JBQVpDLFVBQ1RBLFFBQVFDLE9BQU8sb0NBQ1pDLFNBQVMsaUJBQWtCLHdCQUMzQkEsU0FBUyxnQkFBaUIsU0FNakMsR0FBSUMsWUFBYUEsY0FDakJBLFlBQVdDLFdBRVhELFdBQVdDLFFBQVUsU0FBV0MsRUFBVUMsR0FFeEMsWUFhQSxTQUFTQyxLQUNQLEdBUUVDLEdBQVNDLEVBQVdDLEVBUmxCQyxFQUFZTixFQUFTTyxlQUFlLHFCQUN0Q0MsRUFBUVIsRUFBU08sZUFBZSxpQkFDaENFLEVBQWdCQyxFQUFPQyxPQUFP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RCxFQUFLRSxFQUFNakUsVUFBVSxLQUd2QnFELEdBQU9hLGNBQWdCLFdBQ3JCLE9BQU8sR0FvQ1RiLEVBQU9kLGlCQUFpQixxQkFBc0JzQixJQUU3Q1IsT0FBUS9GLFFBS1gsSUFBSTZHLE1BQU9BLFFBRVhBLE1BQUtDLE1BQU0sY0FBZSxrQkFDMUJELEtBQUtDLE1BQU0sbUJBRVgsV0FDRSxHQUFJQyxHQUFLaEgsU0FBU2lILGNBQWMsU0FBV0QsR0FBR0UsS0FBTyxrQkFBbUJGLEVBQUdHLE9BQVEsRUFDbkZILEVBQUd6RSxLQUFPLFVBQVl2QyxTQUFTb0gsU0FBU0MsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSXRILFNBQVN1SCxxQkFBcUIsVUFBVSxFQUFJRCxHQUFFRSxXQUFXQyxhQUFhVCxFQUFJTSIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGNvbmZpZzogdHJ1ZSAqL1xuLyogZXhwb3J0ZWQgY29uZmlnICovXG5pZiAodHlwZW9mIGNvbmZpZyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgY29uZmlnID0ge1xuICAgIFNUT1JBR0VfRU5WOiBcInByb2RcIlxuICB9O1xuXG4gIGlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG4gIH1cbn1cblxuLyogZ2xvYmFsIGdhZGdldHMgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5XZWJQYWdlID0ge307XG5cblJpc2VWaXNpb24uV2ViUGFnZSA9IChmdW5jdGlvbiAoZG9jdW1lbnQsIGdhZGdldHMpIHtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBwcml2YXRlIHZhcmlhYmxlc1xuICB2YXIgX3ByZWZzID0gbnVsbCxcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IHt9LFxuICAgIF91cmwgPSBcIlwiLFxuICAgIF9pbnRlcnZhbElkID0gbnVsbCxcbiAgICBfYmFja2dyb3VuZCA9IG51bGw7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cblxuICBmdW5jdGlvbiBfY29uZmlndXJlUGFnZSgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWNvbnRhaW5lclwiKSxcbiAgICAgIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWZyYW1lXCIpLFxuICAgICAgYXNwZWN0UmF0aW8gPSAgKF9wcmVmcy5nZXRJbnQoXCJyc0hcIikgLyBfcHJlZnMuZ2V0SW50KFwicnNXXCIpKSAqIDEwMCxcbiAgICAgIHNjcm9sbEhvcml6VmFsID0gKF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbEhvcml6b250YWwgPiAwKSA/XG4gICAgICAgICAgX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsSG9yaXpvbnRhbCA6IDAsXG4gICAgICBzY3JvbGxWZXJ0VmFsID0gKF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbFZlcnRpY2FsID4gMCkgP1xuICAgICAgICAgIF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbFZlcnRpY2FsIDogMCxcbiAgICAgIHpvb20gPSBwYXJzZUZsb2F0KF9hZGRpdGlvbmFsUGFyYW1zLnpvb20pLFxuICAgICAgYmxvY2tlciwgem9vbVN0eWxlLCBtYXJnaW5TdHlsZTtcblxuICAgIGlmIChjb250YWluZXIgJiYgZnJhbWUpIHtcbiAgICAgIGJsb2NrZXIgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJsb2NrZXJcIilbMF07XG5cbiAgICAgIC8vIEhpZGluZyBpZnJhbWUgY29udGFpbmVyLCB2aXNpYmxlIHdoZW4gdGhlIGlmcmFtZSBzdWNjZXNzZnVsbHkgbG9hZHNcbiAgICAgIGNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgLy8gc2V0IHRoZSBwYWRkaW5nLWJvdHRvbSB3aXRoIHRoZSBhc3BlY3QgcmF0aW8gJSAocmVzcG9uc2l2ZSlcbiAgICAgIGlmIChzY3JvbGxWZXJ0VmFsICE9PSAwKSB7XG4gICAgICAgIC8vIHJlY2FsY3VsYXRlIGFzcGVjdCByYXRpb1xuICAgICAgICBhc3BlY3RSYXRpbyArPSAoc2Nyb2xsVmVydFZhbCAvIF9wcmVmcy5nZXRJbnQoXCJyc1dcIikpICogMTAwO1xuICAgICAgfVxuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicGFkZGluZy1ib3R0b206XCIgKyBhc3BlY3RSYXRpbyArIFwiJVwiKTtcblxuICAgICAgLy8gQ29uZmlndXJlIGludGVyYWN0aXZpdHkgb2YgaWZyYW1lXG4gICAgICBibG9ja2VyLnN0eWxlLmRpc3BsYXkgPSAoX2FkZGl0aW9uYWxQYXJhbXMuaW50ZXJhY3RpdmUpID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG4gICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIixcbiAgICAgICAgKF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbGJhcnMpID8gXCJ5ZXNcIiA6IFwibm9cIik7XG5cbiAgICAgIC8vIENvbmZpZ3VyZSB0aGUgem9vbSAoc2NhbGUpIHN0eWxpbmdcbiAgICAgIHpvb21TdHlsZSA9IFwiLW1zLXpvb206XCIgKyB6b29tICsgXCI7XCIgK1xuICAgICAgICBcIi1tb3otdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgICBcIi1tb3otdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcbiAgICAgICAgXCItby10cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICAgIFwiLW8tdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcbiAgICAgICAgXCItd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgICAgXCItd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIjtcblxuICAgICAgem9vbVN0eWxlICs9IFwid2lkdGg6IFwiICsgKCgxIC8gem9vbSkgKiAxMDApICsgXCIlO1wiICtcbiAgICAgIFwiaGVpZ2h0OiBcIiArICgoMSAvIHpvb20pICogMTAwKSArIFwiJTtcIjtcblxuICAgICAgLy8gQXBwbHkgdGhlIHpvb20gKHNjYWxlKSBvbiB0aGUgaWZyYW1lXG4gICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCB6b29tU3R5bGUpO1xuXG4gICAgICBpZiAoc2Nyb2xsSG9yaXpWYWwgIT09IDAgfHwgc2Nyb2xsVmVydFZhbCAhPT0gMCkge1xuICAgICAgICAvLyBDb25maWd1cmUgdGhlIG1hcmdpbiBzdHlsaW5nXG4gICAgICAgIG1hcmdpblN0eWxlID0gXCJtYXJnaW46IFwiICsgXCItXCIgKyBzY3JvbGxWZXJ0VmFsICsgXCJweCAwIDAgLVwiICtcbiAgICAgICAgICBzY3JvbGxIb3JpelZhbCArIFwicHg7XCI7XG5cbiAgICAgICAgLyogQXBwbHkgdGhlIG1hcmdpbiBzdHlsaW5nIG9uIHRoZSBpZnJhbWUgd2hpbGUgbWFpbnRhaW5pbmdcbiAgICAgICAgIHRoZSB6b29tIHN0eWxpbmcgKi9cbiAgICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgem9vbVN0eWxlICsgbWFyZ2luU3R5bGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9sb2FkRnJhbWUoKSB7XG4gICAgdmFyIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWZyYW1lXCIpLFxuICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWNvbnRhaW5lclwiKSxcbiAgICAgIGhhc1BhcmFtcyA9IC9bPyMmXS8udGVzdChfdXJsKSxcbiAgICAgIHJhbmRvbU51bSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTAwKSxcbiAgICAgIHJlZnJlc2hVUkwgPSBoYXNQYXJhbXMgP1xuICAgICAgICAgIF91cmwgKyBcIiZkdW1teVZhcj1cIiArIHJhbmRvbU51bSA6XG4gICAgICAgICAgX3VybCArIFwiP2R1bW15VmFyPVwiICsgcmFuZG9tTnVtO1xuXG4gICAgaWYgKGNvbnRhaW5lciAmJiBmcmFtZSkge1xuICAgICAgZnJhbWUub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFtZS5vbmxvYWQgPSBudWxsO1xuXG4gICAgICAgIC8vIFNob3cgdGhlIGlmcmFtZSBjb250YWluZXJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgICAvLyBSdW4gc2V0SW50ZXJ2YWwgdG8gcmVsb2FkIHBhZ2UgYmFzZWQgb24gdGhlIGRhdGEgcmVmcmVzaCB2YWx1ZVxuICAgICAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDAgJiYgX2ludGVydmFsSWQgPT09IG51bGwpIHtcbiAgICAgICAgICBfaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2FkRnJhbWUoKTtcbiAgICAgICAgICB9LCBfYWRkaXRpb25hbFBhcmFtcy5yZWZyZXNoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIHJlZnJlc2hVUkwpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF91bmxvYWRGcmFtZSgpIHtcbiAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtZnJhbWVcIik7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDApIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoX2ludGVydmFsSWQpO1xuICAgIH1cblxuICAgIGlmIChmcmFtZSkge1xuICAgICAgZnJhbWUuc3JjID0gXCJhYm91dDpibGFua1wiO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUsIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9iYWNrZ3JvdW5kUmVhZHkoKSB7XG4gICAgLy8gQ29uZmlndXJlIHRoZSB2YWx1ZSBmb3IgX3VybFxuICAgIF91cmwgPSBfYWRkaXRpb25hbFBhcmFtcy51cmw7XG5cbiAgICAvLyBBZGQgaHR0cDovLyBpZiBubyBwcm90b2NvbCBwYXJhbWV0ZXIgZXhpc3RzXG4gICAgaWYgKF91cmwuaW5kZXhPZihcIjovL1wiKSA9PT0gLTEpIHtcbiAgICAgIF91cmwgPSBcImh0dHA6Ly9cIiArIF91cmw7XG4gICAgfVxuXG4gICAgX2NvbmZpZ3VyZVBhZ2UoKTtcbiAgICBfcmVhZHkoKTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBfdW5sb2FkRnJhbWUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgX2xvYWRGcmFtZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBfdW5sb2FkRnJhbWUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMocGFyYW1zKSB7XG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IHBhcmFtcztcblxuICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgQmFja2dyb3VuZCBpbnN0YW5jZVxuICAgIF9iYWNrZ3JvdW5kID0gbmV3IFJpc2VWaXNpb24uQ29tbW9uLkJhY2tncm91bmQoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgIF9iYWNrZ3JvdW5kLmluaXQoX2JhY2tncm91bmRSZWFkeSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNldEFkZGl0aW9uYWxQYXJhbXM6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgcGF1c2U6IHBhdXNlLFxuICAgIHBsYXk6IHBsYXksXG4gICAgc3RvcDogc3RvcFxuICB9O1xuXG59KShkb2N1bWVudCwgZ2FkZ2V0cyk7XG5cbi8qIGdsb2JhbCBjb25maWcgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uQmFja2dyb3VuZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfY2FsbGJhY2sgPSBudWxsLFxuICAgIF9yZWFkeSA9IGZhbHNlLFxuICAgIF9iYWNrZ3JvdW5kID0gbnVsbCxcbiAgICBfc3RvcmFnZSA9IG51bGwsXG4gICAgX3JlZnJlc2hEdXJhdGlvbiA9IDkwMDAwMCwgLy8gMTUgbWludXRlc1xuICAgIF9pc1N0b3JhZ2VGaWxlID0gZmFsc2UsXG4gICAgX3NlcGFyYXRvciA9IFwiXCI7XG5cbiAgLypcbiAgICogUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfcmVmcmVzaFRpbWVyKCkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gYmFja2dyb3VuZFJlZnJlc2goKSB7XG4gICAgICBfYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChcIiArIGRhdGEuYmFja2dyb3VuZC5pbWFnZS51cmwgKyBfc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgXCIpXCI7XG4gICAgICBfcmVmcmVzaFRpbWVyKCk7XG4gICAgfSwgX3JlZnJlc2hEdXJhdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiBfYmFja2dyb3VuZFJlYWR5KCkge1xuICAgIF9yZWFkeSA9IHRydWU7XG5cbiAgICBpZiAoZGF0YS5iYWNrZ3JvdW5kLnVzZUltYWdlICYmICFfaXNTdG9yYWdlRmlsZSkge1xuICAgICAgLy8gc3RhcnQgdGhlIHJlZnJlc2ggcG9sbCBmb3Igbm9uLXN0b3JhZ2UgYmFja2dyb3VuZCBpbWFnZVxuICAgICAgX3JlZnJlc2hUaW1lcigpO1xuICAgIH1cblxuICAgIGlmIChfY2FsbGJhY2sgJiYgdHlwZW9mIF9jYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBfY2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfY29uZmlndXJlKCkge1xuICAgIHZhciBzdHI7XG5cbiAgICBfYmFja2dyb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZFwiKTtcbiAgICBfc3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZFN0b3JhZ2VcIik7XG5cbiAgICAvLyBzZXQgdGhlIGRvY3VtZW50IGJhY2tncm91bmRcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmQgPSBkYXRhLmJhY2tncm91bmQuY29sb3I7XG5cbiAgICBpZiAoX2JhY2tncm91bmQpIHtcbiAgICAgIGlmIChkYXRhLmJhY2tncm91bmQudXNlSW1hZ2UpIHtcbiAgICAgICAgX2JhY2tncm91bmQuY2xhc3NOYW1lID0gZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnBvc2l0aW9uO1xuICAgICAgICBfYmFja2dyb3VuZC5jbGFzc05hbWUgPSBkYXRhLmJhY2tncm91bmQuaW1hZ2Uuc2NhbGUgPyBfYmFja2dyb3VuZC5jbGFzc05hbWUgKyBcIiBzY2FsZS10by1maXRcIlxuICAgICAgICAgIDogX2JhY2tncm91bmQuY2xhc3NOYW1lO1xuXG4gICAgICAgIF9pc1N0b3JhZ2VGaWxlID0gKE9iamVjdC5rZXlzKGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UpLmxlbmd0aCAhPT0gMCk7XG5cbiAgICAgICAgaWYgKCFfaXNTdG9yYWdlRmlsZSkge1xuICAgICAgICAgIHN0ciA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS51cmwuc3BsaXQoXCI/XCIpO1xuXG4gICAgICAgICAgLy8gc3RvcmUgdGhpcyBmb3IgdGhlIHJlZnJlc2ggdGltZXJcbiAgICAgICAgICBfc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcblxuICAgICAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnVybCArIFwiKVwiO1xuICAgICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoX3N0b3JhZ2UpIHtcbiAgICAgICAgICAgIC8vIFJpc2UgU3RvcmFnZVxuICAgICAgICAgICAgX3N0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICBpZiAoIV9yZWFkeSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmRldGFpbCAmJiBlLmRldGFpbC51cmwpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEVzY2FwZSBzaW5nbGUgcXVvdGVzLlxuICAgICAgICAgICAgICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiICsgZS5kZXRhaWwudXJsLnJlcGxhY2UoXCInXCIsIFwiXFxcXCdcIikgKyBcIicpXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2JhY2tncm91bmRSZWFkeSgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlLmRldGFpbCAmJiBlLmRldGFpbC51cmwpIHtcbiAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBcImNoYW5nZWRcIiBwcm9wZXJ0eSBhbmQgZW5zdXJlIGl0IGlzIHRydWVcbiAgICAgICAgICAgICAgICAgIGlmIChlLmRldGFpbC5oYXNPd25Qcm9wZXJ0eShcImNoYW5nZWRcIikgJiYgZS5kZXRhaWwuY2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFc2NhcGUgc2luZ2xlIHF1b3Rlcy5cbiAgICAgICAgICAgICAgICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiICsgZS5kZXRhaWwudXJsLnJlcGxhY2UoXCInXCIsIFwiXFxcXCdcIikgKyBcIicpXCI7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuZm9sZGVyKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVOYW1lXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuICAgICAgICAgICAgX3N0b3JhZ2UuZ28oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIGVsZW1lbnQgd2l0aCBpZCB2YWx1ZSBvZiAnYmFja2dyb3VuZFN0b3JhZ2UnXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2JhY2tncm91bmRSZWFkeSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk1pc3NpbmcgZWxlbWVudCB3aXRoIGlkIHZhbHVlIG9mICdiYWNrZ3JvdW5kJ1wiKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoY2IpIHtcbiAgICBpZiAoIV9yZWFkeSkge1xuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIF9jYWxsYmFjayA9IGNiO1xuICAgICAgfVxuXG4gICAgICBfY29uZmlndXJlKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYigpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBSaXNlVmlzaW9uLCBnYWRnZXRzICovXG5cbihmdW5jdGlvbiAod2luZG93LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXG4gICAgaWQgPSBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICAvLyBEaXNhYmxlIGNvbnRleHQgbWVudSAocmlnaHQgY2xpY2sgbWVudSlcbiAgd2luZG93Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnBsYXkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIFJpc2VWaXNpb24uV2ViUGFnZS5wYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2Uuc3RvcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkaXRpb25hbFBhcmFtcyhuYW1lcywgdmFsdWVzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIFJpc2VWaXNpb24uV2ViUGFnZS5zZXRBZGRpdGlvbmFsUGFyYW1zKEpTT04ucGFyc2UodmFsdWVzWzBdKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcG9seW1lclJlYWR5KCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbiAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGF1c2VfXCIgKyBpZCwgcGF1c2UpO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xuXG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIGFkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG5cblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS02J10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
