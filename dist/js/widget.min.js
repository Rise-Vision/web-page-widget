if("undefined"==typeof config){var config={};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.WebPage={},RiseVision.WebPage=function(e,t){"use strict";function n(){var t,n,r,s=e.getElementById("webpage-container"),a=e.getElementById("webpage-frame"),i=g.getInt("rsH")/g.getInt("rsW")*100,o=u.scrollHorizontal>0?u.scrollHorizontal:0,l=u.scrollVertical>0?u.scrollVertical:0,c=parseFloat(u.zoom);s&&a&&(t=s.getElementsByClassName("blocker")[0],s.style.visibility="hidden",0!==l&&(i+=l/g.getInt("rsW")*100),s.setAttribute("style","padding-bottom:"+i+"%"),t.style.display=u.interactive?"none":"block",a.setAttribute("scrolling",u.scrollbars?"yes":"no"),n="-ms-zoom:"+c+";-moz-transform: scale("+c+");-moz-transform-origin: 0 0;-o-transform: scale("+c+");-o-transform-origin: 0 0;-webkit-transform: scale("+c+");-webkit-transform-origin: 0 0;",a.setAttribute("style",n),(0!==o||0!==l)&&(r="margin: -"+l+"px 0 0 -"+o+"px;",a.setAttribute("style",n+r)))}function r(){var t=e.getElementById("webpage-frame"),n=e.getElementById("webpage-container"),s=/[?#&]/.test(m),a=Math.ceil(100*Math.random()),i=s?m+"&dummyVar="+a:m+"?dummyVar="+a;n&&t&&(t.onload=function(){t.onload=null,n.style.visibility="visible",u.refresh>0&&(d=setInterval(function(){r()},u.refresh))},t.setAttribute("src",i))}function s(){var t=e.getElementById("webpage-frame");u.refresh>0&&clearInterval(d),t&&(t.src="about:blank")}function a(){t.rpc.call("","rsevent_ready",null,g.getString("id"),!0,!0,!0,!0,!1)}function i(){s()}function o(){r()}function l(){s()}function c(r,s){g=new t.Prefs,Array.isArray(r)&&r.length>0&&"additionalParams"===r[0]&&Array.isArray(s)&&s.length>0&&(u=JSON.parse(s[0]),e.body.style.background=u.background.color,m=u.url,-1===m.indexOf("://")&&(m="http://"+m),n(),a())}var g=null,u={},m="",d=null;return{setParams:c,pause:i,play:o,stop:l}}(document,gadgets),function(e,t){"use strict";function n(){RiseVision.WebPage.play()}function r(){RiseVision.WebPage.pause()}function s(){RiseVision.WebPage.stop()}var a=new t.Prefs,i=a.getString("id");e.oncontextmenu=function(){return!1},i&&""!==i&&(t.rpc.register("rscmd_play_"+i,n),t.rpc.register("rscmd_pause_"+i,r),t.rpc.register("rscmd_stop_"+i,s),t.rpc.register("rsparam_set_"+i,RiseVision.WebPage.setParams),t.rpc.call("","rsparam_get",null,i,["additionalParams"]))}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-41395348-11"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiUmlzZVZpc2lvbiIsIldlYlBhZ2UiLCJkb2N1bWVudCIsImdhZGdldHMiLCJfY29uZmlndXJlUGFnZSIsImJsb2NrZXIiLCJ6b29tU3R5bGUiLCJtYXJnaW5TdHlsZSIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiZnJhbWUiLCJhc3BlY3RSYXRpbyIsIl9wcmVmcyIsImdldEludCIsInNjcm9sbEhvcml6VmFsIiwiX2FkZGl0aW9uYWxQYXJhbXMiLCJzY3JvbGxIb3Jpem9udGFsIiwic2Nyb2xsVmVydFZhbCIsInNjcm9sbFZlcnRpY2FsIiwiem9vbSIsInBhcnNlRmxvYXQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic3R5bGUiLCJ2aXNpYmlsaXR5Iiwic2V0QXR0cmlidXRlIiwiZGlzcGxheSIsIl9sb2FkRnJhbWUiLCJoYXNQYXJhbXMiLCJ0ZXN0IiwiX3VybCIsInJhbmRvbU51bSIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwicmVmcmVzaFVSTCIsIm9ubG9hZCIsInJlZnJlc2giLCJfaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX3VubG9hZEZyYW1lIiwiY2xlYXJJbnRlcnZhbCIsInNyYyIsIl9yZWFkeSIsInJwYyIsImNhbGwiLCJnZXRTdHJpbmciLCJwYXVzZSIsInBsYXkiLCJzdG9wIiwic2V0UGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJQcmVmcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIkpTT04iLCJwYXJzZSIsImJvZHkiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ1cmwiLCJpbmRleE9mIiwid2luZG93IiwicHJlZnMiLCJpZCIsIm9uY29udGV4dG1lbnUiLCJyZWdpc3RlciIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImFzeW5jIiwibG9jYXRpb24iLCJwcm90b2NvbCIsInMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUVBLEdBQXNCLG1CQUFYQSxRQUF3QixDQUNqQyxHQUFJQSxVQUltQixvQkFBWkMsVUFDVEEsUUFBUUMsT0FBTyxvQ0FDWkMsU0FBUyxpQkFBa0IsdURBQzNCQSxTQUFTLGdCQUFpQixTQU1qQyxHQUFJQyxZQUFhQSxjQUNqQkEsWUFBV0MsV0FFWEQsV0FBV0MsUUFBVSxTQUFXQyxFQUFVQyxHQUV4QyxZQVFBLFNBQVNDLEtBQ1AsR0FRRUMsR0FBU0MsRUFBV0MsRUFSbEJDLEVBQVlOLEVBQVNPLGVBQWUscUJBQ3RDQyxFQUFRUixFQUFTTyxlQUFlLGlCQUNoQ0UsRUFBZ0JDLEVBQU9DLE9BQU8sT0FBU0QsRUFBT0MsT0FBTyxPQUFVLElBQy9EQyxFQUFrQkMsRUFBa0JDLGlCQUFtQixFQUNuREQsRUFBa0JDLGlCQUFtQixFQUN6Q0MsRUFBaUJGLEVBQWtCRyxlQUFpQixFQUNoREgsRUFBa0JHLGVBQWlCLEVBQ3ZDQyxFQUFPQyxXQUFXTCxFQUFrQkksS0FHbENYLElBQWFFLElBQ2ZMLEVBQVVHLEVBQVVhLHVCQUF1QixXQUFXLEdBR3REYixFQUFVYyxNQUFNQyxXQUFhLFNBR1AsSUFBbEJOLElBRUZOLEdBQWdCTSxFQUFnQkwsRUFBT0MsT0FBTyxPQUFVLEtBRTFETCxFQUFVZ0IsYUFBYSxRQUFTLGtCQUFvQmIsRUFBYyxLQUdsRU4sRUFBUWlCLE1BQU1HLFFBQVdWLEVBQTZCLFlBQUksT0FBUyxRQUNuRUwsRUFBTWMsYUFBYSxZQUNoQlQsRUFBNEIsV0FBSSxNQUFRLE1BRzNDVCxFQUFZLFlBQWNhLEVBQU8sMEJBQ0pBLEVBQU8sb0RBRVRBLEVBQU8sdURBRUZBLEVBQU8sbUNBSXZDVCxFQUFNYyxhQUFhLFFBQVNsQixJQUVMLElBQW5CUSxHQUEwQyxJQUFsQkcsS0FFMUJWLEVBQWMsWUFBbUJVLEVBQWdCLFdBQy9DSCxFQUFpQixNQUluQkosRUFBTWMsYUFB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ZzogdHJ1ZSAqL1xuLyogZXhwb3J0ZWQgY29uZmlnICovXG5pZiAodHlwZW9mIGNvbmZpZyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgY29uZmlnID0ge1xuICAgIC8vIHZhcmlhYmxlcyBnbyBoZXJlXG4gIH07XG5cbiAgaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAgIC5jb25zdGFudChcIkxPQ0FMRVNfUFJFRklYXCIsIFwiY29tcG9uZW50cy9ydi1jb21tb24taTE4bi9kaXN0L2xvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG4gIH1cbn1cblxuLyogZ2xvYmFsIGdhZGdldHMgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5XZWJQYWdlID0ge307XG5cblJpc2VWaXNpb24uV2ViUGFnZSA9IChmdW5jdGlvbiAoZG9jdW1lbnQsIGdhZGdldHMpIHtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBwcml2YXRlIHZhcmlhYmxlc1xuICB2YXIgX3ByZWZzID0gbnVsbCxcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IHt9LFxuICAgIF91cmwgPSBcIlwiLFxuICAgIF9pbnRlcnZhbElkID0gbnVsbDtcblxuICBmdW5jdGlvbiBfY29uZmlndXJlUGFnZSgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWNvbnRhaW5lclwiKSxcbiAgICAgIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWZyYW1lXCIpLFxuICAgICAgYXNwZWN0UmF0aW8gPSAgKF9wcmVmcy5nZXRJbnQoXCJyc0hcIikgLyBfcHJlZnMuZ2V0SW50KFwicnNXXCIpKSAqIDEwMCxcbiAgICAgIHNjcm9sbEhvcml6VmFsID0gKF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbEhvcml6b250YWwgPiAwKSA/XG4gICAgICAgICAgX2FkZGl0aW9uYWxQYXJhbXMuc2Nyb2xsSG9yaXpvbnRhbCA6IDAsXG4gICAgICBzY3JvbGxWZXJ0VmFsID0gKF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbFZlcnRpY2FsID4gMCkgP1xuICAgICAgICAgIF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbFZlcnRpY2FsIDogMCxcbiAgICAgIHpvb20gPSBwYXJzZUZsb2F0KF9hZGRpdGlvbmFsUGFyYW1zLnpvb20pLFxuICAgICAgYmxvY2tlciwgem9vbVN0eWxlLCBtYXJnaW5TdHlsZTtcblxuICAgIGlmIChjb250YWluZXIgJiYgZnJhbWUpIHtcbiAgICAgIGJsb2NrZXIgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJsb2NrZXJcIilbMF07XG5cbiAgICAgIC8vIEhpZGluZyBpZnJhbWUgY29udGFpbmVyLCB2aXNpYmxlIHdoZW4gdGhlIGlmcmFtZSBzdWNjZXNzZnVsbHkgbG9hZHNcbiAgICAgIGNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgLy8gc2V0IHRoZSBwYWRkaW5nLWJvdHRvbSB3aXRoIHRoZSBhc3BlY3QgcmF0aW8gJSAocmVzcG9uc2l2ZSlcbiAgICAgIGlmIChzY3JvbGxWZXJ0VmFsICE9PSAwKSB7XG4gICAgICAgIC8vIHJlY2FsY3VsYXRlIGFzcGVjdCByYXRpb1xuICAgICAgICBhc3BlY3RSYXRpbyArPSAoc2Nyb2xsVmVydFZhbCAvIF9wcmVmcy5nZXRJbnQoXCJyc1dcIikpICogMTAwO1xuICAgICAgfVxuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicGFkZGluZy1ib3R0b206XCIgKyBhc3BlY3RSYXRpbyArIFwiJVwiKTtcblxuICAgICAgLy8gQ29uZmlndXJlIGludGVyYWN0aXZpdHkgb2YgaWZyYW1lXG4gICAgICBibG9ja2VyLnN0eWxlLmRpc3BsYXkgPSAoX2FkZGl0aW9uYWxQYXJhbXMuaW50ZXJhY3RpdmUpID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG4gICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIixcbiAgICAgICAgKF9hZGRpdGlvbmFsUGFyYW1zLnNjcm9sbGJhcnMpID8gXCJ5ZXNcIiA6IFwibm9cIik7XG5cbiAgICAgIC8vIENvbmZpZ3VyZSB0aGUgem9vbSAoc2NhbGUpIHN0eWxpbmdcbiAgICAgIHpvb21TdHlsZSA9IFwiLW1zLXpvb206XCIgKyB6b29tICsgXCI7XCIgK1xuICAgICAgICBcIi1tb3otdHJhbnNmb3JtOiBzY2FsZShcIiArIHpvb20gKyBcIik7XCIgK1xuICAgICAgICBcIi1tb3otdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcbiAgICAgICAgXCItby10cmFuc2Zvcm06IHNjYWxlKFwiICsgem9vbSArIFwiKTtcIiArXG4gICAgICAgIFwiLW8tdHJhbnNmb3JtLW9yaWdpbjogMCAwO1wiICtcbiAgICAgICAgXCItd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoXCIgKyB6b29tICsgXCIpO1wiICtcbiAgICAgICAgXCItd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDAgMDtcIjtcblxuICAgICAgLy8gQXBwbHkgdGhlIHpvb20gKHNjYWxlKSBvbiB0aGUgaWZyYW1lXG4gICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCB6b29tU3R5bGUpO1xuXG4gICAgICBpZiAoc2Nyb2xsSG9yaXpWYWwgIT09IDAgfHwgc2Nyb2xsVmVydFZhbCAhPT0gMCkge1xuICAgICAgICAvLyBDb25maWd1cmUgdGhlIG1hcmdpbiBzdHlsaW5nXG4gICAgICAgIG1hcmdpblN0eWxlID0gXCJtYXJnaW46IFwiICsgXCItXCIgKyBzY3JvbGxWZXJ0VmFsICsgXCJweCAwIDAgLVwiICtcbiAgICAgICAgICBzY3JvbGxIb3JpelZhbCArIFwicHg7XCI7XG5cbiAgICAgICAgLyogQXBwbHkgdGhlIG1hcmdpbiBzdHlsaW5nIG9uIHRoZSBpZnJhbWUgd2hpbGUgbWFpbnRhaW5pbmdcbiAgICAgICAgIHRoZSB6b29tIHN0eWxpbmcgKi9cbiAgICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgem9vbVN0eWxlICsgbWFyZ2luU3R5bGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9sb2FkRnJhbWUoKSB7XG4gICAgdmFyIGZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWZyYW1lXCIpLFxuICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWJwYWdlLWNvbnRhaW5lclwiKSxcbiAgICAgIGhhc1BhcmFtcyA9IC9bPyMmXS8udGVzdChfdXJsKSxcbiAgICAgIHJhbmRvbU51bSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTAwKSxcbiAgICAgIHJlZnJlc2hVUkwgPSBoYXNQYXJhbXMgP1xuICAgICAgICAgIF91cmwgKyBcIiZkdW1teVZhcj1cIiArIHJhbmRvbU51bSA6XG4gICAgICAgICAgX3VybCArIFwiP2R1bW15VmFyPVwiICsgcmFuZG9tTnVtO1xuXG4gICAgaWYgKGNvbnRhaW5lciAmJiBmcmFtZSkge1xuICAgICAgZnJhbWUub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFtZS5vbmxvYWQgPSBudWxsO1xuXG4gICAgICAgIC8vIFNob3cgdGhlIGlmcmFtZSBjb250YWluZXJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgICAvLyBSdW4gc2V0SW50ZXJ2YWwgdG8gcmVsb2FkIHBhZ2UgYmFzZWQgb24gdGhlIGRhdGEgcmVmcmVzaCB2YWx1ZVxuICAgICAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDApIHtcbiAgICAgICAgICBfaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2FkRnJhbWUoKTtcbiAgICAgICAgICB9LCBfYWRkaXRpb25hbFBhcmFtcy5yZWZyZXNoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIHJlZnJlc2hVUkwpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF91bmxvYWRGcmFtZSgpIHtcbiAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlYnBhZ2UtZnJhbWVcIik7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMucmVmcmVzaCA+IDApIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoX2ludGVydmFsSWQpO1xuICAgIH1cblxuICAgIGlmIChmcmFtZSkge1xuICAgICAgZnJhbWUuc3JjID0gXCJhYm91dDpibGFua1wiO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUsIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIF91bmxvYWRGcmFtZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBfbG9hZEZyYW1lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIF91bmxvYWRGcmFtZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0UGFyYW1zKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZSh2YWx1ZXNbMF0pO1xuXG4gICAgICAgIC8vIHNldCB0aGUgZG9jdW1lbnQgYmFja2dyb3VuZCB3aXRoIHZhbHVlIHNhdmVkIGluIHNldHRpbmdzXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IF9hZGRpdGlvbmFsUGFyYW1zLmJhY2tncm91bmQuY29sb3I7XG5cbiAgICAgICAgLy8gQ29uZmlndXJlIHRoZSB2YWx1ZSBmb3IgX3VybFxuICAgICAgICBfdXJsID0gX2FkZGl0aW9uYWxQYXJhbXMudXJsO1xuXG4gICAgICAgIC8vIEFkZCBodHRwOi8vIGlmIG5vIHByb3RvY29sIHBhcmFtZXRlciBleGlzdHNcbiAgICAgICAgaWYgKF91cmwuaW5kZXhPZihcIjovL1wiKSA9PT0gLTEpIHtcbiAgICAgICAgICBfdXJsID0gXCJodHRwOi8vXCIgKyBfdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgX2NvbmZpZ3VyZVBhZ2UoKTtcbiAgICAgICAgX3JlYWR5KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRQYXJhbXM6IHNldFBhcmFtcyxcbiAgICBwYXVzZTogcGF1c2UsXG4gICAgcGxheTogcGxheSxcbiAgICBzdG9wOiBzdG9wXG4gIH07XG5cbn0pKGRvY3VtZW50LCBnYWRnZXRzKTtcblxuLyogZ2xvYmFsIFJpc2VWaXNpb24sIGdhZGdldHMgKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBSaXNlVmlzaW9uLldlYlBhZ2UucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5XZWJQYWdlLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIFJpc2VWaXNpb24uV2ViUGFnZS5zdG9wKCk7XG4gIH1cblxuICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wYXVzZV9cIiArIGlkLCBwYXVzZSk7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xuXG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBSaXNlVmlzaW9uLldlYlBhZ2Uuc2V0UGFyYW1zKTtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImFkZGl0aW9uYWxQYXJhbXNcIl0pO1xuICB9XG5cbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTQxMzk1MzQ4LTExJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==